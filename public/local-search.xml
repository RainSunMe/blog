<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>webpackæ‰“åŒ…åŸç†</title>
    <link href="undefined2020/07/webpack/"/>
    <url>2020/07/webpack/</url>
    
    <content type="html"><![CDATA[<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h2 id="ä»€ä¹ˆæ˜¯-webpack"><a href="#ä»€ä¹ˆæ˜¯-webpack" class="headerlink" title="ä»€ä¹ˆæ˜¯ webpack"></a>ä»€ä¹ˆæ˜¯ webpack</h2><p>æœ¬è´¨ä¸Š,webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶,å®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph),å…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—,ç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p><p>webpack å°±åƒä¸€æ¡ç”Ÿäº§çº¿,è¦ç»è¿‡ä¸€ç³»åˆ—å¤„ç†æµç¨‹åæ‰èƒ½å°†æºæ–‡ä»¶è½¬æ¢æˆè¾“å‡ºç»“æœã€‚ è¿™æ¡ç”Ÿäº§çº¿ä¸Šçš„æ¯ä¸ªå¤„ç†æµç¨‹çš„èŒè´£éƒ½æ˜¯å•ä¸€çš„,å¤šä¸ªæµç¨‹ä¹‹é—´æœ‰å­˜åœ¨ä¾èµ–å…³ç³»,åªæœ‰å®Œæˆå½“å‰å¤„ç†åæ‰èƒ½äº¤ç»™ä¸‹ä¸€ä¸ªæµç¨‹å»å¤„ç†ã€‚ æ’ä»¶å°±åƒæ˜¯ä¸€ä¸ªæ’å…¥åˆ°ç”Ÿäº§çº¿ä¸­çš„ä¸€ä¸ªåŠŸèƒ½,åœ¨ç‰¹å®šçš„æ—¶æœºå¯¹ç”Ÿäº§çº¿ä¸Šçš„èµ„æºåšå¤„ç†ã€‚</p><p>webpack é€šè¿‡ Tapable æ¥ç»„ç»‡è¿™æ¡å¤æ‚çš„ç”Ÿäº§çº¿ã€‚ webpack åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šå¹¿æ’­äº‹ä»¶,æ’ä»¶åªéœ€è¦ç›‘å¬å®ƒæ‰€å…³å¿ƒçš„äº‹ä»¶,å°±èƒ½åŠ å…¥åˆ°è¿™æ¡ç”Ÿäº§çº¿ä¸­,å»æ”¹å˜ç”Ÿäº§çº¿çš„è¿ä½œã€‚ webpack çš„äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§,ä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§å¾ˆå¥½ã€‚ â€“ æ·±å…¥æµ…å‡º webpack å´æµ©éºŸ<br><img src="/img/wp.png" alt=""></p><h2 id="webpack-æ ¸å¿ƒæ¦‚å¿µ"><a href="#webpack-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="webpack æ ¸å¿ƒæ¦‚å¿µ"></a>webpack æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><p>å…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—,æ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚</p><p>è¿›å…¥å…¥å£èµ·ç‚¹å,webpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ã€‚</p><p>æ¯ä¸ªä¾èµ–é¡¹éšå³è¢«å¤„ç†,æœ€åè¾“å‡ºåˆ°ç§°ä¹‹ä¸º bundles çš„æ–‡ä»¶ä¸­ã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>output å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundles,ä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶,é»˜è®¤å€¼ä¸º ./distã€‚</p><p>åŸºæœ¬ä¸Š,æ•´ä¸ªåº”ç”¨ç¨‹åºç»“æ„,éƒ½ä¼šè¢«ç¼–è¯‘åˆ°ä½ æŒ‡å®šçš„è¾“å‡ºè·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚</p><h3 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h3><p>æ¨¡å—,åœ¨ Webpack é‡Œä¸€åˆ‡çš†æ¨¡å—,ä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚Webpack ä¼šä»é…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚</p><h3 id="Chunk"><a href="#Chunk" class="headerlink" title="Chunk"></a>Chunk</h3><p>ä»£ç å—,ä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆ,ç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²ã€‚</p><h3 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h3><p>loader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚</p><p>loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—,ç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›,å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚</p><p>æœ¬è´¨ä¸Š,webpack loader å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶,è½¬æ¢ä¸ºåº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾ï¼ˆå’Œæœ€ç»ˆçš„ bundleï¼‰å¯ä»¥ç›´æ¥å¼•ç”¨çš„æ¨¡å—ã€‚</p><h3 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h3><p>loader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—,è€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚</p><p>æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬,ä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©,ä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§,å¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚</p><h2 id="webpack-æ„å»ºæµç¨‹"><a href="#webpack-æ„å»ºæµç¨‹" class="headerlink" title="webpack æ„å»ºæµç¨‹"></a>webpack æ„å»ºæµç¨‹</h2><p>Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹,ä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ :</p><ol><li>åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°,å¾—å‡ºæœ€ç»ˆçš„å‚æ•°ã€‚</li><li>å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡,åŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶,æ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ã€‚</li><li>ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶ã€‚</li><li>ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘,è°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘,å†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—,å†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ã€‚</li><li>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬ 4 æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—å,å¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</li><li>è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»,ç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunk,å†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨,è¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šã€‚</li><li>è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹å,æ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶å,æŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚</li></ol><p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­,Webpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶,æ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘,å¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœã€‚</p><h2 id="å®è·µåŠ æ·±ç†è§£-æ’¸ä¸€ä¸ªç®€æ˜“-webpack"><a href="#å®è·µåŠ æ·±ç†è§£-æ’¸ä¸€ä¸ªç®€æ˜“-webpack" class="headerlink" title="å®è·µåŠ æ·±ç†è§£,æ’¸ä¸€ä¸ªç®€æ˜“ webpack"></a>å®è·µåŠ æ·±ç†è§£,æ’¸ä¸€ä¸ªç®€æ˜“ webpack</h2><h3 id="1-å®šä¹‰-Compiler-ç±»"><a href="#1-å®šä¹‰-Compiler-ç±»" class="headerlink" title="1. å®šä¹‰ Compiler ç±»"></a>1. å®šä¹‰ Compiler ç±»</h3><pre><code class="js">class Compiler {  constructor(options) {    // webpack é…ç½®    const { entry, output } = options    // å…¥å£    this.entry = entry    // å‡ºå£    this.output = output    // æ¨¡å—    this.modules = []  }  // æ„å»ºå¯åŠ¨  run() {}  // é‡å†™ requireå‡½æ•°,è¾“å‡ºbundle  generate() {}}</code></pre><h3 id="2-è§£æå…¥å£æ–‡ä»¶-è·å–-AST"><a href="#2-è§£æå…¥å£æ–‡ä»¶-è·å–-AST" class="headerlink" title="2. è§£æå…¥å£æ–‡ä»¶,è·å– AST"></a>2. è§£æå…¥å£æ–‡ä»¶,è·å– AST</h3><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨@babel/parser,è¿™æ˜¯ babel7 çš„å·¥å…·,æ¥å¸®åŠ©æˆ‘ä»¬åˆ†æå†…éƒ¨çš„è¯­æ³•,åŒ…æ‹¬ es6,è¿”å›ä¸€ä¸ª AST æŠ½è±¡è¯­æ³•æ ‘ã€‚</p><pre><code class="js">// webpack.config.jsconst path = require(&#39;path&#39;)module.exports = {  entry: &#39;./src/index.js&#39;,  output: {    path: path.resolve(__dirname, &#39;./dist&#39;),    filename: &#39;main.js&#39;  }}//</code></pre><pre><code class="js">const fs = require(&#39;fs&#39;)const parser = require(&#39;@babel/parser&#39;)const options = require(&#39;./webpack.config&#39;)const Parser = {  getAst: path =&gt; {    // è¯»å–å…¥å£æ–‡ä»¶    const content = fs.readFileSync(path, &#39;utf-8&#39;)    // å°†æ–‡ä»¶å†…å®¹è½¬ä¸ºASTæŠ½è±¡è¯­æ³•æ ‘    return parser.parse(content, {      sourceType: &#39;module&#39;    })  }}class Compiler {  constructor(options) {    // webpack é…ç½®    const { entry, output } = options    // å…¥å£    this.entry = entry    // å‡ºå£    this.output = output    // æ¨¡å—    this.modules = []  }  // æ„å»ºå¯åŠ¨  run() {    const ast = Parser.getAst(this.entry)  }  // é‡å†™ requireå‡½æ•°,è¾“å‡ºbundle  generate() {}}new Compiler(options).run()</code></pre><h3 id="3-æ‰¾å‡ºæ‰€æœ‰ä¾èµ–æ¨¡å—"><a href="#3-æ‰¾å‡ºæ‰€æœ‰ä¾èµ–æ¨¡å—" class="headerlink" title="3. æ‰¾å‡ºæ‰€æœ‰ä¾èµ–æ¨¡å—"></a>3. æ‰¾å‡ºæ‰€æœ‰ä¾èµ–æ¨¡å—</h3><p>Babel æä¾›äº†@babel/traverse(éå†)æ–¹æ³•ç»´æŠ¤è¿™ AST æ ‘çš„æ•´ä½“çŠ¶æ€,æˆ‘ä»¬è¿™é‡Œä½¿ç”¨å®ƒæ¥å¸®æˆ‘ä»¬æ‰¾å‡ºä¾èµ–æ¨¡å—ã€‚</p><pre><code class="js">const fs = require(&#39;fs&#39;)const path = require(&#39;path&#39;)const options = require(&#39;./webpack.config&#39;)const parser = require(&#39;@babel/parser&#39;)const traverse = require(&#39;@babel/traverse&#39;).defaultconst Parser = {  getAst: path =&gt; {    // è¯»å–å…¥å£æ–‡ä»¶    const content = fs.readFileSync(path, &#39;utf-8&#39;)    // å°†æ–‡ä»¶å†…å®¹è½¬ä¸ºASTæŠ½è±¡è¯­æ³•æ ‘    return parser.parse(content, {      sourceType: &#39;module&#39;    })  },  getDependecies: (ast, filename) =&gt; {    const dependecies = {}    // éå†æ‰€æœ‰çš„ import æ¨¡å—,å­˜å…¥dependecies    traverse(ast, {      // ç±»å‹ä¸º ImportDeclaration çš„ AST èŠ‚ç‚¹ (å³ä¸ºimport è¯­å¥)      ImportDeclaration({ node }) {        const dirname = path.dirname(filename)        // ä¿å­˜ä¾èµ–æ¨¡å—è·¯å¾„,ä¹‹åç”Ÿæˆä¾èµ–å…³ç³»å›¾éœ€è¦ç”¨åˆ°        const filepath = &#39;./&#39; + path.join(dirname, node.source.value)        dependecies[node.source.value] = filepath      }    })    return dependecies  }}class Compiler {  constructor(options) {    // webpack é…ç½®    const { entry, output } = options    // å…¥å£    this.entry = entry    // å‡ºå£    this.output = output    // æ¨¡å—    this.modules = []  }  // æ„å»ºå¯åŠ¨  run() {    const { getAst, getDependecies } = Parser    const ast = getAst(this.entry)    const dependecies = getDependecies(ast, this.entry)  }  // é‡å†™ requireå‡½æ•°,è¾“å‡ºbundle  generate() {}}new Compiler(options).run()</code></pre><h3 id="4-AST-è½¬æ¢ä¸º-code"><a href="#4-AST-è½¬æ¢ä¸º-code" class="headerlink" title="4. AST è½¬æ¢ä¸º code"></a>4. AST è½¬æ¢ä¸º code</h3><p>å°† AST è¯­æ³•æ ‘è½¬æ¢ä¸ºæµè§ˆå™¨å¯æ‰§è¡Œä»£ç ,æˆ‘ä»¬è¿™é‡Œä½¿ç”¨@babel/core å’Œ @babel/preset-envã€‚</p><pre><code class="js">const fs = require(&#39;fs&#39;)const path = require(&#39;path&#39;)const options = require(&#39;./webpack.config&#39;)const parser = require(&#39;@babel/parser&#39;)const traverse = require(&#39;@babel/traverse&#39;).defaultconst { transformFromAst } = require(&#39;@babel/core&#39;)const Parser = {  getAst: path =&gt; {    // è¯»å–å…¥å£æ–‡ä»¶    const content = fs.readFileSync(path, &#39;utf-8&#39;)    // å°†æ–‡ä»¶å†…å®¹è½¬ä¸ºASTæŠ½è±¡è¯­æ³•æ ‘    return parser.parse(content, {      sourceType: &#39;module&#39;    })  },  getDependecies: (ast, filename) =&gt; {    const dependecies = {}    // éå†æ‰€æœ‰çš„ import æ¨¡å—,å­˜å…¥dependecies    traverse(ast, {      // ç±»å‹ä¸º ImportDeclaration çš„ AST èŠ‚ç‚¹ (å³ä¸ºimport è¯­å¥)      ImportDeclaration({ node }) {        const dirname = path.dirname(filename)        // ä¿å­˜ä¾èµ–æ¨¡å—è·¯å¾„,ä¹‹åç”Ÿæˆä¾èµ–å…³ç³»å›¾éœ€è¦ç”¨åˆ°        const filepath = &#39;./&#39; + path.join(dirname, node.source.value)        dependecies[node.source.value] = filepath      }    })    return dependecies  },  getCode: ast =&gt; {    // ASTè½¬æ¢ä¸ºcode    const { code } = transformFromAst(ast, null, {      presets: [&#39;@babel/preset-env&#39;]    })    return code  }}class Compiler {  constructor(options) {    // webpack é…ç½®    const { entry, output } = options    // å…¥å£    this.entry = entry    // å‡ºå£    this.output = output    // æ¨¡å—    this.modules = []  }  // æ„å»ºå¯åŠ¨  run() {    const { getAst, getDependecies, getCode } = Parser    const ast = getAst(this.entry)    const dependecies = getDependecies(ast, this.entry)    const code = getCode(ast)  }  // é‡å†™ requireå‡½æ•°,è¾“å‡ºbundle  generate() {}}new Compiler(options).run()</code></pre><h3 id="5-é€’å½’è§£ææ‰€æœ‰ä¾èµ–é¡¹-ç”Ÿæˆä¾èµ–å…³ç³»å›¾"><a href="#5-é€’å½’è§£ææ‰€æœ‰ä¾èµ–é¡¹-ç”Ÿæˆä¾èµ–å…³ç³»å›¾" class="headerlink" title="5. é€’å½’è§£ææ‰€æœ‰ä¾èµ–é¡¹,ç”Ÿæˆä¾èµ–å…³ç³»å›¾"></a>5. é€’å½’è§£ææ‰€æœ‰ä¾èµ–é¡¹,ç”Ÿæˆä¾èµ–å…³ç³»å›¾</h3><pre><code class="js">const fs = require(&#39;fs&#39;)const path = require(&#39;path&#39;)const options = require(&#39;./webpack.config&#39;)const parser = require(&#39;@babel/parser&#39;)const traverse = require(&#39;@babel/traverse&#39;).defaultconst { transformFromAst } = require(&#39;@babel/core&#39;)const Parser = {  getAst: path =&gt; {    // è¯»å–å…¥å£æ–‡ä»¶    const content = fs.readFileSync(path, &#39;utf-8&#39;)    // å°†æ–‡ä»¶å†…å®¹è½¬ä¸ºASTæŠ½è±¡è¯­æ³•æ ‘    return parser.parse(content, {      sourceType: &#39;module&#39;    })  },  getDependecies: (ast, filename) =&gt; {    const dependecies = {}    // éå†æ‰€æœ‰çš„ import æ¨¡å—,å­˜å…¥dependecies    traverse(ast, {      // ç±»å‹ä¸º ImportDeclaration çš„ AST èŠ‚ç‚¹ (å³ä¸ºimport è¯­å¥)      ImportDeclaration({ node }) {        const dirname = path.dirname(filename)        // ä¿å­˜ä¾èµ–æ¨¡å—è·¯å¾„,ä¹‹åç”Ÿæˆä¾èµ–å…³ç³»å›¾éœ€è¦ç”¨åˆ°        const filepath = &#39;./&#39; + path.join(dirname, node.source.value)        dependecies[node.source.value] = filepath      }    })    return dependecies  },  getCode: ast =&gt; {    // ASTè½¬æ¢ä¸ºcode    const { code } = transformFromAst(ast, null, {      presets: [&#39;@babel/preset-env&#39;]    })    return code  }}class Compiler {  constructor(options) {    // webpack é…ç½®    const { entry, output } = options    // å…¥å£    this.entry = entry    // å‡ºå£    this.output = output    // æ¨¡å—    this.modules = []  }  // æ„å»ºå¯åŠ¨  run() {    // è§£æå…¥å£æ–‡ä»¶    const info = this.build(this.entry)    this.modules.push(info)    this.modules.forEach(({ dependecies }) =&gt; {      // åˆ¤æ–­æœ‰ä¾èµ–å¯¹è±¡,é€’å½’è§£ææ‰€æœ‰ä¾èµ–é¡¹      if (dependecies) {        for (const dependency in dependecies) {          this.modules.push(this.build(dependecies[dependency]))        }      }    })    // ç”Ÿæˆä¾èµ–å…³ç³»å›¾    const dependencyGraph = this.modules.reduce(      (graph, item) =&gt; ({        ...graph,        // ä½¿ç”¨æ–‡ä»¶è·¯å¾„ä½œä¸ºæ¯ä¸ªæ¨¡å—çš„å”¯ä¸€æ ‡è¯†ç¬¦,ä¿å­˜å¯¹åº”æ¨¡å—çš„ä¾èµ–å¯¹è±¡å’Œæ–‡ä»¶å†…å®¹        [item.filename]: {          dependecies: item.dependecies,          code: item.code        }      }),      {}    )  }  build(filename) {    const { getAst, getDependecies, getCode } = Parser    const ast = getAst(filename)    const dependecies = getDependecies(ast, filename)    const code = getCode(ast)    return {      // æ–‡ä»¶è·¯å¾„,å¯ä»¥ä½œä¸ºæ¯ä¸ªæ¨¡å—çš„å”¯ä¸€æ ‡è¯†ç¬¦      filename,      // ä¾èµ–å¯¹è±¡,ä¿å­˜ç€ä¾èµ–æ¨¡å—è·¯å¾„      dependecies,      // æ–‡ä»¶å†…å®¹      code    }  }  // é‡å†™ requireå‡½æ•°,è¾“å‡ºbundle  generate() {}}new Compiler(options).run()</code></pre><h3 id="6-é‡å†™-require-å‡½æ•°-è¾“å‡º-bundle"><a href="#6-é‡å†™-require-å‡½æ•°-è¾“å‡º-bundle" class="headerlink" title="6. é‡å†™ require å‡½æ•°,è¾“å‡º bundle"></a>6. é‡å†™ require å‡½æ•°,è¾“å‡º bundle</h3><pre><code class="js">const fs = require(&#39;fs&#39;)const path = require(&#39;path&#39;)const options = require(&#39;./webpack.config&#39;)const parser = require(&#39;@babel/parser&#39;)const traverse = require(&#39;@babel/traverse&#39;).defaultconst { transformFromAst } = require(&#39;@babel/core&#39;)const Parser = {  getAst: path =&gt; {    // è¯»å–å…¥å£æ–‡ä»¶    const content = fs.readFileSync(path, &#39;utf-8&#39;)    // å°†æ–‡ä»¶å†…å®¹è½¬ä¸ºASTæŠ½è±¡è¯­æ³•æ ‘    return parser.parse(content, {      sourceType: &#39;module&#39;    })  },  getDependecies: (ast, filename) =&gt; {    const dependecies = {}    // éå†æ‰€æœ‰çš„ import æ¨¡å—,å­˜å…¥dependecies    traverse(ast, {      // ç±»å‹ä¸º ImportDeclaration çš„ AST èŠ‚ç‚¹ (å³ä¸ºimport è¯­å¥)      ImportDeclaration({ node }) {        const dirname = path.dirname(filename)        // ä¿å­˜ä¾èµ–æ¨¡å—è·¯å¾„,ä¹‹åç”Ÿæˆä¾èµ–å…³ç³»å›¾éœ€è¦ç”¨åˆ°        const filepath = &#39;./&#39; + path.join(dirname, node.source.value)        dependecies[node.source.value] = filepath      }    })    return dependecies  },  getCode: ast =&gt; {    // ASTè½¬æ¢ä¸ºcode    const { code } = transformFromAst(ast, null, {      presets: [&#39;@babel/preset-env&#39;]    })    return code  }}class Compiler {  constructor(options) {    // webpack é…ç½®    const { entry, output } = options    // å…¥å£    this.entry = entry    // å‡ºå£    this.output = output    // æ¨¡å—    this.modules = []  }  // æ„å»ºå¯åŠ¨  run() {    // è§£æå…¥å£æ–‡ä»¶    const info = this.build(this.entry)    this.modules.push(info)    this.modules.forEach(({ dependecies }) =&gt; {      // åˆ¤æ–­æœ‰ä¾èµ–å¯¹è±¡,é€’å½’è§£ææ‰€æœ‰ä¾èµ–é¡¹      if (dependecies) {        for (const dependency in dependecies) {          this.modules.push(this.build(dependecies[dependency]))        }      }    })    // ç”Ÿæˆä¾èµ–å…³ç³»å›¾    const dependencyGraph = this.modules.reduce(      (graph, item) =&gt; ({        ...graph,        // ä½¿ç”¨æ–‡ä»¶è·¯å¾„ä½œä¸ºæ¯ä¸ªæ¨¡å—çš„å”¯ä¸€æ ‡è¯†ç¬¦,ä¿å­˜å¯¹åº”æ¨¡å—çš„ä¾èµ–å¯¹è±¡å’Œæ–‡ä»¶å†…å®¹        [item.filename]: {          dependecies: item.dependecies,          code: item.code        }      }),      {}    )    this.generate(dependencyGraph)  }  build(filename) {    const { getAst, getDependecies, getCode } = Parser    const ast = getAst(filename)    const dependecies = getDependecies(ast, filename)    const code = getCode(ast)    return {      // æ–‡ä»¶è·¯å¾„,å¯ä»¥ä½œä¸ºæ¯ä¸ªæ¨¡å—çš„å”¯ä¸€æ ‡è¯†ç¬¦      filename,      // ä¾èµ–å¯¹è±¡,ä¿å­˜ç€ä¾èµ–æ¨¡å—è·¯å¾„      dependecies,      // æ–‡ä»¶å†…å®¹      code    }  }  // é‡å†™ requireå‡½æ•° (æµè§ˆå™¨ä¸èƒ½è¯†åˆ«commonjsè¯­æ³•),è¾“å‡ºbundle  generate(code) {    // è¾“å‡ºæ–‡ä»¶è·¯å¾„    const filePath = path.join(this.output.path, this.output.filename)    // æ‡µé€¼äº†å—? æ²¡äº‹,ä¸‹ä¸€èŠ‚æˆ‘ä»¬æ‹ä¸€æ‹    const bundle = `(function(graph){      function require(module){        function localRequire(relativePath){          return require(graph[module].dependecies[relativePath])        }        var exports = {};        (function(require,exports,code){          eval(code)        })(localRequire,exports,graph[module].code);        return exports;      }      require(&#39;${this.entry}&#39;)    })(${JSON.stringify(code)})`    // æŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ    fs.writeFileSync(filePath, bundle, &#39;utf-8&#39;)  }}new Compiler(options).run()</code></pre><h3 id="7-çœ‹å®Œè¿™èŠ‚-å½»åº•ææ‡‚-bundle-å®ç°"><a href="#7-çœ‹å®Œè¿™èŠ‚-å½»åº•ææ‡‚-bundle-å®ç°" class="headerlink" title="7. çœ‹å®Œè¿™èŠ‚,å½»åº•ææ‡‚ bundle å®ç°"></a>7. çœ‹å®Œè¿™èŠ‚,å½»åº•ææ‡‚ bundle å®ç°</h3><p>æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥è¿›è¡Œè®²è§£,å…ˆæ­»äº¡å‡è§† 30 ç§’</p><pre><code class="js">;(function(graph) {  function require(moduleId) {    function localRequire(relativePath) {      return require(graph[moduleId].dependecies[relativePath])    }    var exports = {}    ;(function(require, exports, code) {      eval(code)    })(localRequire, exports, graph[moduleId].code)    return exports  }  require(&#39;./src/index.js&#39;)})({  &#39;./src/index.js&#39;: {    dependecies: { &#39;./hello.js&#39;: &#39;./src/hello.js&#39; },    code: &#39;&quot;use strict&quot;;\n\nvar _hello = require(&quot;./hello.js&quot;);\n\ndocument.write((0, _hello.say)(&quot;webpack&quot;));&#39;  },  &#39;./src/hello.js&#39;: {    dependecies: {},    code:      &#39;&quot;use strict&quot;;\n\nObject.defineProperty(exports, &quot;__esModule&quot;, {\n  value: true\n});\nexports.say = say;\n\nfunction say(name) {\n  return &quot;hello &quot;.concat(name);\n}&#39;  }})</code></pre><h4 id="step-1-ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ"><a href="#step-1-ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ" class="headerlink" title="step 1 : ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ"></a>step 1 : ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ</h4><pre><code class="js">// å®šä¹‰ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°,ä¼ å…¥ç”Ÿæˆçš„ä¾èµ–å…³ç³»å›¾;(function(graph) {  // é‡å†™requireå‡½æ•°  function require(moduleId) {    console.log(moduleId) // ./src/index.js  }  // ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ  require(&#39;./src/index.js&#39;)})({  &#39;./src/index.js&#39;: {    dependecies: { &#39;./hello.js&#39;: &#39;./src/hello.js&#39; },    code: &#39;&quot;use strict&quot;;\n\nvar _hello = require(&quot;./hello.js&quot;);\n\ndocument.write((0, _hello.say)(&quot;webpack&quot;));&#39;  },  &#39;./src/hello.js&#39;: {    dependecies: {},    code:      &#39;&quot;use strict&quot;;\n\nObject.defineProperty(exports, &quot;__esModule&quot;, {\n  value: true\n});\nexports.say = say;\n\nfunction say(name) {\n  return &quot;hello &quot;.concat(name);\n}&#39;  }})</code></pre><h4 id="step-2-ä½¿ç”¨-eval-æ‰§è¡Œä»£ç "><a href="#step-2-ä½¿ç”¨-eval-æ‰§è¡Œä»£ç " class="headerlink" title="step 2 : ä½¿ç”¨ eval æ‰§è¡Œä»£ç "></a>step 2 : ä½¿ç”¨ eval æ‰§è¡Œä»£ç </h4><pre><code class="js">// å®šä¹‰ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°,ä¼ å…¥ç”Ÿæˆçš„ä¾èµ–å…³ç³»å›¾;(function(graph) {  // é‡å†™requireå‡½æ•°  function require(moduleId) {    ;(function(code) {      console.log(code) // &quot;use strict&quot;;\n\nvar _hello = require(&quot;./hello.js&quot;);\n\ndocument.write((0, _hello.say)(&quot;webpack&quot;));      eval(code) // Uncaught TypeError: Cannot read property &#39;code&#39; of undefined    })(graph[moduleId].code)  }  // ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ  require(&#39;./src/index.js&#39;)})({  &#39;./src/index.js&#39;: {    dependecies: { &#39;./hello.js&#39;: &#39;./src/hello.js&#39; },    code: &#39;&quot;use strict&quot;;\n\nvar _hello = require(&quot;./hello.js&quot;);\n\ndocument.write((0, _hello.say)(&quot;webpack&quot;));&#39;  },  &#39;./src/hello.js&#39;: {    dependecies: {},    code:      &#39;&quot;use strict&quot;;\n\nObject.defineProperty(exports, &quot;__esModule&quot;, {\n  value: true\n});\nexports.say = say;\n\nfunction say(name) {\n  return &quot;hello &quot;.concat(name);\n}&#39;  }})</code></pre><p>å¯ä»¥çœ‹åˆ°,æˆ‘ä»¬åœ¨æ‰§è¡Œâ€./src/index.jsâ€æ–‡ä»¶ä»£ç çš„æ—¶å€™æŠ¥é”™äº†,è¿™æ˜¯å› ä¸º index.js é‡Œå¼•ç”¨ä¾èµ– hello.js,è€Œæˆ‘ä»¬æ²¡æœ‰å¯¹ä¾èµ–è¿›è¡Œå¤„ç†,æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ä¾èµ–å¼•ç”¨è¿›è¡Œå¤„ç†ã€‚</p><h4 id="step-3-ä¾èµ–å¯¹è±¡å¯»å€æ˜ å°„-è·å–-exports-å¯¹è±¡"><a href="#step-3-ä¾èµ–å¯¹è±¡å¯»å€æ˜ å°„-è·å–-exports-å¯¹è±¡" class="headerlink" title="step 3 : ä¾èµ–å¯¹è±¡å¯»å€æ˜ å°„,è·å– exports å¯¹è±¡"></a>step 3 : ä¾èµ–å¯¹è±¡å¯»å€æ˜ å°„,è·å– exports å¯¹è±¡</h4><pre><code class="js">// å®šä¹‰ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°,ä¼ å…¥ç”Ÿæˆçš„ä¾èµ–å…³ç³»å›¾;(function(graph) {  // é‡å†™requireå‡½æ•°  function require(moduleId) {    // æ‰¾åˆ°å¯¹åº”moduleIdçš„ä¾èµ–å¯¹è±¡,è°ƒç”¨requireå‡½æ•°,evalæ‰§è¡Œ,æ‹¿åˆ°exportså¯¹è±¡    function localRequire(relativePath) {      return require(graph[moduleId].dependecies[relativePath]) // {__esModule: true, say: Æ’ say(name)}    }    // å®šä¹‰exportså¯¹è±¡    var exports = {}    ;(function(require, exports, code) {      // commonjsè¯­æ³•ä½¿ç”¨module.exportsæš´éœ²å®ç°,æˆ‘ä»¬ä¼ å…¥çš„exportså¯¹è±¡ä¼šæ•è·ä¾èµ–å¯¹è±¡(hello.js)æš´éœ²çš„å®ç°(exports.say = say)å¹¶å†™å…¥      eval(code)    })(localRequire, exports, graph[moduleId].code)    // æš´éœ²exportså¯¹è±¡,å³æš´éœ²ä¾èµ–å¯¹è±¡å¯¹åº”çš„å®ç°    return exports  }  // ä»å…¥å£æ–‡ä»¶å¼€å§‹æ‰§è¡Œ  require(&#39;./src/index.js&#39;)})({  &#39;./src/index.js&#39;: {    dependecies: { &#39;./hello.js&#39;: &#39;./src/hello.js&#39; },    code: &#39;&quot;use strict&quot;;\n\nvar _hello = require(&quot;./hello.js&quot;);\n\ndocument.write((0, _hello.say)(&quot;webpack&quot;));&#39;  },  &#39;./src/hello.js&#39;: {    dependecies: {},    code:      &#39;&quot;use strict&quot;;\n\nObject.defineProperty(exports, &quot;__esModule&quot;, {\n  value: true\n});\nexports.say = say;\n\nfunction say(name) {\n  return &quot;hello &quot;.concat(name);\n}&#39;  }})</code></pre><p>è¿™ä¸‹åº”è¯¥æ˜ç™½äº†å§ ~ å¯ä»¥ç›´æ¥å¤åˆ¶ä¸Šé¢ä»£ç åˆ°æ§åˆ¶å°è¾“å‡ºå“¦~</p><p>å®Œæ•´ä»£ç åœ°å€<a href="https://github.com/webfansplz/article/tree/master/easy-webpack" target="_blank" rel="noopener">æˆ³æˆ‘</a> ğŸ‘ˆ</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Webpack æ˜¯ä¸€ä¸ªåºå¤§çš„ Node.js åº”ç”¨,å¦‚æœä½ é˜…è¯»è¿‡å®ƒçš„æºç ,ä½ ä¼šå‘ç°å®ç°ä¸€ä¸ªå®Œæ•´çš„ Webpack éœ€è¦ç¼–å†™éå¸¸å¤šçš„ä»£ç ã€‚ ä½†ä½ æ— éœ€äº†è§£æ‰€æœ‰çš„ç»†èŠ‚,åªéœ€äº†è§£å…¶æ•´ä½“æ¶æ„å’Œéƒ¨åˆ†ç»†èŠ‚å³å¯ã€‚</p><p>å¯¹ Webpack çš„ä½¿ç”¨è€…æ¥è¯´,å®ƒæ˜¯ä¸€ä¸ªç®€å•å¼ºå¤§çš„å·¥å…·ï¼› å¯¹ Webpack çš„å¼€å‘è€…æ¥è¯´,å®ƒæ˜¯ä¸€ä¸ªæ‰©å±•æ€§çš„é«˜ç³»ç»Ÿã€‚</p><p>Webpack ä¹‹æ‰€ä»¥èƒ½æˆåŠŸ,åœ¨äºå®ƒæŠŠå¤æ‚çš„å®ç°éšè—äº†èµ·æ¥,ç»™ç”¨æˆ·æš´éœ²å‡ºçš„åªæ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·,è®©ç”¨æˆ·èƒ½å¿«é€Ÿè¾¾æˆç›®çš„ã€‚ åŒæ—¶æ•´ä½“æ¶æ„è®¾è®¡åˆç†,æ‰©å±•æ€§é«˜,å¼€å‘æ‰©å±•éš¾åº¦ä¸é«˜,é€šè¿‡ç¤¾åŒºè¡¥è¶³äº†å¤§é‡ç¼ºå¤±çš„åŠŸèƒ½,è®© Webpack å‡ ä¹èƒ½èƒœä»»ä»»ä½•åœºæ™¯ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.webpackjs.com" target="_blank" rel="noopener">webpack ä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://webpack.wuhaolin.cn/" target="_blank" rel="noopener">æ·±å…¥æµ…å‡º webpack</a></p><blockquote><p>ä½œè€…ï¼šnullä»”<br>é“¾æ¥ï¼š<a href="https://segmentfault.com/a/1190000021494964?utm_source=tag-newest" target="_blank" rel="noopener">https://segmentfault.com/a/1190000021494964?utm_source=tag-newest</a><br>æ¥æºï¼šSegmentFault æ€å¦</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
      <category>çŸ¥è¯†ç‚¹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>é«˜çº§</tag>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AST æŠ½è±¡è¯­æ³•æ ‘</title>
    <link href="undefined2020/07/ast/"/>
    <url>2020/07/ast/</url>
    
    <content type="html"><![CDATA[<h1 id="AST-æŠ½è±¡è¯­æ³•æ ‘"><a href="#AST-æŠ½è±¡è¯­æ³•æ ‘" class="headerlink" title="AST æŠ½è±¡è¯­æ³•æ ‘"></a>AST æŠ½è±¡è¯­æ³•æ ‘</h1><blockquote><p>æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œæ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€è€Œé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œä½†å›½å†…çš„æ–‡æ¡£å´å‡ ä¹ä¸€ç‰‡ç©ºç™½ã€‚<br>æœ¬æ–‡å°†å¸¦å¤§å®¶ä»åº•å±‚äº†è§£AST,å¹¶ä¸”é€šè¿‡å‘å¸ƒä¸€ä¸ªå°å‹å‰ç«¯å·¥å…·ï¼Œæ¥å¸¦å¤§å®¶äº†è§£ASTçš„å¼ºå¤§åŠŸèƒ½</p></blockquote><h2 id="æ‹†è§£"><a href="#æ‹†è§£" class="headerlink" title="æ‹†è§£"></a>æ‹†è§£</h2><p>æ‹†è§£ä¸€ä¸ªç®€å•çš„addå‡½æ•°</p><pre><code class="js">function add(a, b) {  return a + b}</code></pre><p>é¦–å…ˆæˆ‘ä»¬æ‹¿åˆ°äº†è¿™ä¸ªè¯­æ³•å¿«ï¼Œè¿™æ˜¯ä¸€ä¸ª<code>FunctionDeclaration</code>(å‡½æ•°å®šä¹‰)å¯¹è±¡</p><p>åˆ†è§£æˆä¸‰å—</p><ul><li>ä¸€ä¸ªidï¼Œå°±æ˜¯ä»–çš„åå­—ï¼Œå³<code>add</code></li><li>ä¸¤ä¸ªparamsï¼Œä¹Ÿå°±æ˜¯å®ƒçš„å‚æ•°ï¼Œå³[a,b]</li><li>ä¸€å—bodyï¼Œä¹Ÿå°±æ˜¯å¤§æ‹¬å·é‡Œè¾¹çš„ä¸œè¥¿</li></ul><p>addæ²¡åŠæ³•ç»§ç»­æ‹†ä¸‹å»äº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ€åŸºç¡€çš„Identifier(æ ‡å¿—)å¯¹è±¡ï¼Œç”¨æ¥ä½œä¸ºå‡½æ•°çš„å”¯ä¸€æ ‡å¿—ï¼Œå°±åƒäººçš„å§“åä¸€æ ·</p><pre><code class="js">{  name: &#39;add&#39;,  type: &#39;identifier&#39;,  ...}</code></pre><p>paramsç»§ç»­æ‹†ä¸‹å»ï¼Œå…¶å®æ˜¯ä¸¤ä¸ªIdentifierç»„æˆçš„æ•°ç»„ã€‚ä¹‹åä¹Ÿæ²¡åŠæ³•æ‹†ä¸‹å»äº†ã€‚</p><pre><code class="js">[    {        name: &#39;a&#39;        type: &#39;identifier&#39;        ...    },    {        name: &#39;b&#39;        type: &#39;identifier&#39;        ...    }]</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­æ‹†å¼€<code>body</code></p><p>æˆ‘ä»¬å‘ç°,<code>body</code>å…¶å®æ˜¯ä¸€ä¸ª<code>BlockStatement</code>ï¼ˆå—çŠ¶åŸŸï¼‰å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºæ˜¯<code>{return a + b}</code></p><p>æ‰“å¼€<code>BlockStatement</code>ï¼Œé‡Œè¾¹è—ç€ä¸€ä¸ª<code>ReturnStatement</code>(ReturnåŸŸ)å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤º<code>return a + b</code></p><p>ç»§ç»­æ‰“å¼€<code>ReturnStatement</code>,é‡Œè¾¹æ˜¯ä¸€ä¸ª<code>BinaryExpression</code>(äºŒé¡¹å¼)å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤º<code>a + b</code></p><p>ç»§ç»­æ‰“å¼€<code>BinaryExpression</code>ï¼Œå®ƒæˆäº†ä¸‰éƒ¨åˆ†, <code>left</code>, <code>operator</code>, <code>right</code></p><ul><li><code>operator</code> å³<code>+</code></li><li><code>left</code> é‡Œé¢è£…çš„ï¼Œæ˜¯Identifierå¯¹è±¡ <code>a</code></li><li><code>right</code> é‡Œé¢è£…çš„ï¼Œæ˜¯Identiferå¯¹è±¡ <code>b</code></li></ul><p>æˆ‘ä»¬æ‹†è§£å®Œäº†,å°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„æ ‘å½¢ç»“æ„<br><img src="https://image-static.segmentfault.com/214/084/2140843498-5b89e44deaa5c_articlex" alt=""></p><p>é‚£ä¹ˆï¼Œä¸Šé¢æˆ‘ä»¬æåˆ°çš„Identifierã€Blockstatementã€ReturnStatementã€BinaryExpressionï¼Œ è¿™ä¸€ä¸ªä¸ªå°éƒ¨ä»¶çš„è¯´æ˜ä¹¦å»å“ªæŸ¥ï¼Ÿ</p><p><strong>è¯·æŸ¥çœ‹</strong> <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Parser_API#Node_objects" target="_blank" rel="noopener">ASTå¯¹è±¡æ–‡æ¡£</a></p><h2 id="é€ç»™ä½ çš„ASTèºä¸åˆ€ï¼šrecast"><a href="#é€ç»™ä½ çš„ASTèºä¸åˆ€ï¼šrecast" class="headerlink" title="é€ç»™ä½ çš„ASTèºä¸åˆ€ï¼šrecast"></a>é€ç»™ä½ çš„ASTèºä¸åˆ€ï¼šrecast</h2><p>è¾“å…¥å‘½ä»¤</p><p><code>npm i recast -s</code></p><p>ä½ å³å¯è·å¾—ä¸€æŠŠæ“çºµè¯­æ³•æ ‘çš„èºä¸åˆ€</p><p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥åœ¨ä»»æ„jsæ–‡ä»¶ä¸‹æ“çºµè¿™æŠŠèºä¸åˆ€ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªparse.jsç¤ºæ„ï¼š</p><p>parse.js</p><pre><code class="js">// ç»™ä½ ä¸€æŠŠ&quot;èºä¸åˆ€&quot;â€”â€”recastconst recast = require(&quot;recast&quot;);// ä½ çš„&quot;æœºå™¨&quot;â€”â€”ä¸€æ®µä»£ç // æˆ‘ä»¬ä½¿ç”¨äº†å¾ˆå¥‡æ€ªæ ¼å¼çš„ä»£ç ï¼Œæƒ³æµ‹è¯•æ˜¯å¦èƒ½ç»´æŒä»£ç ç»“æ„const code =  `  function add(a, b) {    return a +      // æœ‰ä»€ä¹ˆå¥‡æ€ªçš„ä¸œè¥¿æ··è¿›æ¥äº†      b  }  `// ç”¨èºä¸åˆ€è§£ææœºå™¨const ast = recast.parse(code);// astå¯ä»¥å¤„ç†å¾ˆå·¨å¤§çš„ä»£ç æ–‡ä»¶// ä½†æˆ‘ä»¬ç°åœ¨åªéœ€è¦ä»£ç å—çš„ç¬¬ä¸€ä¸ªbodyï¼Œå³addå‡½æ•°const add  = ast.program.body[0]console.log(add)</code></pre><p>è¾“å…¥node parse.jsä½ å¯ä»¥æŸ¥çœ‹åˆ°addå‡½æ•°çš„ç»“æ„ï¼Œä¸ä¹‹å‰æ‰€è¿°ä¸€è‡´ï¼Œé€šè¿‡ASTå¯¹è±¡æ–‡æ¡£å¯æŸ¥åˆ°å®ƒçš„å…·ä½“å±æ€§ï¼š</p><pre><code class="js">FunctionDeclaration{    type: &#39;FunctionDeclaration&#39;,    id: ...    params: ...    body: ...}</code></pre><p>ä½ ä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨console.logé€è§†å®ƒçš„æ›´å†…å±‚ï¼Œå¦‚ï¼š</p><pre><code class="js">console.log(add.params[0])console.log(add.body.body[0].argument.left)</code></pre><h2 id="recast-types-builders-åˆ¶ä½œæ¨¡å…·"><a href="#recast-types-builders-åˆ¶ä½œæ¨¡å…·" class="headerlink" title="recast.types.builders åˆ¶ä½œæ¨¡å…·"></a>recast.types.builders åˆ¶ä½œæ¨¡å…·</h2><p>ä¸€ä¸ªæœºå™¨ï¼Œä½ åªä¼šæ‹†å¼€é‡è£…ï¼Œä¸ç®—æœ¬äº‹ã€‚</p><p>æ‹†å¼€äº†ï¼Œè¿˜èƒ½æ”¹è£…ï¼Œæ‰ç®—ä¸Šå¾—äº†å°é¢ã€‚</p><p><code>recast.types.builders</code>é‡Œé¢æä¾›äº†ä¸å°‘â€œæ¨¡å…·â€ï¼Œè®©ä½ å¯ä»¥è½»æ¾åœ°æ‹¼æ¥æˆæ–°çš„æœºå™¨ã€‚</p><p>æœ€ç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æƒ³æŠŠä¹‹å‰çš„function add(a, b){â€¦}å£°æ˜ï¼Œæ”¹æˆåŒ¿åå‡½æ•°å¼å£°æ˜const add = function(a ,b){â€¦}</p><p>å¦‚ä½•æ”¹è£…ï¼Ÿ</p><p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>VariableDeclaration</code>å˜é‡å£°æ˜å¯¹è±¡ï¼Œå£°æ˜å¤´ä¸º<code>const</code>ï¼Œ å†…å®¹ä¸ºä¸€ä¸ªå³å°†åˆ›å»ºçš„<code>VariableDeclarator</code>å¯¹è±¡ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ª<code>VariableDeclarator</code>ï¼Œæ”¾ç½®<code>add.id</code>åœ¨å·¦è¾¹ï¼Œ å³è¾¹æ˜¯å°†åˆ›å»ºçš„<code>FunctionDeclaration</code>å¯¹è±¡</p><p>ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>FunctionDeclaration</code>ï¼Œå¦‚å‰æ‰€è¿°çš„ä¸‰ä¸ªç»„ä»¶ï¼Œ<code>id params body</code>ä¸­ï¼Œå› ä¸ºæ˜¯åŒ¿åå‡½æ•°idè®¾ä¸ºç©ºï¼Œ<code>params</code>ä½¿ç”¨<code>add.params</code>ï¼Œ<code>body</code>ä½¿ç”¨<code>add.body</code>ã€‚</p><p>è¿™æ ·ï¼Œå°±åˆ›å»ºå¥½äº†<code>const add = function(){}</code>çš„ASTå¯¹è±¡ã€‚</p><p>åœ¨ä¹‹å‰çš„parse.jsä»£ç ä¹‹åï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç </p><pre><code class="js">// å¼•å…¥å˜é‡å£°æ˜ï¼Œå˜é‡ç¬¦å·ï¼Œå‡½æ•°å£°æ˜ä¸‰ç§â€œæ¨¡å…·â€const {variableDeclaration, variableDeclarator, functionExpression} = recast.types.builders// å°†å‡†å¤‡å¥½çš„ç»„ä»¶ç½®å…¥æ¨¡å…·ï¼Œå¹¶ç»„è£…å›åŸæ¥çš„astå¯¹è±¡ã€‚ast.program.body[0] = variableDeclaration(&quot;const&quot;, [  variableDeclarator(add.id, functionExpression(    null, // Anonymize the function expression.    add.params,    add.body  ))]);//å°†ASTå¯¹è±¡é‡æ–°è½¬å›å¯ä»¥é˜…è¯»çš„ä»£ç const output = recast.print(ast).code;console.log(output)</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰“å°å‡ºäº†</p><pre><code class="js">const add = function(a, b) {  return a +    // æœ‰ä»€ä¹ˆå¥‡æ€ªçš„ä¸œè¥¿æ··è¿›æ¥äº†    b};</code></pre><p>æœ€åä¸€è¡Œ</p><pre><code class="js">const output = recast.print(ast).code;</code></pre><p>å…¶å®æ˜¯recast.parseçš„é€†å‘è¿‡ç¨‹ï¼Œå…·ä½“å…¬å¼ä¸º</p><pre><code class="js">recast.print(recast.parse(source)).code === source</code></pre><p>æ‰“å°å‡ºæ¥è¿˜ä¿ç•™ç€â€œåŸè£…â€çš„å‡½æ•°å†…å®¹ï¼Œè¿æ³¨é‡Šéƒ½æ²¡æœ‰å˜ã€‚</p><p>æˆ‘ä»¬å…¶å®ä¹Ÿå¯ä»¥æ‰“å°å‡ºç¾åŒ–æ ¼å¼çš„ä»£ç æ®µï¼š</p><pre><code class="js">const output = recast.prettyPrint(ast, { tabWidth: 2 }).code</code></pre><p>è¾“å‡ºä¸º</p><pre><code class="js">const add = function(a, b) {  return a + b;};</code></pre><blockquote><p>ç°åœ¨ï¼Œä½ æ˜¯ä¸æ˜¯å·²ç»äº§ç”Ÿäº†â€œæˆ‘å¯ä»¥é€šè¿‡ASTæ ‘ç”Ÿæˆä»»ä½•jsä»£ç â€çš„å¹»è§‰ï¼Ÿ<br>æˆ‘éƒ‘é‡å‘Šè¯‰ä½ ï¼Œè¿™ä¸æ˜¯å¹»è§‰ã€‚</p></blockquote><h2 id="å®æˆ˜è¿›é˜¶ï¼šå‘½ä»¤è¡Œä¿®æ”¹jsæ–‡ä»¶"><a href="#å®æˆ˜è¿›é˜¶ï¼šå‘½ä»¤è¡Œä¿®æ”¹jsæ–‡ä»¶" class="headerlink" title="å®æˆ˜è¿›é˜¶ï¼šå‘½ä»¤è¡Œä¿®æ”¹jsæ–‡ä»¶"></a>å®æˆ˜è¿›é˜¶ï¼šå‘½ä»¤è¡Œä¿®æ”¹jsæ–‡ä»¶</h2><p>é™¤äº†<code>parse/print/builder</code>ä»¥å¤–ï¼ŒRecastçš„ä¸‰é¡¹ä¸»è¦åŠŸèƒ½ï¼š</p><ul><li>run: é€šè¿‡å‘½ä»¤è¡Œè¯»å–jsæ–‡ä»¶ï¼Œå¹¶è½¬åŒ–æˆastä»¥ä¾›å¤„ç†ã€‚</li><li>tntï¼š é€šè¿‡assert()å’Œcheck()ï¼Œå¯ä»¥éªŒè¯astå¯¹è±¡çš„ç±»å‹ã€‚</li><li>visit: éå†astæ ‘ï¼Œè·å–æœ‰æ•ˆçš„ASTå¯¹è±¡å¹¶è¿›è¡Œæ›´æ”¹ã€‚</li></ul><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç³»åˆ—å°åŠ¡æ¥å­¦ä¹ å…¨éƒ¨çš„recastå·¥å…·åº“ï¼š</p><p>åˆ›å»ºä¸€ä¸ªç¤ºä¾‹æ–‡ä»¶ï¼Œå‡è®¾æ˜¯demo.js</p><p>demo.js</p><pre><code class="js">function add(a, b) {  return a + b}function sub(a, b) {  return a - b}function commonDivision(a, b) {  while (b !== 0) {    if (a &gt; b) {      a = sub(a, b)    } else {      b = sub(b, a)    }  }  return a}</code></pre><h3 id="recast-run-â€”â€”-å‘½ä»¤è¡Œæ–‡ä»¶è¯»å–"><a href="#recast-run-â€”â€”-å‘½ä»¤è¡Œæ–‡ä»¶è¯»å–" class="headerlink" title="recast.run â€”â€” å‘½ä»¤è¡Œæ–‡ä»¶è¯»å–"></a>recast.run â€”â€” å‘½ä»¤è¡Œæ–‡ä»¶è¯»å–</h3><p>æ–°å»ºä¸€ä¸ªåä¸ºread.jsçš„æ–‡ä»¶ï¼Œå†™å…¥<br>read.js</p><pre><code class="js">const recast = require(&quot;recast&quot;);recast.run( function(ast, printSource){    printSource(ast)})</code></pre><p>å‘½ä»¤è¡Œè¾“å…¥</p><pre><code class="cmd">node read demo.js</code></pre><p>æˆ‘ä»¬æŸ¥ä»¥çœ‹åˆ°jsæ–‡ä»¶å†…å®¹æ‰“å°åœ¨äº†æ§åˆ¶å°ä¸Šã€‚</p><p>æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ<code>node read</code>å¯ä»¥è¯»å–<code>demo.js</code>æ–‡ä»¶ï¼Œå¹¶å°†<code>demo.js</code>å†…å®¹è½¬åŒ–ä¸º<code>ast</code>å¯¹è±¡ã€‚</p><p>åŒæ—¶å®ƒè¿˜æä¾›äº†ä¸€ä¸ª<code>printSource</code>å‡½æ•°ï¼Œéšæ—¶å¯ä»¥å°†astçš„å†…å®¹è½¬æ¢å›æºç ï¼Œä»¥æ–¹ä¾¿è°ƒè¯•ã€‚</p><h3 id="recast-visit-â€”â€”-ASTèŠ‚ç‚¹éå†"><a href="#recast-visit-â€”â€”-ASTèŠ‚ç‚¹éå†" class="headerlink" title="recast.visit â€”â€” ASTèŠ‚ç‚¹éå†"></a>recast.visit â€”â€” ASTèŠ‚ç‚¹éå†</h3><p>read.js</p><pre><code class="js">#!/usr/bin/env nodeconst recast  = require(&#39;recast&#39;)recast.run(function(ast, printSource) {  recast.visit(ast, {      visitExpressionStatement: function({node}) {        console.log(node)        return false      }    });});</code></pre><p><code>recast.visit</code>å°†ASTå¯¹è±¡å†…çš„èŠ‚ç‚¹è¿›è¡Œé€ä¸ªéå†ã€‚</p><p>æ³¨æ„</p><ul><li><p>ä½ æƒ³æ“ä½œå‡½æ•°å£°æ˜ï¼Œå°±ä½¿ç”¨visitFunctionDelarationéå†ï¼Œæƒ³æ“ä½œèµ‹å€¼è¡¨è¾¾å¼ï¼Œå°±ä½¿ç”¨visitExpressionStatementã€‚ åªè¦åœ¨ ASTå¯¹è±¡æ–‡æ¡£ä¸­å®šä¹‰çš„å¯¹è±¡ï¼Œåœ¨å‰é¢åŠ visitï¼Œå³å¯éå†ã€‚</p></li><li><p>é€šè¿‡nodeå¯ä»¥å–åˆ°ASTå¯¹è±¡</p></li><li><p>æ¯ä¸ªéå†å‡½æ•°åå¿…é¡»åŠ ä¸Šreturn falseï¼Œæˆ–è€…é€‰æ‹©ä»¥ä¸‹å†™æ³•ï¼Œå¦åˆ™æŠ¥é”™</p></li></ul><pre><code class="js">#!/usr/bin/env nodeconst recast  = require(&#39;recast&#39;)recast.run(function(ast, printSource) {  recast.visit(ast, {      visitExpressionStatement: function(path) {        const node = path.node        printSource(node)        this.traverse(path)      }    })});</code></pre><p>è°ƒè¯•æ—¶ï¼Œå¦‚æœä½ æƒ³è¾“å‡ºASTå¯¹è±¡ï¼Œå¯ä»¥<code>console.log(node)</code></p><p>å¦‚æœä½ æƒ³è¾“å‡ºASTå¯¹è±¡å¯¹åº”çš„æºç ï¼Œå¯ä»¥<code>printSource(node)</code></p><p>å‘½ä»¤è¡Œè¾“å…¥<code>node read demo.js</code>è¿›è¡Œæµ‹è¯•ã€‚</p><blockquote><p>#!/usr/bin/env node åœ¨æ‰€æœ‰ä½¿ç”¨recast.run()çš„æ–‡ä»¶é¡¶éƒ¨éƒ½éœ€è¦åŠ å…¥è¿™ä¸€è¡Œï¼Œå®ƒçš„æ„ä¹‰æˆ‘ä»¬æœ€åå†è®¨è®ºã€‚</p></blockquote><h3 id="TNT-â€”â€”-åˆ¤æ–­ASTå¯¹è±¡ç±»å‹"><a href="#TNT-â€”â€”-åˆ¤æ–­ASTå¯¹è±¡ç±»å‹" class="headerlink" title="TNT â€”â€” åˆ¤æ–­ASTå¯¹è±¡ç±»å‹"></a>TNT â€”â€” åˆ¤æ–­ASTå¯¹è±¡ç±»å‹</h3><p>TNTï¼Œå³<code>recast.types.namedTypes</code>ï¼Œå°±åƒå®ƒçš„åå­—ä¸€æ ·ç«çˆ†ï¼Œå®ƒç”¨æ¥åˆ¤æ–­ASTå¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šçš„ç±»å‹ã€‚</p><p><code>TNT.Node.assert()</code>ï¼Œå°±åƒåœ¨æœºå™¨é‡ŒåŸ‹å¥½çš„ç‚¸è¯ï¼Œå½“æœºå™¨ä¸èƒ½å®Œå¥½è¿è½¬æ—¶ï¼ˆç±»å‹ä¸åŒ¹é…ï¼‰ï¼Œå°±ç‚¸æ¯æœºå™¨(æŠ¥é”™é€€å‡º)</p><p><code>TNT.Node.check()</code>ï¼Œåˆ™å¯ä»¥åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œå¹¶è¾“å‡ºFalseå’ŒTrue</p><p>ä¸Šè¿°Nodeå¯ä»¥æ›¿æ¢æˆä»»æ„ASTå¯¹è±¡ï¼Œä¾‹å¦‚<code>TNT.ExpressionStatement.check(),TNT.FunctionDeclaration.assert()</code></p><p>read.js</p><pre><code class="js">#!/usr/bin/env nodeconst recast = require(&quot;recast&quot;);const TNT = recast.types.namedTypesrecast.run(function(ast, printSource) {  recast.visit(ast, {      visitExpressionStatement: function(path) {        const node = path.value        // åˆ¤æ–­æ˜¯å¦ä¸ºExpressionStatementï¼Œæ­£ç¡®åˆ™è¾“å‡ºä¸€è¡Œå­—ã€‚        if(TNT.ExpressionStatement.check(node)){          console.log(&#39;è¿™æ˜¯ä¸€ä¸ªExpressionStatement&#39;)        }        this.traverse(path);      }    });});</code></pre><p>read.js</p><pre><code class="js">#!/usr/bin/env nodeconst recast = require(&quot;recast&quot;);const TNT = recast.types.namedTypesrecast.run(function(ast, printSource) {  recast.visit(ast, {      visitExpressionStatement: function(path) {        const node = path.node        // åˆ¤æ–­æ˜¯å¦ä¸ºExpressionStatementï¼Œæ­£ç¡®ä¸è¾“å‡ºï¼Œé”™è¯¯åˆ™å…¨å±€æŠ¥é”™        TNT.ExpressionStatement.assert(node)        this.traverse(path);      }    });});</code></pre><p>å‘½ä»¤è¡Œè¾“å…¥<code>node read demo.js</code>è¿›è¡Œæµ‹è¯•ã€‚</p><h2 id="å®æˆ˜ï¼šç”¨ASTä¿®æ”¹æºç ï¼Œå¯¼å‡ºå…¨éƒ¨æ–¹æ³•"><a href="#å®æˆ˜ï¼šç”¨ASTä¿®æ”¹æºç ï¼Œå¯¼å‡ºå…¨éƒ¨æ–¹æ³•" class="headerlink" title="å®æˆ˜ï¼šç”¨ASTä¿®æ”¹æºç ï¼Œå¯¼å‡ºå…¨éƒ¨æ–¹æ³•"></a>å®æˆ˜ï¼šç”¨ASTä¿®æ”¹æºç ï¼Œå¯¼å‡ºå…¨éƒ¨æ–¹æ³•</h2><p>exportific.js</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è®©è¿™ä¸ªæ–‡ä»¶ä¸­çš„å‡½æ•°æ”¹å†™æˆèƒ½å¤Ÿå…¨éƒ¨å¯¼å‡ºçš„å½¢å¼ï¼Œä¾‹å¦‚</p><pre><code class="js">function add (a, b) {    return a + b}</code></pre><p>æƒ³æ”¹å˜ä¸º</p><pre><code class="js">exports.add = (a, b) =&gt; {  return a + b}</code></pre><p>é™¤äº†ä½¿ç”¨fs.readè¯»å–æ–‡ä»¶ã€æ­£åˆ™åŒ¹é…æ›¿æ¢æ–‡æœ¬ã€fs.writeå†™å…¥æ–‡ä»¶è¿™ç§ç¬¨æ‹™çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ASTä¼˜é›…åœ°è§£å†³é—®é¢˜ã€‚</p><p>æŸ¥è¯¢<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Parser_API#Node_objects" target="_blank" rel="noopener">ASTå¯¹è±¡æ–‡æ¡£</a></p><h3 id="é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç”¨builderså‡­ç©ºå®ç°ä¸€ä¸ªé”®å¤´å‡½æ•°"><a href="#é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç”¨builderså‡­ç©ºå®ç°ä¸€ä¸ªé”®å¤´å‡½æ•°" class="headerlink" title="é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç”¨builderså‡­ç©ºå®ç°ä¸€ä¸ªé”®å¤´å‡½æ•°"></a>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç”¨builderså‡­ç©ºå®ç°ä¸€ä¸ªé”®å¤´å‡½æ•°</h3><p>exportific.js</p><pre><code class="js">#!/usr/bin/env nodeconst recast = require(&quot;recast&quot;);const {  identifier:id,  expressionStatement,  memberExpression,  assignmentExpression,  arrowFunctionExpression,  blockStatement} = recast.types.buildersrecast.run(function(ast, printSource) {  // ä¸€ä¸ªå—çº§åŸŸ {}  console.log(&#39;\n\nstep1:&#39;)  printSource(blockStatement([]))  // ä¸€ä¸ªé”®å¤´å‡½æ•° ()=&gt;{}  console.log(&#39;\n\nstep2:&#39;)  printSource(arrowFunctionExpression([],blockStatement([])))  // addèµ‹å€¼ä¸ºé”®å¤´å‡½æ•°  add = ()=&gt;{}  console.log(&#39;\n\nstep3:&#39;)  printSource(assignmentExpression(&#39;=&#39;,id(&#39;add&#39;),arrowFunctionExpression([],blockStatement([]))))  // exports.addèµ‹å€¼ä¸ºé”®å¤´å‡½æ•°  exports.add = ()=&gt;{}  console.log(&#39;\n\nstep4:&#39;)  printSource(expressionStatement(assignmentExpression(&#39;=&#39;,memberExpression(id(&#39;exports&#39;),id(&#39;add&#39;)),    arrowFunctionExpression([],blockStatement([])))))});</code></pre><p>ä¸Šé¢å†™äº†æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¨æ–­å‡º<code>exports.add = ()=&gt;{}</code>çš„è¿‡ç¨‹ï¼Œä»è€Œå¾—åˆ°å…·ä½“çš„ASTç»“æ„ä½“ã€‚</p><p>ä½¿ç”¨<code>node exportific demo.js</code>è¿è¡Œå¯æŸ¥çœ‹ç»“æœã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåªéœ€è¦åœ¨è·å¾—çš„æœ€ç»ˆçš„è¡¨è¾¾å¼ä¸­ï¼ŒæŠŠid(â€˜addâ€™)æ›¿æ¢æˆéå†å¾—åˆ°çš„å‡½æ•°åï¼ŒæŠŠå‚æ•°æ›¿æ¢æˆéå†å¾—åˆ°çš„å‡½æ•°å‚æ•°ï¼ŒæŠŠblockStatement([])æ›¿æ¢ä¸ºéå†å¾—åˆ°çš„å‡½æ•°å—çº§ä½œç”¨åŸŸï¼Œå°±æˆåŠŸåœ°æ”¹å†™äº†æ‰€æœ‰å‡½æ•°ï¼</p><p>å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œåœ¨commonDivisionå‡½æ•°å†…ï¼Œå¼•ç”¨äº†subå‡½æ•°ï¼Œåº”æ”¹å†™æˆexports.sub</p><p>exportific.js</p><pre><code class="js">#!/usr/bin/env nodeconst recast = require(&quot;recast&quot;);const {  identifier: id,  expressionStatement,  memberExpression,  assignmentExpression,  arrowFunctionExpression} = recast.types.buildersrecast.run(function (ast, printSource) {  // ç”¨æ¥ä¿å­˜éå†åˆ°çš„å…¨éƒ¨å‡½æ•°å  let funcIds = []  recast.types.visit(ast, {    // éå†æ‰€æœ‰çš„å‡½æ•°å®šä¹‰    visitFunctionDeclaration(path) {      //è·å–éå†åˆ°çš„å‡½æ•°åã€å‚æ•°ã€å—çº§åŸŸ      const node = path.node      const funcName = node.id      const params = node.params      const body = node.body      // ä¿å­˜å‡½æ•°å      funcIds.push(funcName.name)      // è¿™æ˜¯ä¸Šä¸€æ­¥æ¨å¯¼å‡ºæ¥çš„astç»“æ„ä½“      const rep = expressionStatement(assignmentExpression(&#39;=&#39;, memberExpression(id(&#39;exports&#39;), funcName),        arrowFunctionExpression(params, body)))      // å°†åŸæ¥å‡½æ•°çš„astç»“æ„ä½“ï¼Œæ›¿æ¢æˆæ¨å¯¼astç»“æ„ä½“      path.replace(rep)      // åœæ­¢éå†      return false    }  })  recast.types.visit(ast, {    // éå†æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨    visitCallExpression(path){      const node = path.node;      // å¦‚æœå‡½æ•°è°ƒç”¨å‡ºç°åœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œåˆ™ä¿®æ”¹astç»“æ„      if (funcIds.includes(node.callee.name)) {        node.callee = memberExpression(id(&#39;exports&#39;), node.callee)      }      // åœæ­¢éå†      return false    }  })  // æ‰“å°ä¿®æ”¹åçš„astæºç   printSource(ast)})</code></pre><h3 id="ä¸€æ­¥åˆ°ä½ï¼Œå‘ä¸€ä¸ªæœ€ç®€å•çš„exportificå‰ç«¯å·¥å…·"><a href="#ä¸€æ­¥åˆ°ä½ï¼Œå‘ä¸€ä¸ªæœ€ç®€å•çš„exportificå‰ç«¯å·¥å…·" class="headerlink" title="ä¸€æ­¥åˆ°ä½ï¼Œå‘ä¸€ä¸ªæœ€ç®€å•çš„exportificå‰ç«¯å·¥å…·"></a>ä¸€æ­¥åˆ°ä½ï¼Œå‘ä¸€ä¸ªæœ€ç®€å•çš„exportificå‰ç«¯å·¥å…·</h3><p>ä¸Šé¢è®²äº†é‚£ä¹ˆå¤šï¼Œä»ç„¶åªä½“ç°åœ¨ç†è®ºé˜¶æ®µã€‚</p><p>ä½†é€šè¿‡ç®€å•çš„æ”¹å†™ï¼Œå°±èƒ½é€šè¿‡recaståˆ¶ä½œæˆä¸€ä¸ªåä¸ºexportificçš„æºç ç¼–è¾‘å·¥å…·ã€‚</p><p>ä»¥ä¸‹ä»£ç æ·»åŠ ä½œäº†ä¸¤ä¸ªå°æ”¹åŠ¨</p><ul><li>æ·»åŠ è¯´æ˜ä¹¦â€“helpï¼Œä»¥åŠæ·»åŠ äº†â€“rewriteæ¨¡å¼ï¼Œå¯ä»¥ç›´æ¥è¦†ç›–æ–‡ä»¶æˆ–é»˜è®¤ä¸ºå¯¼å‡º*.export.jsæ–‡ä»¶ã€‚</li><li>å°†ä¹‹å‰ä»£ç æœ€åçš„ printSource(ast)æ›¿æ¢æˆ writeASTFile(ast,filename,rewriteMode)</li></ul><p>exportific.js</p><pre><code class="js">#!/usr/bin/env nodeconst recast = require(&quot;recast&quot;);const {  identifier: id,  expressionStatement,  memberExpression,  assignmentExpression,  arrowFunctionExpression} = recast.types.buildersconst fs = require(&#39;fs&#39;)const path = require(&#39;path&#39;)// æˆªå–å‚æ•°const options = process.argv.slice(2)//å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œæˆ–æä¾›äº†-h æˆ–--helpé€‰é¡¹ï¼Œåˆ™æ‰“å°å¸®åŠ©if(options.length===0 || options.includes(&#39;-h&#39;) || options.includes(&#39;--help&#39;)){  console.log(`    é‡‡ç”¨commonjsè§„åˆ™ï¼Œå°†.jsæ–‡ä»¶å†…æ‰€æœ‰å‡½æ•°ä¿®æ”¹ä¸ºå¯¼å‡ºå½¢å¼ã€‚    é€‰é¡¹ï¼š -r  æˆ– --rewrite å¯ç›´æ¥è¦†ç›–åŸæœ‰æ–‡ä»¶    `)  process.exit(0)}// åªè¦æœ‰-r æˆ–--rewriteå‚æ•°ï¼Œåˆ™rewriteModeä¸ºtruelet rewriteMode = options.includes(&#39;-r&#39;) || options.includes(&#39;--rewrite&#39;)// è·å–æ–‡ä»¶åconst clearFileArg = options.filter((item)=&gt;{  return ![&#39;-r&#39;,&#39;--rewrite&#39;,&#39;-h&#39;,&#39;--help&#39;].includes(item)})// åªå¤„ç†ä¸€ä¸ªæ–‡ä»¶let filename = clearFileArg[0]const writeASTFile = function(ast, filename, rewriteMode){  const newCode = recast.print(ast).code  if(!rewriteMode){    // éè¦†ç›–æ¨¡å¼ä¸‹ï¼Œå°†æ–°æ–‡ä»¶å†™å…¥*.export.jsä¸‹    filename = filename.split(&#39;.&#39;).slice(0,-1).concat([&#39;export&#39;,&#39;js&#39;]).join(&#39;.&#39;)  }  // å°†æ–°ä»£ç å†™å…¥æ–‡ä»¶  fs.writeFileSync(path.join(process.cwd(),filename),newCode)}recast.run(function (ast, printSource) {  let funcIds = []  recast.types.visit(ast, {    visitFunctionDeclaration(path) {      //è·å–éå†åˆ°çš„å‡½æ•°åã€å‚æ•°ã€å—çº§åŸŸ      const node = path.node      const funcName = node.id      const params = node.params      const body = node.body      funcIds.push(funcName.name)      const rep = expressionStatement(assignmentExpression(&#39;=&#39;, memberExpression(id(&#39;exports&#39;), funcName),        arrowFunctionExpression(params, body)))      path.replace(rep)      return false    }  })  recast.types.visit(ast, {    visitCallExpression(path){      const node = path.node;      if (funcIds.includes(node.callee.name)) {        node.callee = memberExpression(id(&#39;exports&#39;), node.callee)      }      return false    }  })  writeASTFile(ast,filename,rewriteMode)})</code></pre><p>ç°åœ¨å°è¯•ä¸€ä¸‹</p><pre><code>node exportific demo.js</code></pre><p>å·²ç»å¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹æ‰¾åˆ°æºç å˜æ›´åçš„demo.export.jsæ–‡ä»¶äº†ã€‚</p><h3 id="npmå‘åŒ…"><a href="#npmå‘åŒ…" class="headerlink" title="npmå‘åŒ…"></a>npmå‘åŒ…</h3><p>ç¼–è¾‘ä¸€ä¸‹package.jsonæ–‡ä»¶</p><pre><code class="json">{  &quot;name&quot;: &quot;exportific&quot;,  &quot;version&quot;: &quot;0.0.1&quot;,  &quot;description&quot;: &quot;æ”¹å†™æºç ä¸­çš„å‡½æ•°ä¸ºå¯exports.XXXå½¢å¼&quot;,  &quot;main&quot;: &quot;exportific.js&quot;,  &quot;bin&quot;: {    &quot;exportific&quot;: &quot;./exportific.js&quot;  },  &quot;keywords&quot;: [],  &quot;author&quot;: &quot;wanthering&quot;,  &quot;license&quot;: &quot;ISC&quot;,  &quot;dependencies&quot;: {    &quot;recast&quot;: &quot;^0.15.3&quot;  }}</code></pre><p>æ³¨æ„biné€‰é¡¹ï¼Œå®ƒçš„æ„æ€æ˜¯å°†å…¨å±€å‘½ä»¤<code>exportific</code>æŒ‡å‘å½“å‰ç›®å½•ä¸‹çš„<code>exportific.js</code></p><p>è¿™æ—¶ï¼Œè¾“å…¥<code>npm link</code> å°±åœ¨æœ¬åœ°ç”Ÿæˆäº†ä¸€ä¸ª<code>exportific</code>å‘½ä»¤ã€‚</p><p>ä¹‹åï¼Œåªè¦å“ªä¸ªjsæ–‡ä»¶æƒ³å¯¼å‡ºæ¥ä½¿ç”¨ï¼Œå°±<code>exportific XXX.js</code>ä¸€ä¸‹ã€‚</p><p>è¿™æ˜¯åœ¨æœ¬åœ°çš„ç©æ³•ï¼Œæƒ³å’Œå¤§å®¶ä¸€èµ·åˆ†äº«è¿™ä¸ªå‰ç«¯å°å·¥å…·ï¼Œåªéœ€è¦å‘å¸ƒnpmåŒ…å°±è¡Œäº†ã€‚</p><p>åŒæ—¶ï¼Œä¸€å®šè¦æ³¨æ„exportific.jsæ–‡ä»¶å¤´æœ‰</p><blockquote><p>#!/usr/bin/env node</p></blockquote><p>å¦åˆ™åœ¨ä½¿ç”¨æ—¶å°†æŠ¥é”™ã€‚</p><h3 id="æ¥ä¸‹æ¥ï¼Œæ­£å¼å‘å¸ƒnpmåŒ…ï¼"><a href="#æ¥ä¸‹æ¥ï¼Œæ­£å¼å‘å¸ƒnpmåŒ…ï¼" class="headerlink" title="æ¥ä¸‹æ¥ï¼Œæ­£å¼å‘å¸ƒnpmåŒ…ï¼"></a>æ¥ä¸‹æ¥ï¼Œæ­£å¼å‘å¸ƒnpmåŒ…ï¼</h3><p>å¦‚æœä½ å·²ç»æœ‰äº†npm å¸å·ï¼Œè¯·ä½¿ç”¨<code>npm login</code>ç™»å½•</p><p>å¦‚æœä½ è¿˜æ²¡æœ‰npmå¸å· <a href="https://www.npmjs.com/signup" target="_blank" rel="noopener">https://www.npmjs.com/signup</a> éå¸¸ç®€å•å°±å¯ä»¥æ³¨å†Œnpm</p><p>ç„¶åï¼Œè¾“å…¥<br><code>npm publish</code></p><p>æ²¡æœ‰ä»»ä½•ç¹çæ­¥éª¤ï¼Œä¸æ¯«å®¡æ ¸éƒ½æ²¡æœ‰ï¼Œä½ å°±å‘å¸ƒäº†ä¸€ä¸ªå®ç”¨çš„å‰ç«¯å°å·¥å…·exportific ã€‚ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡</p><p><code>npm i exportific -g</code></p><p>å…¨å±€å®‰è£…è¿™ä¸€ä¸ªæ’ä»¶ã€‚</p><blockquote><p>æç¤ºï¼š==åœ¨è¯•éªŒæ•™ç¨‹æ—¶ï¼Œè¯·ä¸è¦å’Œæˆ‘çš„åŒ…é‡åï¼Œä¿®æ”¹ä¸€ä¸‹å‘åŒ…åç§°ã€‚==</p></blockquote><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æˆ‘ä»¬å¯¹javascriptå†ç†Ÿæ‚‰ä¸è¿‡ï¼Œä½†é€è¿‡ASTçš„è§†è§’ï¼Œæœ€æ™®é€šçš„jsè¯­å¥ï¼Œå´ç„•å‘å‡ºç²¾å¿ƒåŠ¨é­„çš„ç¾æ„Ÿã€‚ä½ å¯ä»¥é€šè¿‡å®ƒæ‰¹é‡æ„å»ºä»»ä½•javascriptä»£ç ï¼</p><p>ç«¥å¹´æ—¶ï¼Œè¿™ä¸ªä¸–ç•Œå……æ»¡äº†æ–°å¥‡çš„ç©å…·ï¼Œå†æ™®é€šçš„ä¸œè¥¿åœ¨ä½ çœ¼ä¸­éƒ½å¦‚åŒè‡³å®ã€‚å¦‚ä»Šï¼Œè®¡ç®—æœºè¯­è¨€å°±æ˜¯ä½ æ‰‹ä¸­çš„å¤§ç©å…·ï¼Œä¸€æ®µæ®µASTå¯¹è±¡çš„æ‹†åˆ†ç»„è£…ï¼Œæ„å»ºå‡ºæˆ‘ä»¬æ‰€ç”Ÿæ´»çš„ç½‘ç»œä¸–ç•Œã€‚</p><p>æ‰€ä»¥ä¸å¾—ä¸è¯´è½¯ä»¶å·¥ç¨‹å¸ˆæ˜¯ä¸€ä¸ªå¹¸ç¦çš„å·¥ä½œï¼Œä½ å¿ƒä¸­ä½çš„ä»ç„¶æ˜¯é‚£ä¸ªåˆåçš„å°‘å¹´ï¼Œæ°¸è¿œæœ‰æ— æ•°æ–°å¥‡ç­‰ä½ å‘ç°ï¼Œæ°¸è¿œæœ‰æ— æ•°æ¢¦æƒ³ç­‰ä½ æ„å»ºã€‚</p><blockquote><p>ä½œè€…ï¼šåˆ˜ç¾½å†²<br>é“¾æ¥ï¼š<a href="https://segmentfault.com/a/1190000016231512" target="_blank" rel="noopener">https://segmentfault.com/a/1190000016231512</a><br>æ¥æºï¼šSegmentFault æ€å¦</p></blockquote><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>å…³äºASTçš„è§£æå¯ä»¥çœ‹çœ‹è¿™ä¸ª<a href="https://github.com/jamiebuilds/the-super-tiny-compiler" target="_blank" rel="noopener">GitHub</a></p><p>ä¸€ä¸ªå¯ä»¥ç›´è§‚å¯¼å‡ºASTçš„åœ¨çº¿å·¥å…·<a href="https://astexplorer.net/" target="_blank" rel="noopener">é“¾æ¥</a></p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
      <category>çŸ¥è¯†ç‚¹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>é«˜çº§</tag>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€é¢è¯•é¢˜--ç°è“å®‡å¢¨</title>
    <link href="undefined2020/07/interview1/"/>
    <url>2020/07/interview1/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><p>å†™åœ¨å‰é¢ï¼šè¿™æ˜¯ä¸ªåŸºç¡€çš„é¢è¯•é¢˜ï¼Œè€Œä¸”ä»–çš„å™è¿°ä¹Ÿå¹¶ä¸æ˜¯å¾ˆè¯¦ç»†ï¼Œå»ºè®®ä¸€è¾¹çœ‹ä¸€è¾¹å®éªŒä¸€è¾¹ç™¾åº¦ï¼Œæˆ–è®¸åœ¨çœ‹è¿™ä¸ªæ–‡ç« ä¹‹å‰ä½ åº”è¯¥çœ‹ä¸€ä¸‹<a href="/2020/04/js1">ã€Šä½ ä¸çŸ¥é“çš„Javascriptã€‹</a></p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šundefinedã€nullã€booleanã€numberã€stringã€symbol</p><p>å¼•ç”¨æ•°æ®ç±»å‹ï¼šobjectã€arrayã€functionï¼ˆç»Ÿç§°ä¸ºobjectï¼‰</p><h3 id="æ•°æ®ç±»å‹æ£€æµ‹"><a href="#æ•°æ®ç±»å‹æ£€æµ‹" class="headerlink" title="æ•°æ®ç±»å‹æ£€æµ‹"></a>æ•°æ®ç±»å‹æ£€æµ‹</h3><p><code>typeof</code>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œé™¤äº†<code>null</code>éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹ï¼Œ<code>typeof</code>å¯¹äºå¯¹è±¡æ¥è¯´ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º<code>object</code></p><blockquote><p>æ³¨æ„ï¼š<code>console.log(typeof NaN)   //number</code></p></blockquote><p>instanceofé€šè¿‡åŸå‹é“¾æ¥åˆ¤æ–­æ•°æ®ç±»å‹çš„</p><pre><code class="js">p1 = new Person()p1 instanceof Person // true</code></pre><p><code>Object.prototype.toString.call()</code>å¯ä»¥æ£€æµ‹æ‰€æœ‰çš„æ•°æ®ç±»å‹ï¼Œç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œç¾çš„æ–¹æ³•äº†</p><pre><code class="js">var obj={}var arr=[]var num = 1console.log(Object.prototype.toString.call(obj))    //[object Object]console.log(Object.prototype.toString.call(arr))    //[object Array]console.log(Object.prototype.toString.call(num))    //[object Number]</code></pre><h3 id="æ·±æµ…æ‹·è´"><a href="#æ·±æµ…æ‹·è´" class="headerlink" title="æ·±æµ…æ‹·è´"></a>æ·±æµ…æ‹·è´</h3><h4 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h4><pre><code class="js">Object.assign()    //es6çš„æ–¹æ³•</code></pre><p>Object.assignä¼šåˆå¹¶å¯¹è±¡ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ã€‚å¦‚æœå¯¹è±¡çš„å±æ€§æ˜¯æ™®é€šç±»å‹æ”¹å˜ä¹‹åæ–°å¯¹è±¡ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹æ”¹å˜åæ–°å¯¹è±¡ä¹Ÿä¼šæ”¹å˜ï¼Œæ‰€ä»¥Object.assignå®é™…ä¸Šè¿˜æ˜¯æµ…æ‹·è´ã€‚</p><h4 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h4><p><code>JSON.parse(JSON.stringify(obj))</code></p><p>åˆ©ç”¨JSON.stringify(obj)å°†å¯¹è±¡å…ˆè½¬ä¸ºjsonå­—ç¬¦ä¸²ï¼Œå†JSON.parse(ï¼‰è½¬å›ä¸ºjsonå¯¹è±¡å¯ä»¥å®ç°æ·±æ‹·è´ï¼Œè¿™ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§æ–¹æ³•</p><h4 id="ç”¨jså®ç°ä¸€ä¸ªæ·±æ‹·è´"><a href="#ç”¨jså®ç°ä¸€ä¸ªæ·±æ‹·è´" class="headerlink" title="ç”¨jså®ç°ä¸€ä¸ªæ·±æ‹·è´"></a>ç”¨jså®ç°ä¸€ä¸ªæ·±æ‹·è´</h4><p>å…¶å®æ·±æ‹·è´å¯ä»¥æ‹†åˆ†æˆ 2 æ­¥ï¼Œæµ…æ‹·è´ + é€’å½’ï¼Œæµ…æ‹·è´æ—¶åˆ¤æ–­å±æ€§å€¼æ˜¯å¦æ˜¯å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡å°±è¿›è¡Œé€’å½’æ“ä½œï¼Œä¸¤ä¸ªä¸€ç»“åˆå°±å®ç°äº†æ·±æ‹·è´</p><pre><code class="js">function cloneDeep(source) {  if (!isObject(source)) return source; // éå¯¹è±¡è¿”å›è‡ªèº«  var target = Array.isArray(source) ? [] : {};  for (var key in source) {    if (source.hasOwnProperty(key)) {      if (isObject(source[key])) {        target[key] = cloneDeep(source[key]); // æ³¨æ„è¿™é‡Œ      } else {        target[key] = source[key];      }    }  }  return target;}function isObject(obj) {  return typeof obj === &#39;object&#39; &amp;&amp; obj != null;}</code></pre><h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><h3 id="å˜é‡å£°æ˜æå‡"><a href="#å˜é‡å£°æ˜æå‡" class="headerlink" title="å˜é‡å£°æ˜æå‡"></a>å˜é‡å£°æ˜æå‡</h3><p>åœ¨JSä¸­ï¼Œå‡½æ•°å£°æ˜<code>function aa(){}</code>å’Œå˜é‡å£°æ˜<code>var</code>ç»å¸¸è¢«éšå¼æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨</p><blockquote><p>let ä¸ä¼šè¢«æå‡ï¼Œå…³äºletçš„é—®é¢˜<a href="https://blog.csdn.net/jolab/article/details/82466362" target="_blank" rel="noopener">é“¾æ¥</a></p></blockquote><p>å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜äºå˜é‡ï¼Œå¦‚æœå˜é‡åè·Ÿå‡½æ•°åç›¸åŒä¸”æœªèµ‹å€¼ï¼Œåˆ™å‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜</p><p>å£°æ˜è¯­å¥ä¸­çš„èµ‹å€¼éƒ¨åˆ†å¹¶ä¸ä¼šè¢«æå‡ï¼Œåªæœ‰å˜é‡çš„åç§°è¢«æå‡</p><h3 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h3><p>å› ä¸ºå‡½æ•°çš„åµŒå¥—å½¢æˆä½œç”¨åŸŸçš„å±‚çº§å…³ç³»ã€‚å½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä»å½“å‰ä½œç”¨åŸŸå¼€å§‹æœï¼Œæ²¡æœ‰æ‰¾åˆ°çš„å˜é‡ï¼Œä¼šå‘ä¸Šå±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³å…¨å±€å‡½æ•°ï¼Œè¿™å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œä½œç”¨åŸŸä¸º <code>function(){}</code>å†…çš„åŒºåŸŸï¼Œç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸ</p><p>å…¨å±€å‡½æ•°æ— æ³•æŸ¥çœ‹å±€éƒ¨å‡½æ•°çš„å†…éƒ¨ç»†èŠ‚ï¼Œä½†å±€éƒ¨å‡½æ•°å¯ä»¥æŸ¥çœ‹å…¶ä¸Šå±‚çš„å‡½æ•°ç»†èŠ‚ï¼Œç›´è‡³å…¨å±€ç»†èŠ‚</p><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><p>é—­åŒ…çš„åŸç†å°±æ˜¯ä½œç”¨åŸŸé“¾ï¼Œæ¯”å‡½æ•°Få†…éƒ¨æœ‰ä¸€ä¸ªå‡½æ•°Gï¼Œå‡½æ•°Gå¯ä»¥è®¿é—®åˆ°å‡½æ•°Fä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆå‡½æ•°Gå°±æ˜¯é—­åŒ…</p><pre><code class="js">function F() {  let a = 1  window.G = function () {    console.log(a)  }}F()G() // 1</code></pre><h2 id="åŸå‹å’Œç»§æ‰¿"><a href="#åŸå‹å’Œç»§æ‰¿" class="headerlink" title="åŸå‹å’Œç»§æ‰¿"></a>åŸå‹å’Œç»§æ‰¿</h2><h3 id="jsåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼"><a href="#jsåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼" class="headerlink" title="jsåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼"></a>jsåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼</h3><p>å¯¹è±¡å­—é¢é‡<code>var obj={};</code></p><p>newä¸€ä¸ªæ„é€ å‡½æ•°</p><pre><code class="js">function Pel(){}  p.name=&quot;hu&quot;;  p.age=&quot;25&quot;;  p.address=function(){}}var p=new Pel();</code></pre><p>newä¸€ä¸ªå†…ç½®å¯¹è±¡</p><pre><code class="js">var obj=new Object();</code></pre><p><code>Object.create()</code>åˆ›å»ºå¯¹è±¡</p><pre><code class="js">var test = Object.create({x:1});</code></pre><blockquote><p>å…³äºä»¥ä¸Šå‡ ç§æ–¹å¼åˆ›å»ºçš„å¯¹è±¡çš„åŒºåˆ«ï¼Œè¯¦è§<a href="https://blog.csdn.net/sinat_27514587/article/details/102964631" target="_blank" rel="noopener">é“¾æ¥</a></p></blockquote><h3 id="JS-å¦‚ä½•å®ç°ä¸€ä¸ªç±»"><a href="#JS-å¦‚ä½•å®ç°ä¸€ä¸ªç±»" class="headerlink" title="JS å¦‚ä½•å®ç°ä¸€ä¸ªç±»"></a>JS å¦‚ä½•å®ç°ä¸€ä¸ªç±»</h3><p>æ„é€ å‡½æ•°æ³•</p><p>ç¼ºç‚¹ï¼šç”¨åˆ°äº† this å’Œ prototypeï¼Œç¼–å†™å¤æ‚ï¼Œå¯è¯»æ€§å·®</p><pre><code class="js">function P(name, age){  this.name = name;  this.age= age;}P.prototype.sal= function(){}var pel= new P(&quot;jj&quot;, 1);pel.sell()</code></pre><p>ES6 è¯­æ³•ç³– class</p><pre><code class="js">class Point {  constructor(x, y) {    this.x = x;    this.y = y;  }  toString() {    return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;;  }}var point = new Point(2, 3);</code></pre><h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>ä¸€å¥è¯è§£æä»€ä¹ˆæ˜¯åŸå‹é“¾</p><blockquote><p>éå†ä¸€ä¸ªå®åˆ—çš„å±æ€§æ—¶ï¼Œå…ˆéå†å®åˆ—å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œå†éå†å®ƒçš„åŸå‹å¯¹è±¡ï¼Œä¸€ç›´éå†åˆ°Object</p></blockquote><p>ä»»ä½•ä¸€ä¸ªç±»ï¼ˆå‡½æ•°ï¼‰éƒ½æœ‰åŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡è‡³å°‘æœ‰ä¸¤ä¸ªå±æ€§(constructor,proto)ã€‚<code>constructor</code>æŒ‡å‘å‡½æ•°æœ¬èº«ï¼Œ<code>proto</code>æŒ‡å‘çˆ¶ç±»åŸå‹å¯¹è±¡</p><p>å‡½æ•°ä¸Šæœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ï¼Œé€šè¿‡å®ƒå¯ä»¥è®¿é—®åŸå‹å¯¹è±¡</p><p>å‡½æ•°çš„å®åˆ—å¯ä»¥ç›´æ¥è®¿é—®åŸå‹å¯¹è±¡(å› ä¸ºå®åˆ—ä¸Šæœ‰protoæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡)</p><blockquote><p>å½»åº•å¼„æ‡‚JSåŸå‹ä¸ç»§æ‰¿ï¼Œè¯¦è§<a href="https://mp.weixin.qq.com/s?__biz=MzI5MjU0Mjk5MA==&mid=2247483768&idx=1&sn=4579b7bd22420d18009505a5a7454a9d&chksm=ec7e8e19db09070f8d529cb6a3f9bb425c20ac3bd4d936f4eb9e918facbe3d7e6eecdd719c4c&token=816776520&lang=zh_CN#rd" target="_blank" rel="noopener">é“¾æ¥</a></p></blockquote><h2 id="newå’Œthis"><a href="#newå’Œthis" class="headerlink" title="newå’Œthis"></a>newå’Œthis</h2><h3 id="ä½¿ç”¨newçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#ä½¿ç”¨newçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆ" class="headerlink" title="ä½¿ç”¨newçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆ"></a>ä½¿ç”¨newçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆ</h3><p>é¦–å…ˆæ˜¯åˆ›å»ºå®ä¾‹å¯¹è±¡{}</p><p>this å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ç»§æ‰¿äº†æ„é€ å‡½æ•°çš„åŸå‹</p><p>å…¶æ¬¡å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­</p><p>å¹¶ä¸”æ–°åˆ›å»ºçš„å¯¹è±¡ç”± this æ‰€å¼•ç”¨ï¼Œæœ€åéšå¼çš„è¿”å› this</p><h4 id="newçš„æ¨¡æ‹Ÿå®ç°"><a href="#newçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="newçš„æ¨¡æ‹Ÿå®ç°"></a>newçš„æ¨¡æ‹Ÿå®ç°</h4><pre><code class="js">function objectFactory() {  var obj = new Object(),//ä»Object.prototypeä¸Šå…‹éš†ä¸€ä¸ªå¯¹è±¡  Constructor = [].shift.call(arguments);//å–å¾—å¤–éƒ¨ä¼ å…¥çš„æ„é€ å™¨  var F=function(){};  F.prototype= Constructor.prototype;  obj=new F();//æŒ‡å‘æ­£ç¡®çš„åŸå‹  var ret = Constructor.apply(obj, arguments);//å€Ÿç”¨å¤–éƒ¨ä¼ å…¥çš„æ„é€ å™¨ç»™objè®¾ç½®å±æ€§  return typeof ret === &#39;object&#39; ? ret : obj;//ç¡®ä¿æ„é€ å™¨æ€»æ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡};</code></pre><blockquote><p>è¿™é‡Œè¯´æ˜å¯¹è±¡çš„æ„é€ å‡½æ•°å¦‚æœæœ‰è¿”å›å€¼è€Œä¸”æ˜¯åŸºæœ¬ç±»å‹æ˜¯ä¼šè¢«å¿½ç•¥æ‰çš„ï¼Œå¼•ç”¨ç±»å‹çš„è¯åˆ™ä½œä¸ºå®ä¾‹è¢«è¿”å›ï¼Œè¯¦è§<a href="https://blog.csdn.net/liwenfei123/article/details/80580883" target="_blank" rel="noopener">é“¾æ¥</a></p></blockquote><h3 id="thiså¯¹è±¡çš„ç†è§£"><a href="#thiså¯¹è±¡çš„ç†è§£" class="headerlink" title="thiså¯¹è±¡çš„ç†è§£"></a>thiså¯¹è±¡çš„ç†è§£</h3><p><code>this</code>æ€»æ˜¯æŒ‡å‘å‡½æ•°çš„ç›´æ¥è°ƒç”¨è€…</p><p>å¦‚æœæœ‰ <code>new</code> å…³é”®å­—ï¼Œ<code>this</code> æŒ‡å‘ <code>new</code> å‡ºæ¥çš„å®ä¾‹å¯¹è±¡</p><p>åœ¨äº‹ä»¶ä¸­ï¼Œ<code>this</code> æŒ‡å‘è§¦å‘è¿™ä¸ªäº‹ä»¶çš„å¯¹è±¡</p><p>IE ä¸‹ <code>attachEvent</code> ä¸­çš„ <code>this</code> æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ <code>Window</code></p><p>ç®­å¤´å‡½æ•°ä¸­ï¼Œå‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨ä½œç”¨åŸŸçš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸçš„å¯¹è±¡</p><pre><code class="js">function foo() {  console.log(this.a)}var a = 1foo()           //1       â€‹const obj = {  a: 2,  foo: foo}obj.foo()      //2â€‹const c = new foo()   //undefined</code></pre><p>å¯¹äºç›´æ¥è°ƒç”¨ <code>foo</code> æ¥è¯´ï¼Œä¸ç®¡ <code>foo</code> å‡½æ•°è¢«æ”¾åœ¨äº†ä»€ä¹ˆåœ°æ–¹ï¼Œ<code>this</code> ä¸€å®šæ˜¯<code>window</code></p><p>å¯¹äº <code>obj.foo()</code> æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½ï¼Œè°è°ƒç”¨äº†å‡½æ•°ï¼Œè°å°±æ˜¯ <code>this</code>ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ <code>foo</code> å‡½æ•°ä¸­çš„ <code>this</code> å°±æ˜¯ <code>obj</code> å¯¹è±¡</p><p>å¯¹äº <code>new</code> çš„æ–¹å¼æ¥è¯´ï¼Œ<code>this</code> è¢«æ°¸è¿œç»‘å®šåœ¨äº† <code>new</code>å‡ºæ¥çš„å¯¹è±¡ä¸Šï¼Œä¸ä¼šè¢«ä»»ä½•æ–¹å¼æ”¹å˜ <code>this</code></p><p>ç®­å¤´å‡½æ•°å…¶å®æ˜¯æ²¡æœ‰<code>this</code> çš„ï¼Œç®­å¤´å‡½æ•°ä¸­çš„ <code>this</code> åªå–å†³åŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°çš„ <code>this</code>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå› ä¸ºåŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°æ˜¯ <code>a</code>ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ <code>this</code> æ˜¯ <code>window</code>ã€‚å¦å¤–å¯¹ç®­å¤´å‡½æ•°ä½¿ç”¨ <code>bind</code>è¿™ç±»å‡½æ•°æ˜¯æ— æ•ˆçš„</p><h2 id="applyã€callã€bind"><a href="#applyã€callã€bind" class="headerlink" title="applyã€callã€bind"></a>applyã€callã€bind</h2><p><code>call</code>ã€<code>apply</code>å’Œ<code>bind</code>æ˜¯Functionå¯¹è±¡è‡ªå¸¦çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œéƒ½æ˜¯ä¸ºäº†æ”¹å˜å‡½æ•°ä½“å†…éƒ¨ <code>this</code> çš„æŒ‡å‘ã€‚</p><p><code>apply</code> ã€ <code>call</code> ã€<code>bind</code> ä¸‰è€…ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ this è¦æŒ‡å‘çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æƒ³æŒ‡å®šçš„ä¸Šä¸‹æ–‡ï¼›</p><p><code>apply</code> ã€ <code>call</code> ã€<code>bind</code> ä¸‰è€…éƒ½å¯ä»¥åˆ©ç”¨åç»­å‚æ•°ä¼ å‚ï¼›</p><p><code>bind</code> æ˜¯è¿”å›å¯¹åº” å‡½æ•°ï¼Œä¾¿äºç¨åè°ƒç”¨ï¼›<code>apply</code> ã€<code>call</code> åˆ™æ˜¯ç«‹å³è°ƒç”¨ </p><p>call ä¼ å…¥å‚æ•°åˆ—è¡¨</p><p>apply ä¼ å…¥æ•°ç»„</p><p>bind() æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª æ–°å‡½æ•°ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–°å‡½æ•°æ—¶ï¼Œæ–°å‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ bind() æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•° ä½œä¸º thisï¼Œä¼ å…¥ bind() æ–¹æ³•çš„ ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°ã€‚</p><h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><h3 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h3><pre><code class="js">var arr=[&#39;12&#39;,&#39;32&#39;,&#39;89&#39;,&#39;12&#39;,&#39;12&#39;,&#39;78&#39;,&#39;12&#39;,&#39;32&#39;];// æœ€ç®€å•æ•°ç»„å»é‡æ³•function unique1(array){    var n = []; //ä¸€ä¸ªæ–°çš„ä¸´æ—¶æ•°ç»„    for(var i = 0; i &lt; array.length; i++){ //éå†å½“å‰æ•°ç»„        if (n.indexOf(array[i]) == -1)            n.push(array[i]);    }    return n;}arr=unique1(arr);</code></pre><blockquote><p>è¿™ä¸ªå¤ªç®€å•äº†ï¼Œä¸ªäººå»ºè®®ä½¿ç”¨Setè¿›è¡Œå»é‡</p></blockquote><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><pre><code class="js">/**     * æŒ‰ sort åŠ  id æ’åº     * @param {Object} a     * @param {Object} b     */function   sortFun(a, b) {  return a.sort - b.sort == 0 ? a.id - b.id : a.sort - b.sort};arr.sort(sortFun)   //ä»å°åˆ°å¤§æ’åº</code></pre><h3 id="é€’å½’æ±‚å’Œ"><a href="#é€’å½’æ±‚å’Œ" class="headerlink" title="é€’å½’æ±‚å’Œ"></a>é€’å½’æ±‚å’Œ</h3><pre><code class="js">function add(num1,num2){  var num = num1+num2;  if(num2+1&gt;100){    return num;  }else{    return add(num,num2+1)  }}var sum =add(1,2)</code></pre><h3 id="è®¡ç®—æ•°ç»„å„é¡¹çš„é‡å¤æ¬¡æ•°"><a href="#è®¡ç®—æ•°ç»„å„é¡¹çš„é‡å¤æ¬¡æ•°" class="headerlink" title="è®¡ç®—æ•°ç»„å„é¡¹çš„é‡å¤æ¬¡æ•°"></a>è®¡ç®—æ•°ç»„å„é¡¹çš„é‡å¤æ¬¡æ•°</h3><pre><code class="js">var arr=[&#39;èƒ¡å°†&#39;,&#39;èƒ¡å°†&#39;,&#39;hujiang&#39;,&#39;èƒ¡å°†&#39;,&#39;èƒ¡æ±Ÿ&#39;,&#39;hujiang&#39;];var obj={};arr.sort();    //å…ˆæ’åºfor(var i=0;i&lt;arr.length;){    var con=0;    for(var j=i;j&lt;arr.length;j++){        if(arr[i]===arr[j]){            con++        }    }    obj[arr[i]]=con;     i=i+con;    //è·³è¿‡é‡å¤çš„å€¼}console.log(obj);  //{ hujiang: 2, &#39;èƒ¡å°†&#39;: 3, &#39;èƒ¡æ±Ÿ&#39;: 1 }</code></pre><h2 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h2><h3 id="å®ä»»åŠ¡-å¾®ä»»åŠ¡"><a href="#å®ä»»åŠ¡-å¾®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡/å¾®ä»»åŠ¡"></a>å®ä»»åŠ¡/å¾®ä»»åŠ¡</h3><p>é™¤äº†å¹¿ä¹‰çš„åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯¹ä»»åŠ¡æœ‰æ›´ç²¾ç»†çš„å®šä¹‰ï¼š</p><p>macro-task(å®ä»»åŠ¡)ï¼šå½“å‰è°ƒç”¨æ ˆä¸­æ‰§è¡Œçš„ä»»åŠ¡ç§°ä¸ºå®ä»»åŠ¡ã€‚åŒ…æ‹¬ï¼šscriptå…¨éƒ¨ä»£ç ã€setTimeoutã€setIntervalã€setImmediateï¼ˆæµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒï¼Œåªæœ‰IE10æ”¯æŒï¼Œå…·ä½“å¯è§MDNï¼‰ã€I/Oã€UI Renderingã€‚</p><p>micro-task(å¾®ä»»åŠ¡)ï¼š å½“å‰ï¼ˆæ­¤æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼‰å®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œåœ¨ä¸‹ä¸€ä¸ªå®ä»»åŠ¡å¼€å§‹ä¹‹å‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ä¸ºå¾®ä»»åŠ¡ã€‚åŒ…æ‹¬ï¼šProcess.nextTickï¼ˆNodeç‹¬æœ‰ï¼‰ã€Promiseã€Object.observe(åºŸå¼ƒ)ã€MutationObserver</p><p>ä¸åŒç±»å‹çš„ä»»åŠ¡ä¼šè¿›å…¥å¯¹åº”çš„Event Queueï¼Œå®ä»»åŠ¡ä¸­çš„äº‹ä»¶æ”¾åœ¨callback queueä¸­ï¼Œç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç»´æŠ¤ï¼›å¾®ä»»åŠ¡çš„äº‹ä»¶æ”¾åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç”±jså¼•æ“çº¿ç¨‹ç»´æŠ¤ã€‚</p><blockquote><p>è¿™ä¸ªä¸œè¥¿æ²¡ç»™ä¾‹å­ï¼Œå¯èƒ½å¾ˆéš¾ç†è§£ï¼Œæˆ‘ä¹‹å‰çœ‹çš„è¿™ä¸ª<a href="https://juejin.im/post/59e85eebf265da430d571f89" target="_blank" rel="noopener">é“¾æ¥</a></p></blockquote><h3 id="ä¸€å¥è¯è§£æä¸‹ä»€ä¹ˆæ˜¯event-loop"><a href="#ä¸€å¥è¯è§£æä¸‹ä»€ä¹ˆæ˜¯event-loop" class="headerlink" title="ä¸€å¥è¯è§£æä¸‹ä»€ä¹ˆæ˜¯event loop"></a>ä¸€å¥è¯è§£æä¸‹ä»€ä¹ˆæ˜¯event loop</h3><p>ä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ä¼šç”Ÿæˆå †ï¼ˆheapï¼‰å’Œæ ˆï¼ˆstackï¼‰</p><p>js ä»ä¸Šåˆ°ä¸‹è§£ææ–¹æ³•ï¼Œå°†å…¶ä¸­çš„åŒæ­¥ä»»åŠ¡æŒ‰ç…§æ‰§è¡Œé¡ºåºæ’åˆ—åˆ°æ‰§è¡Œæ ˆä¸­</p><p>å½“ç¨‹åºè°ƒç”¨å¤–éƒ¨çš„ API æ—¶ï¼ˆæ¯”å¦‚ ajaxã€setTimeout ç­‰ï¼‰ï¼Œä¼šå°†æ­¤ç±»å¼‚æ­¥ä»»åŠ¡æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„ä»»åŠ¡ã€‚ç­‰å¼‚æ­¥ä»»åŠ¡è¿”å›ç»“æœåï¼Œå†æŒ‰ç…§é¡ºåºæ’åˆ—åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­</p><p>ä¸»çº¿ç¨‹å…ˆå°†æ‰§è¡Œæ ˆä¸­çš„åŒæ­¥ä»»åŠ¡æ¸…ç©ºï¼Œç„¶åæ£€æŸ¥äº‹ä»¶é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œå°±å°†ç¬¬ä¸€ä¸ªäº‹ä»¶å¯¹åº”çš„å›è°ƒæ¨åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œè‹¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°å¼‚æ­¥ä»»åŠ¡ï¼Œåˆ™ç»§ç»­å°†è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡æ’åˆ—åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­</p><p>ä¸»çº¿ç¨‹æ¯æ¬¡å°†æ‰§è¡Œæ ˆæ¸…ç©ºåï¼Œå°±å»äº‹ä»¶é˜Ÿåˆ—ä¸­æ£€æŸ¥æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œå°±æ¯æ¬¡å–å‡ºä¸€ä¸ªæ¨åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œè¿™ä¸ªå¾ªç¯å¾€å¤çš„è¿‡ç¨‹è¢«ç§°ä¸ºâ€œEvent Loop äº‹ä»¶å¾ªç¯â€</p><h2 id="æµè§ˆå™¨é¡µé¢æ¸²æŸ“è¿‡ç¨‹"><a href="#æµè§ˆå™¨é¡µé¢æ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="æµè§ˆå™¨é¡µé¢æ¸²æŸ“è¿‡ç¨‹"></a>æµè§ˆå™¨é¡µé¢æ¸²æŸ“è¿‡ç¨‹</h2><p>æµè§ˆå™¨æ¸²æŸ“é¡µé¢çš„ä¸€èˆ¬è¿‡ç¨‹ï¼š</p><ol><li><p>æµè§ˆå™¨è§£æhtmlæºç ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª DOMæ ‘ã€‚å¹¶è¡Œè¯·æ±‚ css/image/jsåœ¨DOMæ ‘ä¸­ï¼Œæ¯ä¸€ä¸ªHTMLæ ‡ç­¾éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªæ–‡æœ¬ä¹Ÿéƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚DOMæ ‘çš„æ ¹èŠ‚ç‚¹å°±æ˜¯ documentElementï¼Œå¯¹åº”çš„æ˜¯htmlæ ‡ç­¾ã€‚</p></li><li><p>æµè§ˆå™¨è§£æCSSä»£ç ï¼Œè®¡ç®—å‡ºæœ€ç»ˆçš„æ ·å¼æ•°æ®ã€‚æ„å»ºCSSOMæ ‘ã€‚å¯¹CSSä»£ç ä¸­éæ³•çš„è¯­æ³•å®ƒä¼šç›´æ¥å¿½ç•¥æ‰ã€‚è§£æCSSçš„æ—¶å€™ä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºæ¥å®šä¹‰ä¼˜å…ˆçº§ï¼šæµè§ˆå™¨é»˜è®¤è®¾ç½® &lt; ç”¨æˆ·è®¾ç½® &lt; å¤–é“¾æ ·å¼ &lt; å†…è”æ ·å¼ &lt; htmlä¸­çš„styleã€‚</p></li><li><p>DOM Tree + CSSOM â€“&gt; æ¸²æŸ“æ ‘ï¼ˆrendering treeï¼‰ã€‚æ¸²æŸ“æ ‘å’ŒDOMæ ‘æœ‰ç‚¹åƒï¼Œä½†æ˜¯æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p>DOMæ ‘å®Œå…¨å’Œhtmlæ ‡ç­¾ä¸€ä¸€å¯¹åº”ï¼Œä½†æ˜¯æ¸²æŸ“æ ‘ä¼šå¿½ç•¥æ‰ä¸éœ€è¦æ¸²æŸ“çš„å…ƒç´ ï¼Œæ¯”å¦‚headã€display:noneçš„å…ƒç´ ç­‰ã€‚è€Œä¸”ä¸€å¤§æ®µæ–‡æœ¬ä¸­çš„æ¯ä¸€ä¸ªè¡Œåœ¨æ¸²æŸ“æ ‘ä¸­éƒ½æ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚æ¸²æŸ“æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨æœ‰å¯¹åº”çš„csså±æ€§ã€‚</p></li><li><p>ä¸€æ—¦æ¸²æŸ“æ ‘åˆ›å»ºå¥½äº†ï¼Œæµè§ˆå™¨å°±å¯ä»¥æ ¹æ®æ¸²æŸ“æ ‘ç›´æ¥æŠŠé¡µé¢ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚</p></li></ol><p>ä»¥ä¸Šå››ä¸ªæ­¥éª¤å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§é¡ºåºå®Œæˆçš„ã€‚å¦‚æœDOMæˆ–è€…CSSOMè¢«ä¿®æ”¹ï¼Œä»¥ä¸Šè¿‡ç¨‹ä¼šè¢«é‡å¤æ‰§è¡Œã€‚å®é™…ä¸Šï¼ŒCSSå’ŒJavaScriptå¾€å¾€ä¼šå¤šæ¬¡ä¿®æ”¹DOMæˆ–è€…CSSOMã€‚</p><h2 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜"></a>æµè§ˆå™¨ç¼“å­˜</h2><p>åŸä½œè€…ç»™çš„è¯¦æƒ…<a href="https://mp.weixin.qq.com/s?__biz=MzI5MjU0Mjk5MA==&mid=2247483826&idx=2&sn=e38f5e5b928a6aa5c15371505b4e8d71&chksm=ec7e8ed3db0907c545393ea90ee8bfd7dc944ff013957228b200d66929767251b1982340d036&token=816776520&lang=zh_CN#rd" target="_blank" rel="noopener">é“¾æ¥</a></p><p>æˆ‘ä¹‹å‰çœ‹åˆ°çš„å¦å¤–ä¸€ç¯‡æ¯”è¾ƒå¥½çš„æ–‡ç« <a href="https://imweb.io/topic/5795dcb6fb312541492eda8c" target="_blank" rel="noopener">é“¾æ¥</a></p><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="ç›’æ¨¡å‹"><a href="#ç›’æ¨¡å‹" class="headerlink" title="ç›’æ¨¡å‹"></a>ç›’æ¨¡å‹</h2><p>ç›’æ¨¡å‹çš„ç»„æˆï¼Œç”±é‡Œå‘å¤–content,padding,border,margin.</p><p><strong>åœ¨IEç›’å­æ¨¡å‹ä¸­ï¼Œwidthè¡¨ç¤ºcontent+padding+borderè¿™ä¸‰ä¸ªéƒ¨åˆ†çš„å®½åº¦</strong></p><p><strong>åœ¨æ ‡å‡†çš„ç›’å­æ¨¡å‹ä¸­ï¼ŒwidthæŒ‡contentéƒ¨åˆ†çš„å®½åº¦</strong></p><p><code>box-sizing</code>çš„ä½¿ç”¨</p><pre><code class="css">box-sizing: content-box; //æ˜¯W3Cç›’å­æ¨¡å‹box-sizing: border-box; //æ˜¯IEç›’å­æ¨¡å‹</code></pre><p><code>box-sizing</code>çš„é»˜è®¤å±æ€§æ˜¯<code>content-box</code></p><h2 id="å±…ä¸­"><a href="#å±…ä¸­" class="headerlink" title="å±…ä¸­"></a>å±…ä¸­</h2><h3 id="æ°´å¹³å±…ä¸­"><a href="#æ°´å¹³å±…ä¸­" class="headerlink" title="æ°´å¹³å±…ä¸­"></a>æ°´å¹³å±…ä¸­</h3><p>è¡Œå†…å…ƒç´ : <code>text-align: center</code></p><p>å—çº§å…ƒç´ :</p><pre><code class="css">// æ–¹æ³•1 margin: 0 auto;// æ–¹æ³•2position:absolute;left:50%;transform:translateX(-50%);// æ–¹æ³•3display:flex;justify-content: center;</code></pre><h3 id="å‚ç›´å±…ä¸­"><a href="#å‚ç›´å±…ä¸­" class="headerlink" title="å‚ç›´å±…ä¸­"></a>å‚ç›´å±…ä¸­</h3><p>è®¾ç½®line-height ç­‰äºheight</p><pre><code class="css">// æ–¹æ³•ä¸€positionï¼šabsolute;top:50%;transform:translateY(-50%);// æ–¹æ³•äºŒdisplay:flex;align-items: center;// æ–¹æ³•ä¸‰display:table;display:table-cell;vertical-align: middle;</code></pre><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>ä¸€è¾¹ç™¾åº¦ä¸€è¾¹çœ‹ï¼Œå›æƒ³èµ·æ¥ä¸å°‘çŸ¥è¯†ï¼Œä½†æ˜¯è¿™ä¸ªè¿˜æ˜¯ç›¸å¯¹åŸºç¡€çš„éƒ¨åˆ†ï¼Œä¹‹åå†æ‰¾ç‚¹éš¾ä¸€äº›çš„ï¼Œå½“ç„¶ï¼ŒåŸºç¡€ä¸ç¨³åœ°åŠ¨å±±æ‘‡ï¼Œè¿˜æ˜¯è¦å¥½å¥½å¤ä¹ åŸºç¡€çš„</p><p>ç¥å„ä½æ‰¾åˆ°åˆé€‚è‡ªå·±çš„å…¬å¸ï¼å¥¥é‡Œç»™ï¼</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
      <category>é¢˜åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Curriculum Vitae</title>
    <link href="undefined2020/07/cv/"/>
    <url>2020/07/cv/</url>
    
    <content type="html"><![CDATA[<h1 id="èµµè‹±åš"><a href="#èµµè‹±åš" class="headerlink" title="èµµè‹±åš"></a>èµµè‹±åš</h1><h2 id="ä¸ªäººä¿¡æ¯"><a href="#ä¸ªäººä¿¡æ¯" class="headerlink" title="ä¸ªäººä¿¡æ¯"></a>ä¸ªäººä¿¡æ¯</h2><p>ç”µè¯ï¼š15143211127<br>é‚®ç®±ï¼š<a href="mailto:zhaoyingbo@live.cn">zhaoyingbo@live.cn</a><br>åœ°å€ï¼šé•¿æ˜¥<br>ä¸ªäººç½‘ç«™ï¼š<a href="https://lacus.site">https://lacus.site</a><br>å¾®ä¿¡ï¼š15143211127<br>æ±‚èŒæ„å‘ï¼šwebå‰ç«¯å¼€å‘</p><h2 id="é¡¹ç›®ç»å†"><a href="#é¡¹ç›®ç»å†" class="headerlink" title="é¡¹ç›®ç»å†"></a>é¡¹ç›®ç»å†</h2><h3 id="Toasté¢˜åº“ï¼ˆ2020-06-18-è‡³ä»Šï¼‰"><a href="#Toasté¢˜åº“ï¼ˆ2020-06-18-è‡³ä»Šï¼‰" class="headerlink" title="Toasté¢˜åº“ï¼ˆ2020.06.18-è‡³ä»Šï¼‰"></a>Toasté¢˜åº“ï¼ˆ2020.06.18-è‡³ä»Šï¼‰</h3><ul><li><p>é¡¹ç›®æè¿°ï¼šä½¿ç”¨Vueå¼€å‘ï¼Œå®ç°èƒŒé¢˜ï¼Œé¢˜ç›®æ£€ç´¢ï¼ŒèƒŒé¢˜è¿›åº¦ä¿å­˜ï¼Œç”¨æˆ·åé¦ˆç­‰åŠŸèƒ½</p></li><li><p>é¡¹ç›®èŒè´£ï¼š</p><ol><li><p>è´Ÿè´£é¡µé¢UIå¸ƒå±€ï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹UIåº“ï¼Œè‡ªè¡Œå°è£…ç»„ä»¶ï¼Œå®ç°ä¸»é¢˜åˆ‡æ¢ï¼Œä½¿ç”¨remå¯¹å„ç§æœºå‹è¿›è¡Œé€‚é…</p></li><li><p>ä½¿ç”¨DFAç®—æ³•å®ç°é¢˜ç›®æ£€ç´¢</p></li><li><p>ä½¿ç”¨LocalStorageå­˜å‚¨ç”¨æˆ·èƒŒé¢˜è¿›åº¦</p></li><li><p>ä½¿ç”¨PWAåŠ é€Ÿå¼€å±é€Ÿåº¦ä»¥åŠå®ç°æœ¬åœ°åŒ–</p></li><li><p>ä½¿ç”¨Dockerï¼ŒCDNç­‰æŠ€æœ¯è¿›è¡Œéƒ¨ç½²</p></li></ol></li><li><p>é¡¹ç›®ä¸šç»©ï¼šä»è®¾è®¡åˆ°éƒ¨ç½²ï¼Œç‹¬ç«‹å®Œæˆæ•´ä¸ªé¡¹ç›®ç¬¬ä¸€ç‰ˆå¹¶ä¸Šçº¿ï¼Œå…±ç”¨æ—¶ä¸‰å¤©ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­æ— bugï¼ŒæŠ¢åœ¨è€ƒè¯•å‰ä¸€å‘¨å‘å¸ƒï¼Œè·å¾—å¤§é‡ç”¨æˆ·å¥½è¯„</p></li><li><p>é¡¹ç›®åœ°å€ï¼š<a href="https://tiku.lacus.site/" target="_blank" rel="noopener">https://tiku.lacus.site/</a></p></li></ul><h3 id="Cherryè¯¾è¡¨æˆç»©æŸ¥è¯¢ï¼ˆ2020-02-09-è‡³ä»Šï¼‰"><a href="#Cherryè¯¾è¡¨æˆç»©æŸ¥è¯¢ï¼ˆ2020-02-09-è‡³ä»Šï¼‰" class="headerlink" title="Cherryè¯¾è¡¨æˆç»©æŸ¥è¯¢ï¼ˆ2020.02.09-è‡³ä»Šï¼‰"></a>Cherryè¯¾è¡¨æˆç»©æŸ¥è¯¢ï¼ˆ2020.02.09-è‡³ä»Šï¼‰</h3><ul><li><p>é¡¹ç›®æè¿°ï¼šä½¿ç”¨Pythonçˆ¬å–æ•™åŠ¡ç³»ç»Ÿè¯¾è¡¨ä»¥åŠæˆç»©ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨å‰ç«¯è¿›è¡Œå±•ç¤º</p></li><li><p>é¡¹ç›®èŒè´£ï¼š</p><ol><li><p>æ•´ä½“çš„é¡¹ç›®è§„åˆ’ï¼Œåˆ†å·¥åè°ƒ</p></li><li><p>è´Ÿè´£é¡µé¢UIå¸ƒå±€ï¼Œå°‘é‡ä½¿ç”¨ElementUI</p></li><li><p>å¤„ç†åç«¯å‘æ¥çš„è¯¾è¡¨ä»¥åŠæˆç»©ä¿¡æ¯ï¼Œä¿å­˜åœ¨LocalStorageä¸­ï¼Œå¤„ç†æ•°æ®å®ç°è‡ªå®šä¹‰è¯¾è¡¨åŠŸèƒ½å¹¶é˜²æ­¢ä¸æºè¯¾è¡¨å†²çª</p></li><li><p>ä½¿ç”¨Python+Flaskè¿›è¡Œåç«¯å¼€å‘ï¼Œå¯¹æ¨¡å—ç¼–å†™å•å…ƒæµ‹è¯•</p></li><li><p>ä½¿ç”¨swaggerè¿›è¡Œåç«¯æ–‡æ¡£ç¼–å†™</p></li></ol></li><li><p>é¡¹ç›®ä¸šç»©ï¼šå¸¦é¢†ä¸‰äººå°ç»„ä¸€å‘¨å†…å®Œæˆç¬¬ä¸€ç‰ˆå¹¶ä¸Šçº¿ï¼ŒåæœŸè¿˜æ·»åŠ äº†å°æ¸¸æˆç­‰åŠŸèƒ½ï¼Œç›®å‰æ—¥å‡PV3.5kã€UV1.5k</p></li><li><p>é¡¹ç›®åœ°å€ï¼š<a href="https://cherry.lacus.site/" target="_blank" rel="noopener">https://cherry.lacus.site/</a></p></li></ul><h2 id="æ•™è‚²ç»å†"><a href="#æ•™è‚²ç»å†" class="headerlink" title="æ•™è‚²ç»å†"></a>æ•™è‚²ç»å†</h2><h3 id="é•¿æ˜¥ç†å·¥å¤§å­¦"><a href="#é•¿æ˜¥ç†å·¥å¤§å­¦" class="headerlink" title="é•¿æ˜¥ç†å·¥å¤§å­¦"></a>é•¿æ˜¥ç†å·¥å¤§å­¦</h3><p>é•¿æ˜¥ | è½¯ä»¶å·¥ç¨‹ | æœ¬ç§‘ | è®¡ç®—æœºç§‘å­¦æŠ€æœ¯</p><p>2017.09 - 2021.06</p><h2 id="ä¸“ä¸šæŠ€èƒ½"><a href="#ä¸“ä¸šæŠ€èƒ½" class="headerlink" title="ä¸“ä¸šæŠ€èƒ½"></a>ä¸“ä¸šæŠ€èƒ½</h2><p>ç†Ÿæ‚‰JavaScriptï¼Œäº†è§£TypeScriptï¼ŒæŒæ¡ES6ä»¥ä¸Šå¸¸ç”¨è¯­æ³•</p><p>ç†Ÿç»ƒä½¿ç”¨Vue.jsæ¡†æ¶å¼€å‘é¡¹ç›®</p><p>ç†Ÿæ‚‰Node.jsï¼Œä½¿ç”¨è¿‡Serverlesså¼€å‘é¡¹ç›®</p><p>ç†Ÿæ‚‰å°ç¨‹åºå¼€å‘ï¼Œæ›¾ç‹¬ç«‹å¼€å‘è¿‡ä¸¤ä¸ªé¡¹ç›®ï¼Œå…¶ä¸­ä¸€ä¸ªç´¯è®¡ç”¨æˆ·11.1k</p><p>ç†Ÿæ‚‰Pythonï¼Œæ›¾ä½¿ç”¨Flaskæ¡†æ¶å¼€å‘è¿‡3ä¸ªé¡¹ç›®çš„åç«¯</p><p>æŒæ¡MongoDBä»¥åŠMySQlçš„ä½¿ç”¨ä¸æ“ä½œ</p><p>ç†Ÿç»ƒä½¿ç”¨gitã€svnç‰ˆæœ¬ç®¡ç†å™¨</p><p>äº†è§£Sassã€Stylus ç­‰ CSSé¢„å¤„ç†å™¨</p><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>è‡ªå­¦èƒ½åŠ›å¼ºï¼Œèƒ½å¿«é€Ÿæ¥å—ä½¿ç”¨æ–°çŸ¥è¯†</p><p>è‰¯å¥½çš„åˆ†æè§£å†³é—®é¢˜èƒ½åŠ›ï¼Œå’Œè‡ªæˆ‘ç®¡ç†èƒ½åŠ›</p><p>å…·æœ‰é¢å‘å¯¹è±¡è®¾è®¡æ€æƒ³ï¼Œå…·å¤‡ç‹¬ç«‹åˆ†æå’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›</p><p>æœ‰è¾ƒå¥½çš„å›¢é˜Ÿåä½œå’Œæ²Ÿé€šèƒ½åŠ›ï¼Œæœ‰å¼ºçƒˆçš„è´£ä»»å¿ƒ</p><h2 id="PDF"><a href="#PDF" class="headerlink" title="PDF"></a>PDF</h2><p>ä¸­æ–‡ç®€å†ï¼š<a href="http://assets.lacus.site/cv/%E8%B5%B5%E8%8B%B1%E5%8D%9A_%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91_15143211127.pdf" target="_blank" rel="noopener">é“¾æ¥</a></p><p>è‹±æ–‡ç®€å†ï¼š<a href="http://assets.lacus.site/cv/%E8%B5%B5%E8%8B%B1%E5%8D%9A_webFrontend_15143211127.pdf" target="_blank" rel="noopener">é“¾æ¥</a></p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
      <category>æ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>ç®€å†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSåŸºç¡€ç±»å‹APIæ•´ç†--æ”¶å°¾</title>
    <link href="undefined2020/07/js-api-others/"/>
    <url>2020/07/js-api-others/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><h3 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse"></a>JSON.parse</h3><p>å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºJSON</p><pre><code class="js">const json = &#39;{&quot;result&quot;:true, &quot;count&quot;:42}&#39;;const obj = JSON.parse(json);console.log(obj.count);// expected output: 42console.log(obj.result);// expected output: true</code></pre><h3 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify"></a>JSON.stringify</h3><p>å°†JSONè½¬åŒ–ä¸ºå­—ç¬¦ä¸²</p><pre><code class="js">console.log(JSON.stringify({ x: 5, y: 6 }));// expected output: &quot;{&quot;x&quot;:5,&quot;y&quot;:6}&quot;console.log(JSON.stringify([new Number(3), new String(&#39;false&#39;), new Boolean(false)]));// expected output: &quot;[3,&quot;false&quot;,false]&quot;console.log(JSON.stringify({ x: [10, undefined, function(){}, Symbol(&#39;&#39;)] }));// expected output: &quot;{&quot;x&quot;:[10,null,null,null]}&quot;console.log(JSON.stringify(new Date(2006, 0, 2, 15, 4, 5)));// expected output: &quot;&quot;2006-01-02T15:04:05.000Z&quot;&quot;</code></pre><h2 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h2><p>å¤„ç†æ—¶é—´çš„å‡½æ•°ï¼Œå¹³æ—¶å°±ç”¨ä¸ªæ—¶é—´æˆ³<code>new Date().getTime()</code>å‰©ä¸‹å¾—å‡ ä¹ç”¨ä¸åˆ°ï¼Œ<a href="https://devdocs.io/javascript/global_objects/date" target="_blank" rel="noopener">æ–‡æ¡£é“¾æ¥</a></p><h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h2><p>æ•°å­¦ç”¨å‡½æ•°ï¼Œåªæ•´ç†å¸¸ç”¨çš„ï¼Œå…¶ä½™çœ‹æ–‡æ¡£ï¼Œ<a href="https://devdocs.io/javascript/global_objects/math" target="_blank" rel="noopener">æ–‡æ¡£é“¾æ¥</a></p><h3 id="Math-abs"><a href="#Math-abs" class="headerlink" title="Math.abs"></a>Math.abs</h3><p>å–ç»å¯¹å€¼</p><pre><code class="js">function difference(a, b) {  return Math.abs(a - b);}console.log(difference(3, 5));// expected output: 2console.log(difference(5, 3));// expected output: 2console.log(difference(1.23456, 7.89012));// expected output: 6.6555599999999995</code></pre><h3 id="Math-ceil"><a href="#Math-ceil" class="headerlink" title="Math.ceil"></a>Math.ceil</h3><p>è¿”å›å¤§äºç­‰äºç»™å®šé‡çš„æœ€å°æ•´æ•°</p><pre><code class="js">console.log(Math.ceil(.95));// expected output: 1console.log(Math.ceil(4));// expected output: 4console.log(Math.ceil(7.004));// expected output: 8console.log(Math.ceil(-7.004));// expected output: -7</code></pre><h3 id="Math-floor"><a href="#Math-floor" class="headerlink" title="Math.floor"></a>Math.floor</h3><p>è¿”å›å°äºç»™å®šé‡çš„æœ€å¤§æ•´æ•°</p><pre><code class="js">console.log(Math.floor(5.95));// expected output: 5console.log(Math.floor(5.05));// expected output: 5console.log(Math.floor(5));// expected output: 5console.log(Math.floor(-5.05));// expected output: -6</code></pre><h3 id="Math-max"><a href="#Math-max" class="headerlink" title="Math.max"></a>Math.max</h3><p>è¿”å›ç»™å®šå€¼æœ€å¤§çš„ä¸€ä¸ª</p><pre><code class="js">console.log(Math.max(1, 3, 2));// expected output: 3console.log(Math.max(-1, -3, -2));// expected output: -1const array1 = [1, 3, 2];console.log(Math.max(...array1));// expected output: 3</code></pre><h3 id="Math-min"><a href="#Math-min" class="headerlink" title="Math.min"></a>Math.min</h3><p>è¿”å›ç»™å®šå€¼æœ€å°çš„é‚£ä¸ª</p><pre><code class="js">console.log(Math.min(2, 3, 1));// expected output: 1console.log(Math.min(-2, -3, -1));// expected output: -3const array1 = [2, 3, 1];console.log(Math.min(...array1));// expected output: 1</code></pre><h3 id="Math-pow"><a href="#Math-pow" class="headerlink" title="Math.pow"></a>Math.pow</h3><p>è¿”å›ç»™å®šçš„é‡æŒ‡å®šæ¬¡æ•°çš„å¹‚</p><pre><code class="js">console.log(Math.pow(7, 3));// expected output: 343console.log(Math.pow(4, 0.5));// expected output: 2console.log(Math.pow(7, -2));// expected output: 0.02040816326530612//                  (1/49)console.log(Math.pow(-7, 0.5));// expected output: NaN</code></pre><h3 id="Math-random"><a href="#Math-random" class="headerlink" title="Math.random"></a>Math.random</h3><p>è¿”å›ä¸€ä¸ª<code>[0,1)</code>ä¹‹é—´éšæœºçš„æ•°</p><pre><code class="js">function getRandomInt(max) {  return Math.floor(Math.random() * Math.floor(max));}console.log(getRandomInt(3));// expected output: 0, 1 or 2console.log(getRandomInt(1));// expected output: 0console.log(Math.random());// expected output: a number between 0 and 1</code></pre><h3 id="Math-round"><a href="#Math-round" class="headerlink" title="Math.round"></a>Math.round</h3><p>è¿”å›ç»™å®šæ•°çš„èˆå…¥åçš„æ•´æ•°</p><pre><code class="js">console.log(Math.round(0.9));// expected output: 1console.log(Math.round(5.95), Math.round(5.5), Math.round(5.05));// expected output: 6 6 5console.log(Math.round(-5.05), Math.round(-5.5), Math.round(-5.95));// expected output: -5 -5 -6</code></pre><h3 id="Math-sign"><a href="#Math-sign" class="headerlink" title="Math.sign"></a>Math.sign</h3><p>è¿”å›ç»™å®šæ•°çš„ç¬¦å·ï¼Œæ­£1è´Ÿ-1é›¶0</p><pre><code class="js">console.log(Math.sign(3));// expected output: 1console.log(Math.sign(-3));// expected output: -1console.log(Math.sign(0));// expected output: 0console.log(Math.sign(&#39;-3&#39;));// expected output: -1</code></pre><h3 id="Math-sqrt"><a href="#Math-sqrt" class="headerlink" title="Math.sqrt"></a>Math.sqrt</h3><p>è¿”å›ç»™å®šæ•°çš„å¹³æ–¹æ ¹</p><pre><code class="js">function calcHypotenuse(a, b) {  return (Math.sqrt((a * a) + (b * b)));}console.log(calcHypotenuse(3, 4));// expected output: 5console.log(calcHypotenuse(5, 12));// expected output: 13console.log(calcHypotenuse(0, 0));// expected output: 0</code></pre><h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><p>æ•°å­—ç±»å‹ï¼Œ<a href="https://devdocs.io/javascript/global_objects/number" target="_blank" rel="noopener">æ–‡æ¡£é“¾æ¥</a></p><h3 id="Number-isInteger"><a href="#Number-isInteger" class="headerlink" title="Number.isInteger"></a>Number.isInteger</h3><p>åˆ¤å®šç»™å®šå€¼æ˜¯å¦æ˜¯æ•´æ•°</p><pre><code class="js">function fits(x, y) {  if (Number.isInteger(y / x)) {    return &#39;Fits!&#39;;  }  return &#39;Does NOT fit!&#39;;}console.log(fits(5, 10));// expected output: &quot;Fits!&quot;console.log(fits(5, 11));// expected output: &quot;Does NOT fit!&quot;</code></pre><h3 id="Number-isFinite"><a href="#Number-isFinite" class="headerlink" title="Number.isFinite"></a>Number.isFinite</h3><p>åˆ¤å®šç»™å®šå€¼æ˜¯å¦æ˜¯æœ‰é™æ•°</p><pre><code class="js">console.log(Number.isFinite(1 / 0));// expected output: falseconsole.log(Number.isFinite(10 / 5));// expected output: trueconsole.log(Number.isFinite(0 / 0));// expected output: false</code></pre><h3 id="number-toPrecision"><a href="#number-toPrecision" class="headerlink" title="number.toPrecision"></a>number.toPrecision</h3><p>æ–¹æ³•è¿”å›è¡¨ç¤ºNumberå¯¹è±¡åˆ°æŒ‡å®šçš„ç²¾åº¦çš„å­—ç¬¦ä¸²</p><pre><code class="js">function precise(x) {  return Number.parseFloat(x).toPrecision(4);}console.log(precise(123.456));// expected output: &quot;123.5&quot;console.log(precise(0.004));// expected output: &quot;0.004000&quot;console.log(precise(&#39;1.23e+5&#39;));// expected output: &quot;1.230e+5&quot;</code></pre><h3 id="Number-MAX-VALUE"><a href="#Number-MAX-VALUE" class="headerlink" title="Number.MAX_VALUE"></a>Number.MAX_VALUE</h3><p>jsä¸­æœ€å¤§æ­£æ•´æ•°</p><h3 id="Number-MAX-SAFE-INTEGER"><a href="#Number-MAX-SAFE-INTEGER" class="headerlink" title="Number.MAX_SAFE_INTEGER"></a>Number.MAX_SAFE_INTEGER</h3><p>jsæœ€å¤§å®‰å…¨æ•´æ•°</p><h3 id="Number-MIN-SAFE-INTEGER"><a href="#Number-MIN-SAFE-INTEGER" class="headerlink" title="Number.MIN_SAFE_INTEGER"></a>Number.MIN_SAFE_INTEGER</h3><p>jsæœ€å°å®‰å…¨æ•´æ•°</p><h3 id="Number-MIN-VALUE"><a href="#Number-MIN-VALUE" class="headerlink" title="Number.MIN_VALUE"></a>Number.MIN_VALUE</h3><p>jsæœ€å°æ­£æ•´æ•°å€¼</p><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>æ˜¯ES6æ–°å¢çš„ï¼Œç›¸è¾ƒäºå¯¹è±¡å°±æ˜¯å±æ€§åå¯ä»¥ä¸ºä»»æ„å€¼</p><h3 id="map-iterator"><a href="#map-iterator" class="headerlink" title="map.@@iterator"></a>map.@@iterator</h3><p>å¾ˆæ˜æ˜¾ï¼Œmapæ˜¯å¯ä»¥è¿­ä»£çš„</p><pre><code class="js">const map1 = new Map();map1.set(&#39;0&#39;, &#39;foo&#39;);map1.set(1, &#39;bar&#39;);const iterator1 = map1[Symbol.iterator]();for (let item of iterator1) {  console.log(item);}// expected output: Array [&quot;0&quot;, &quot;foo&quot;]// expected output: Array [1, &quot;bar&quot;]</code></pre><h3 id="map-clear"><a href="#map-clear" class="headerlink" title="map.clear"></a>map.clear</h3><p>æ¸…ç©ºmap</p><pre><code class="js">const map1 = new Map();map1.set(&#39;bar&#39;, &#39;baz&#39;);map1.set(1, &#39;foo&#39;);console.log(map1.size);// expected output: 2map1.clear();console.log(map1.size);// expected output: 0</code></pre><h3 id="map-delete"><a href="#map-delete" class="headerlink" title="map.delete"></a>map.delete</h3><p>ç§»å‡ºmapä¸­çš„æŸä¸ªå…ƒç´ </p><pre><code class="js">const map1 = new Map();map1.set(&#39;bar&#39;, &#39;foo&#39;);console.log(map1.delete(&#39;bar&#39;));// expected result: true// (true indicates successful removal)console.log(map1.has(&#39;bar&#39;));// expected result: false</code></pre><h3 id="map-entries"><a href="#map-entries" class="headerlink" title="map.entries"></a>map.entries</h3><p>è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œæ¯æ¬¡è¿”å›é”®å€¼å¯¹çš„æ•°ç»„</p><pre><code class="js">const map1 = new Map();map1.set(&#39;0&#39;, &#39;foo&#39;);map1.set(1, &#39;bar&#39;);const iterator1 = map1.entries();console.log(iterator1.next().value);// expected output: [&quot;0&quot;, &quot;foo&quot;]console.log(iterator1.next().value);// expected output: [1, &quot;bar&quot;]</code></pre><h3 id="map-forEach"><a href="#map-forEach" class="headerlink" title="map.forEach"></a>map.forEach</h3><p>å¯¹æ¯ä¸ªé”®å€¼å¯¹éƒ½æ‰§è¡Œä¸€æ¬¡æŸä¸ªæ“ä½œ</p><pre><code class="js">function logMapElements(value, key, map) {  console.log(`m[${key}] = ${value}`);}new Map([[&#39;foo&#39;, 3], [&#39;bar&#39;, {}], [&#39;baz&#39;, undefined]])  .forEach(logMapElements);// expected output: &quot;m[foo] = 3&quot;// expected output: &quot;m[bar] = [object Object]&quot;// expected output: &quot;m[baz] = undefined&quot;</code></pre><h3 id="map-get"><a href="#map-get" class="headerlink" title="map.get"></a>map.get</h3><p>è·å–mapçš„æŸä¸ªé”®å¯¹åº”çš„å€¼ï¼Œæ²¡æœ‰è¿”å›undefined</p><pre><code class="js">const map1 = new Map();map1.set(&#39;bar&#39;, &#39;foo&#39;);console.log(map1.get(&#39;bar&#39;));// expected output: &quot;foo&quot;console.log(map1.get(&#39;baz&#39;));// expected output: undefined</code></pre><h3 id="map-has"><a href="#map-has" class="headerlink" title="map.has"></a>map.has</h3><p>æŸ¥è¯¢æŸä¸ªé”®æ˜¯å¦å­˜åœ¨</p><pre><code class="js">const map1 = new Map();map1.set(&#39;bar&#39;, &#39;foo&#39;);console.log(map1.has(&#39;bar&#39;));// expected output: trueconsole.log(map1.has(&#39;baz&#39;));// expected output: false</code></pre><h3 id="map-keys"><a href="#map-keys" class="headerlink" title="map.keys"></a>map.keys</h3><p>è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œå€¼æ˜¯mapçš„é”®</p><pre><code class="js">const map1 = new Map();map1.set(&#39;0&#39;, &#39;foo&#39;);map1.set(1, &#39;bar&#39;);const iterator1 = map1.keys();console.log(iterator1.next().value);// expected output: &quot;0&quot;console.log(iterator1.next().value);// expected output: 1</code></pre><h3 id="map-set"><a href="#map-set" class="headerlink" title="map.set"></a>map.set</h3><p>è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹åˆ°mapé‡Œè¾¹</p><pre><code class="js">const map1 = new Map();map1.set(&#39;bar&#39;, &#39;foo&#39;);console.log(map1.get(&#39;bar&#39;));// expected output: &quot;foo&quot;console.log(map1.get(&#39;baz&#39;));// expected output: undefined</code></pre><h3 id="map-size"><a href="#map-size" class="headerlink" title="map.size"></a>map.size</h3><p>è¿”å›mapçš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯å¤šå°‘ä¸ªå…ƒç´ </p><pre><code class="js">const map1 = new Map();map1.set(&#39;a&#39;, &#39;alpha&#39;);map1.set(&#39;b&#39;, &#39;beta&#39;);map1.set(&#39;g&#39;, &#39;gamma&#39;);console.log(map1.size);// expected output: 3</code></pre><h3 id="map-values"><a href="#map-values" class="headerlink" title="map.values"></a>map.values</h3><p>è¿”å›ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå€¼æ˜¯mapçš„å€¼</p><pre><code class="js">const map1 = new Map();map1.set(&#39;0&#39;, &#39;foo&#39;);map1.set(1, &#39;bar&#39;);const iterator1 = map1.values();console.log(iterator1.next().value);// expected output: &quot;foo&quot;console.log(iterator1.next().value);// expected output: &quot;bar&quot;</code></pre><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>å’ŒMapçš„apiæ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡ä¸å…è®¸å­˜åœ¨é‡å¤çš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥è¿›è¡Œæ•°ç»„å»é‡ï¼Œ<a href="https://devdocs.io/javascript/global_objects/set" target="_blank" rel="noopener">æ–‡æ¡£é“¾æ¥</a></p>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSåŸºç¡€ç±»å‹APIæ•´ç†--Object</title>
    <link href="undefined2020/07/js-api-object/"/>
    <url>2020/07/js-api-object/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><h3 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign"></a>Object.assign</h3><p>å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¯¹è±¡çš„å¯æšä¸¾å±æ€§æ‹·è´åˆ°æºå¯¹è±¡ä¸Šï¼Œä¼šæ”¹å˜æºå¯¹è±¡ï¼Œå¦‚æœ<code>key</code>ç›¸åŒåè¾¹ä¼šè¦†ç›–å‰è¾¹çš„</p><pre><code class="js">const target = { a: 1, b: 2 };const source = { b: 4, c: 5 };const returnedTarget = Object.assign(target, source);console.log(target);// expected output: Object { a: 1, b: 4, c: 5 }console.log(returnedTarget);// expected output: Object { a: 1, b: 4, c: 5 }</code></pre><h3 id="object-constructor"><a href="#object-constructor" class="headerlink" title="object.constructor"></a>object.constructor</h3><p>è¿”å›æ„é€ å‡½æ•°æœ¬èº«</p><pre><code class="js">var o = {};o.constructor === Object; // truevar o = new Object;o.constructor === Object; // truevar a = [];a.constructor === Array; // truevar a = new Array;a.constructor === Array; // truevar n = new Number(3);n.constructor === Number; // true</code></pre><h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h3><p>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼ å…¥çš„å‚æ•°å°±æ˜¯æ–°å¯¹è±¡çš„åŸå‹</p><pre><code class="js">const person = {  isHuman: false,  printIntroduction: function() {    console.log(`My name is ${this.name}. Am I human? ${this.isHuman}`);  }};const me = Object.create(person);me.name = &#39;Matthew&#39;; // &quot;name&quot; is a property set on &quot;me&quot;, but not on &quot;person&quot;me.isHuman = true; // inherited properties can be overwrittenme.printIntroduction();// expected output: &quot;My name is Matthew. Am I human? true&quot;</code></pre><h3 id="Object-defineProperties"><a href="#Object-defineProperties" class="headerlink" title="Object.defineProperties"></a>Object.defineProperties</h3><p>æ–¹æ³•ç›´æ¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰äº†æ–°çš„æˆ–ä¿®æ”¹ç°æœ‰çš„å±æ€§ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡</p><pre><code class="js">const object1 = {};Object.defineProperties(object1, {  property1: {    value: 42,    writable: true  },  property2: {}});console.log(object1.property1);// expected output: 42</code></pre><h3 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h3><p>æ–¹æ³•ç›´æ¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰äº†æ–°çš„æˆ–ä¿®æ”¹ç°æœ‰çš„å±æ€§ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡</p><pre><code class="js">const object1 = {};Object.defineProperty(object1, &#39;property1&#39;, {  value: 42,  writable: false});object1.property1 = 77;// throws an error in strict modeconsole.log(object1.property1);// expected output: 42</code></pre><h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries"></a>Object.entries</h3><p>å¯ä»¥è·å–å¯¹è±¡çš„ä¸€ä¸ªå¯è¿­ä»£å±æ€§ï¼Œvalueæ˜¯ä¸€ä¸ªæ•°ç»„<code>[key,val]</code>ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œå¦‚æœéœ€è¦é¡ºåºå¯ä»¥ä½¿ç”¨<code>Object.entries(obj).sort((a, b) =&gt; a[0] - b[0]);</code></p><pre><code class="js">const object1 = {  a: &#39;somestring&#39;,  b: 42};for (const [key, value] of Object.entries(object1)) {  console.log(`${key}: ${value}`);}// expected output:// &quot;a: somestring&quot;// &quot;b: 42&quot;// order is not guaranteed</code></pre><h3 id="Object-freeze"><a href="#Object-freeze" class="headerlink" title="Object.freeze"></a>Object.freeze</h3><p>å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½æ·»åŠ åˆ é™¤æˆ–è€…ä¿®æ”¹ï¼Œå½“ç„¶å¯¹è±¡é‡Œè¾¹çš„å¯¹è±¡çš„å†…å®¹ä»å¯è¢«ä¿®æ”¹</p><pre><code class="js">const obj = {  prop: 42};Object.freeze(obj);obj.prop = 33;// Throws an error in strict modeconsole.log(obj.prop);// expected output: 42</code></pre><h3 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries"></a>Object.fromEntries</h3><p>ç”¨äºå°†é”®å€¼å¯¹æ•°ç»„è½¬åŒ–ä¸ºå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯è°ƒç”¨çš„æ•°ç»„çš„è¿­ä»£å™¨</p><pre><code class="js">const entries = new Map([  [&#39;foo&#39;, &#39;bar&#39;],  [&#39;baz&#39;, 42]]);const obj = Object.fromEntries(entries);console.log(obj);// expected output: Object { foo: &quot;bar&quot;, baz: 42 }</code></pre><h3 id="Object-getOwnPropertyDescriptor"><a href="#Object-getOwnPropertyDescriptor" class="headerlink" title="Object.getOwnPropertyDescriptor"></a>Object.getOwnPropertyDescriptor</h3><p>è·å–å¯¹è±¡ä¸­æŸä¸€ä¸ªå±æ€§çš„ä¿¡æ¯ï¼Œæ˜¯å¦å¯å†™ï¼Œ<code>getter,setter</code>ä¹‹ç±»çš„</p><pre><code class="js">const object1 = {  property1: 42};const descriptor1 = Object.getOwnPropertyDescriptor(object1, &#39;property1&#39;);console.log(descriptor1.configurable);// expected output: trueconsole.log(descriptor1.value);// expected output: 42</code></pre><h3 id="Object-getOwnPropertyDescriptors"><a href="#Object-getOwnPropertyDescriptors" class="headerlink" title="Object.getOwnPropertyDescriptors"></a>Object.getOwnPropertyDescriptors</h3><p>è·å–å¯¹è±¡ä¸­æ‰€æœ‰å±æ€§çš„ä¿¡æ¯ï¼Œå°±æ˜¯ä¸Šä¸€ä¸ªçš„é›†åˆ</p><pre><code class="js">const object1 = {  property1: 42};const descriptors1 = Object.getOwnPropertyDescriptors(object1);console.log(descriptors1.property1.writable);// expected output: trueconsole.log(descriptors1.property1.value);// expected output: 42</code></pre><h3 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames"></a>Object.getOwnPropertyNames</h3><p>è·å–å…¨éƒ¨å±æ€§åï¼ŒåŒ…å«ä¸å¯æšä¸¾å±æ€§</p><pre><code class="js">const object1 = {  a: 1,  b: 2,  c: 3};console.log(Object.getOwnPropertyNames(object1));// expected output: Array [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]var my_obj = Object.create({}, {  getFoo: {    value: function() { return this.foo; },    enumerable: false  }});my_obj.foo = 1;console.log(Object.getOwnPropertyNames(my_obj).sort()); // logs [&quot;foo&quot;, &quot;getFoo&quot;]</code></pre><h3 id="Object-getOwnPropertySymbols"><a href="#Object-getOwnPropertySymbols" class="headerlink" title="Object.getOwnPropertySymbols"></a>Object.getOwnPropertySymbols</h3><p>è·å–å¯¹è±¡ä¸­å…¨éƒ¨ç¬¦å·å±æ€§</p><pre><code class="js">const object1 = {};const a = Symbol(&#39;a&#39;);const b = Symbol.for(&#39;b&#39;);object1[a] = &#39;localSymbol&#39;;object1[b] = &#39;globalSymbol&#39;;const objectSymbols = Object.getOwnPropertySymbols(object1);console.log(objectSymbols);// expected output: Array [Symbol(a), Symbol(b)]</code></pre><h3 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf"></a>Object.getPrototypeOf</h3><p>è·å–å¯¹è±¡çš„åŸå‹å¯¹è±¡</p><pre><code class="js">const prototype1 = {};const object1 = Object.create(prototype1);console.log(Object.getPrototypeOf(object1) === prototype1);// expected output: true</code></pre><h3 id="object-hasOwnProperty"><a href="#object-hasOwnProperty" class="headerlink" title="object.hasOwnProperty"></a>object.hasOwnProperty</h3><p>åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è¯¥å±æ€§ï¼Œè€Œä¸æ˜¯ç»§æ‰¿æ¥çš„</p><pre><code class="js">const object1 = {};object1.property1 = 42;console.log(object1.hasOwnProperty(&#39;property1&#39;));// expected output: trueconsole.log(object1.hasOwnProperty(&#39;toString&#39;));// expected output: falseconsole.log(object1.hasOwnProperty(&#39;hasOwnProperty&#39;));// expected output: false</code></pre><blockquote><p>è¿™ä¸ªå‡½æ•°èƒ½è¢«ç›´æ¥è¦†å†™ï¼Œé‡åˆ°è¿™ç§æƒ…å†µä½¿ç”¨<code>Object.hasOwnProperty.call()</code></p></blockquote><h3 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is"></a>Object.is</h3><p>ç”¨äºåˆ¤å®šä¸¤ä¸ªå€¼æ˜¯å¦ç›¸åŒï¼Œä¸é™äºå¯¹è±¡</p><pre><code class="js">Object.is(&#39;foo&#39;, &#39;foo&#39;);     // trueObject.is(window, window);   // trueObject.is(&#39;foo&#39;, &#39;bar&#39;);     // falseObject.is([], []);           // falsevar test = { a: 1 };Object.is(test, test);       // trueObject.is(null, null);       // true// Special CasesObject.is(0, -0);            // falseObject.is(-0, -0);           // trueObject.is(NaN, 0/0);         // true</code></pre><h3 id="Object-isExtensible"><a href="#Object-isExtensible" class="headerlink" title="Object.isExtensible"></a>Object.isExtensible</h3><p>ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯æ‹“å±•çš„</p><pre><code class="js">const object1 = {};console.log(Object.isExtensible(object1));// expected output: trueObject.preventExtensions(object1);console.log(Object.isExtensible(object1));// expected output: false</code></pre><h3 id="Object-isFrozen"><a href="#Object-isFrozen" class="headerlink" title="Object.isFrozen"></a>Object.isFrozen</h3><p>ç”¨äºç¡®è®¤å¯¹è±¡æ˜¯å¦è¢«å†»ç»“</p><pre><code class="js">const object1 = {  property1: 42};console.log(Object.isFrozen(object1));// expected output: falseObject.freeze(object1);console.log(Object.isFrozen(object1));// expected output: true</code></pre><h3 id="object-isPrototypeOf"><a href="#object-isPrototypeOf" class="headerlink" title="object.isPrototypeOf"></a>object.isPrototypeOf</h3><p>ç”¨äºåˆ¤å®šå¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸­</p><pre><code class="js">function Foo() {}function Bar() {}function Baz() {}Bar.prototype = Object.create(Foo.prototype);Baz.prototype = Object.create(Bar.prototype);var baz = new Baz();console.log(Baz.prototype.isPrototypeOf(baz)); // trueconsole.log(Bar.prototype.isPrototypeOf(baz)); // trueconsole.log(Foo.prototype.isPrototypeOf(baz)); // trueconsole.log(Object.prototype.isPrototypeOf(baz)); // true</code></pre><h3 id="Object-isSealed"><a href="#Object-isSealed" class="headerlink" title="Object.isSealed"></a>Object.isSealed</h3><p>ç”¨æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«<strong>å¯†å°</strong>ï¼Œå¦‚æœå¯¹è±¡è®¾ç½®ä¸ºä¸å¯æ‹“å±•æˆ–è€…è®¾ç½®<code>configurable: false</code>ä¼šè¿”å›<code>true</code></p><pre><code class="js">// Objects aren&#39;t sealed by default.var empty = {};Object.isSealed(empty); // === false// If you make an empty object non-extensible,// it is vacuously sealed.Object.preventExtensions(empty);Object.isSealed(empty); // === true// The same is not true of a non-empty object,// unless its properties are all non-configurable.var hasProp = { fee: &#39;fie foe fum&#39; };Object.preventExtensions(hasProp);Object.isSealed(hasProp); // === false// But make them all non-configurable// and the object becomes sealed.Object.defineProperty(hasProp, &#39;fee&#39;, {  configurable: false});Object.isSealed(hasProp); // === true// The easiest way to seal an object, of course,// is Object.seal.var sealed = {};Object.seal(sealed);Object.isSealed(sealed); // === true// A sealed object is, by definition, non-extensible.Object.isExtensible(sealed); // === false// A sealed object might be frozen,// but it doesn&#39;t have to be.Object.isFrozen(sealed); // === true // (all properties also non-writable)var s2 = Object.seal({ p: 3 });Object.isFrozen(s2); // === false // (&#39;p&#39; is still writable)var s3 = Object.seal({ get p() { return 0; } });Object.isFrozen(s3); // === true// (only configurability matters for accessor properties)</code></pre><h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys"></a>Object.keys</h3><p>è·å–å¯¹è±¡çš„é”®ï¼Œåªæœ‰å¯æšä¸¾å±æ€§</p><pre><code class="js">// simple arrayvar arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];console.log(Object.keys(arr)); // console: [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;]// array like objectvar obj = { 0: &#39;a&#39;, 1: &#39;b&#39;, 2: &#39;c&#39; };console.log(Object.keys(obj)); // console: [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;]// array like object with random key orderingvar anObj = { 100: &#39;a&#39;, 2: &#39;b&#39;, 7: &#39;c&#39; };console.log(Object.keys(anObj)); // console: [&#39;2&#39;, &#39;7&#39;, &#39;100&#39;]// getFoo is a property which isn&#39;t enumerablevar myObj = Object.create({}, {  getFoo: {    value: function () { return this.foo; }  } });myObj.foo = 1;console.log(Object.keys(myObj)); // console: [&#39;foo&#39;]</code></pre><h3 id="Object-preventExtensions"><a href="#Object-preventExtensions" class="headerlink" title="Object.preventExtensions"></a>Object.preventExtensions</h3><p>ç¦æ­¢å¯¹è±¡è¿›è¡Œæ‹“å±•</p><pre><code class="js">// Object.preventExtensions returns the object// being made non-extensible.var obj = {};var obj2 = Object.preventExtensions(obj);obj === obj2; // true// Objects are extensible by default.var empty = {};Object.isExtensible(empty); // === true// ...but that can be changed.Object.preventExtensions(empty);Object.isExtensible(empty); // === false// Object.defineProperty throws when adding// a new property to a non-extensible object.var nonExtensible = { removable: true };Object.preventExtensions(nonExtensible);Object.defineProperty(nonExtensible, &#39;new&#39;, {  value: 8675309}); // throws a TypeError// In strict mode, attempting to add new properties// to a non-extensible object throws a TypeError.function fail() {  &#39;use strict&#39;;  // throws a TypeError  nonExtensible.newProperty = &#39;FAIL&#39;;}fail();</code></pre><h3 id="object-propertyIsEnumerable"><a href="#object-propertyIsEnumerable" class="headerlink" title="object.propertyIsEnumerable"></a>object.propertyIsEnumerable</h3><p>ç”¨äºåˆ¤å®šæŒ‡å®šçš„å±æ€§æ˜¯å¦å¯æšä¸¾</p><pre><code class="js">const object1 = {};const array1 = [];object1.property1 = 42;array1[0] = 42;console.log(object1.propertyIsEnumerable(&#39;property1&#39;));// expected output: trueconsole.log(array1.propertyIsEnumerable(0));// expected output: trueconsole.log(array1.propertyIsEnumerable(&#39;length&#39;));// expected output: false</code></pre><h3 id="Object-seal"><a href="#Object-seal" class="headerlink" title="Object.seal"></a>Object.seal</h3><p>å¯†å°ä¸€ä¸ªå¯¹è±¡ï¼Œå¯†å°ä¹‹å‰çš„å¯¹è±¡å…è®¸ä¿®æ”¹å€¼ï¼Œå¯†å°ä¹‹åä¸å…è®¸åˆ é™¤å±æ€§ï¼Œæ–°å¢çš„å±æ€§ä¸å…è®¸ä¿®æ”¹å€¼</p><pre><code class="js">var obj = {  prop: function() {},  foo: &#39;bar&#39;};// New properties may be added, existing properties// may be changed or removed.obj.foo = &#39;baz&#39;;obj.lumpy = &#39;woof&#39;;delete obj.prop;var o = Object.seal(obj);o === obj; // trueObject.isSealed(obj); // === true// Changing property values on a sealed object// still works.obj.foo = &#39;quux&#39;;// But you can&#39;t convert data properties to accessors,// or vice versa.Object.defineProperty(obj, &#39;foo&#39;, {  get: function() { return &#39;g&#39;; }}); // throws a TypeError// Now any changes, other than to property values,// will fail.obj.quaxxor = &#39;the friendly duck&#39;;// silently doesn&#39;t add the propertydelete obj.foo;// silently doesn&#39;t delete the property// ...and in strict mode such attempts// will throw TypeErrors.function fail() {  &#39;use strict&#39;;  delete obj.foo; // throws a TypeError  obj.sparky = &#39;arf&#39;; // throws a TypeError}fail();// Attempted additions through// Object.defineProperty will also throw.Object.defineProperty(obj, &#39;ohai&#39;, {  value: 17}); // throws a TypeErrorObject.defineProperty(obj, &#39;foo&#39;, {  value: &#39;eit&#39;}); // changes existing property value</code></pre><h3 id="object-toString"><a href="#object-toString" class="headerlink" title="object.toString"></a>object.toString</h3><p>å°†å¯¹è±¡å­—ç¬¦ä¸²åŒ–ï¼Œæ­£å¸¸è¿”å›<code>[Object Object]</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>Symbol.toStringTag ä¸ Symbol.hasInstance</code>æ”¹å˜ç¬¬äºŒä¸ªtagï¼Œè¯¦è§ä½ ä¸çŸ¥é“çš„jsä¸‹</p><pre><code class="js">function Dog(name) {  this.name = name;}const dog1 = new Dog(&#39;Gabby&#39;);Dog.prototype.toString = function dogToString() {  return `${this.name}`;};console.log(dog1.toString());// expected output: &quot;Gabby&quot;</code></pre><h3 id="object-valueOf"><a href="#object-valueOf" class="headerlink" title="object.valueOf"></a>object.valueOf</h3><p>æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå§‹å€¼</p><pre><code class="js">function MyNumberType(n) {  this.number = n;}MyNumberType.prototype.valueOf = function() {  return this.number;};const object1 = new MyNumberType(4);console.log(object1 + 3);// expected output: 7</code></pre><h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values"></a>Object.values</h3><p>è¿”å›å¯¹è±¡çš„å¯æšä¸¾çš„å±æ€§å€¼çš„æ•°ç»„ç”¨äº<code>for in</code>å¾ªç¯</p><pre><code class="js">const object1 = {  a: &#39;somestring&#39;,  b: 42,  c: false};console.log(Object.values(object1));// expected output: Array [&quot;somestring&quot;, 42, false]</code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSåŸºç¡€ç±»å‹APIæ•´ç†--String</title>
    <link href="undefined2020/06/js-api-string/"/>
    <url>2020/06/js-api-string/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="string-iterator"><a href="#string-iterator" class="headerlink" title="string.@@iterator"></a>string.@@iterator</h3><p>stringç±»å‹æ˜¯å¯è¿­ä»£çš„</p><pre><code class="js">let str = &#39;test string&#39;let ite = str[Symbol.iterator]()console.log(ite.next().value) // t</code></pre><h3 id="string-charAt"><a href="#string-charAt" class="headerlink" title="string.charAt"></a>string.charAt</h3><p>è·å–å­—ç¬¦ä¸²æŸä¸€ä½çš„å†…å®¹ï¼Œæ— å‚æ•°é»˜è®¤ç¬¬ä¸€ä½ï¼Œä¸‹æ ‡ä»0å¼€å§‹</p><pre><code class="js">let str = &#39;text string&#39;console.log(str.charAt()) // tconsole.log(str.charAt(6)) // s </code></pre><h3 id="string-concat"><a href="#string-concat" class="headerlink" title="string.concat"></a>string.concat</h3><p>ç”¨äºæ‹¼æ¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ä¸²,è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ä¸ä¼šæ”¹å˜æºå­—ç¬¦ä¸²</p><pre><code class="js">let str = &#39;test string&#39;let con_str = &#39; is cool!&#39;console.log(str.concat(con_str)) // test string is cool!</code></pre><h3 id="string-endsWith"><a href="#string-endsWith" class="headerlink" title="string.endsWith"></a>string.endsWith</h3><p>æŸ¥çœ‹è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥ä¼ å…¥çš„å­—ç¬¦ä¸²ç»“å°¾ï¼Œå¯ä»¥ä¼ å…¥è£å‰ªçš„å­—ç¬¦ä¸²é•¿åº¦</p><pre><code class="js">var str = &#39;To be, or not to be, that is the question.&#39;;console.log(str.endsWith(&#39;question.&#39;)); // trueconsole.log(str.endsWith(&#39;to be&#39;));     // falseconsole.log(str.endsWith(&#39;to be&#39;, 19)); // true</code></pre><h3 id="string-includes"><a href="#string-includes" class="headerlink" title="string.includes"></a>string.includes</h3><p>æŸ¥çœ‹ä¼ å…¥å­—ç¬¦ä¸²èƒ½ä¸èƒ½åœ¨è¯¥å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°ï¼Œè¿”å›<code>boolean</code></p><pre><code class="js">const sentence = &#39;The quick brown fox jumps over the lazy dog.&#39;;const word = &#39;fox&#39;;console.log(`The word &quot;${word}&quot; ${sentence.includes(word) ? &#39;is&#39; : &#39;is not&#39;} in the sentence`);// expected output: &quot;The word &quot;fox&quot; is in the sentence&quot;</code></pre><h3 id="string-indexOf"><a href="#string-indexOf" class="headerlink" title="string.indexOf"></a>string.indexOf</h3><p>æŸ¥æ‰¾ä¼ å…¥çš„å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°åœ¨è¯¥å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°è¿”å›<code>-1</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¼€å§‹æ£€ç´¢çš„ä½ç½®</p><pre><code class="js">const paragraph = &#39;The quick brown fox jumps over the lazy dog. If the dog barked, was it really lazy?&#39;;const searchTerm = &#39;dog&#39;;const indexOfFirst = paragraph.indexOf(searchTerm);console.log(`The index of the first &quot;${searchTerm}&quot; from the beginning is ${indexOfFirst}`);// expected output: &quot;The index of the first &quot;dog&quot; from the beginning is 40&quot;console.log(`The index of the 2nd &quot;${searchTerm}&quot; is ${paragraph.indexOf(searchTerm, (indexOfFirst + 1))}`);// expected output: &quot;The index of the 2nd &quot;dog&quot; is 52&quot;</code></pre><h3 id="string-lastIndexOf"><a href="#string-lastIndexOf" class="headerlink" title="string.lastIndexOf"></a>string.lastIndexOf</h3><p>æŸ¥æ‰¾ä¼ å…¥çš„å­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç°åœ¨è¯¥å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±è¿”å›<code>-1</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¼€å§‹æ£€ç´¢çš„ä½ç½®</p><pre><code class="js">const paragraph = &#39;The quick brown fox jumps over the lazy dog. If the dog barked, was it really lazy?&#39;;const searchTerm = &#39;dog&#39;;console.log(`The index of the first &quot;${searchTerm}&quot; from the end is ${paragraph.lastIndexOf(searchTerm)}`);// expected output: &quot;The index of the first &quot;dog&quot; from the end is 52&quot;</code></pre><h3 id="string-length"><a href="#string-length" class="headerlink" title="string.length"></a>string.length</h3><p>è·å–å­—ç¬¦ä¸²çš„é•¿åº¦</p><pre><code class="js">const str = &#39;Life, the universe and everything. Answer:&#39;;console.log(`${str} ${str.length}`);// expected output: &quot;Life, the universe and everything. Answer: 42&quot; </code></pre><h3 id="string-match"><a href="#string-match" class="headerlink" title="string.match"></a>string.match</h3><p>é’ˆå¯¹æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…</p><pre><code class="js">const paragraph = &#39;The quick brown fox jumps over the lazy dog. It barked.&#39;;const regex = /[A-Z]/g;const found = paragraph.match(regex);console.log(found);// expected output: Array [&quot;T&quot;, &quot;I&quot;]</code></pre><h3 id="string-normalize"><a href="#string-normalize" class="headerlink" title="string.normalize"></a>string.normalize</h3><p>å°†å­—ç¬¦ç è½¬åŒ–æˆå­—ç¬¦ä¸²</p><pre><code class="js">const name1 = &#39;\u0041\u006d\u00e9\u006c\u0069\u0065&#39;;const name2 = &#39;\u0041\u006d\u0065\u0301\u006c\u0069\u0065&#39;;console.log(`${name1}, ${name2}`);// expected output: &quot;AmÃ©lie, AmÃ©lie&quot;console.log(name1 === name2);// expected output: falseconsole.log(name1.length === name2.length);// expected output: falseconst name1NFC = name1.normalize(&#39;NFC&#39;);const name2NFC = name2.normalize(&#39;NFC&#39;);console.log(`${name1NFC}, ${name2NFC}`);// expected output: &quot;AmÃ©lie, AmÃ©lie&quot;console.log(name1NFC === name2NFC);// expected output: trueconsole.log(name1NFC.length === name2NFC.length);// expected output: true</code></pre><h3 id="string-padEnd"><a href="#string-padEnd" class="headerlink" title="string.padEnd"></a>string.padEnd</h3><p>åœ¨å­—ç¬¦ä¸²çš„æœ«å°¾æ·»åŠ é‡å¤çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå¡«å……ç©ºæ ¼</p><pre><code class="js">const str1 = &#39;Breaded Mushrooms&#39;;console.log(str1.padEnd(25, &#39;.&#39;));// expected output: &quot;Breaded Mushrooms........&quot;const str2 = &#39;200&#39;;console.log(str2.padEnd(5));// expected output: &quot;200  &quot;</code></pre><h3 id="string-padStart"><a href="#string-padStart" class="headerlink" title="string.padStart"></a>string.padStart</h3><p>åœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æ·»åŠ é‡å¤çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå¡«å……ç©ºæ ¼</p><pre><code class="js">const str1 = &#39;5&#39;;console.log(str1.padStart(2, &#39;0&#39;));// expected output: &quot;05&quot;const fullNumber = &#39;2034399002125581&#39;;const last4Digits = fullNumber.slice(-4);const maskedNumber = last4Digits.padStart(fullNumber.length, &#39;*&#39;);console.log(maskedNumber);// expected output: &quot;************5581&quot;</code></pre><h3 id="String-raw"><a href="#String-raw" class="headerlink" title="String.raw"></a>String.raw</h3><p>ç›´æ¥ä¿å­˜è¯¥å­—ç¬¦ä¸²åˆ°å†…å­˜ä¸­ï¼Œå¿½ç•¥è½¬ä¹‰å­—ç¬¦</p><pre><code class="js">// Create a variable that uses a Windows// path without escaping the backslashes:const filePath = String.raw`C:\Development\profile\aboutme.html`;console.log(`The file was uploaded from: ${filePath}`);// expected output: &quot;The file was uploaded from: C:\Development\profile\aboutme.html&quot;</code></pre><h3 id="string-repeat"><a href="#string-repeat" class="headerlink" title="string.repeat"></a>string.repeat</h3><p>ç”ŸæˆæŒ‡å®šé‡å¤æ¬¡æ•°çš„å­—ç¬¦ä¸²ï¼Œè¾“å…¥è´Ÿæ•°ä¼šæŠ¥é”™ï¼Œè¾“å…¥å°æ•°ä¼šè¢«è§„èŒƒæˆæ•´æ•°ï¼Œç±»ä¼¼<code>Math.floor()</code></p><pre><code class="js">const chorus = &#39;Because I\&#39;m happy. &#39;;console.log(`Chorus lyrics for &quot;Happy&quot;: ${chorus.repeat(27)}`);// expected output: &quot;Chorus lyrics for &quot;Happy&quot;: Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. Because I&#39;m happy. &quot;</code></pre><h3 id="string-replace"><a href="#string-replace" class="headerlink" title="string.replace"></a>string.replace</h3><p>æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å†…å®¹ï¼Œå¦‚æœåŒ¹é…çš„å†…å®¹æ˜¯å­—ç¬¦ä¸²å°±åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å†…å®¹ï¼Œå®ƒçš„ç”¨æ³•å¾ˆå¤šï¼Œå»ºè®®ç›´æ¥çœ‹æ–‡æ¡£<a href="https://devdocs.io/javascript/global_objects/string/replace" target="_blank" rel="noopener">é“¾æ¥</a></p><pre><code class="js">const p = &#39;The quick brown fox jumps over the lazy dog. If the dog reacted, was it really lazy?&#39;;const regex = /dog/gi;console.log(p.replace(regex, &#39;ferret&#39;));// expected output: &quot;The quick brown fox jumps over the lazy ferret. If the ferret reacted, was it really lazy?&quot;console.log(p.replace(&#39;dog&#39;, &#39;monkey&#39;));// expected output: &quot;The quick brown fox jumps over the lazy monkey. If the dog reacted, was it really lazy?&quot;</code></pre><h3 id="String-search"><a href="#String-search" class="headerlink" title="String.search"></a>String.search</h3><p>åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±è¿”å›<code>-1</code></p><pre><code class="js">const paragraph = &#39;The quick brown fox jumps over the lazy dog. If the dog barked, was it really lazy?&#39;;// any character that is not a word character or whitespaceconst regex = /[^\w\s]/g;console.log(paragraph.search(regex));// expected output: 43console.log(paragraph[paragraph.search(regex)]);// expected output: &quot;.&quot;</code></pre><h3 id="string-slice"><a href="#string-slice" class="headerlink" title="string.slice"></a>string.slice</h3><p>æå–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‡ºæ¥ï¼Œä¸æ”¹å˜åŸå…ˆçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœèµ·å§‹ä½ç½®è¶…è¿‡äº†æºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿”å›<code>&quot;&quot;</code></p><pre><code class="js">const str = &#39;The quick brown fox jumps over the lazy dog.&#39;;console.log(str.slice(31));// expected output: &quot;the lazy dog.&quot;console.log(str.slice(4, 19));// expected output: &quot;quick brown fox&quot;console.log(str.slice(-4));// expected output: &quot;dog.&quot;console.log(str.slice(-9, -5));// expected output: &quot;lazy&quot;</code></pre><h3 id="string-split"><a href="#string-split" class="headerlink" title="string.split"></a>string.split</h3><p>å°†å­—ç¬¦ä¸²æ ¹æ®åˆ†éš”ç¬¦åˆ†å‰²è¿›æ•°ç»„</p><pre><code class="js">const str = &#39;The quick brown fox jumps over the lazy dog.&#39;;const words = str.split(&#39; &#39;);console.log(words[3]);// expected output: &quot;fox&quot;const chars = str.split(&#39;&#39;);console.log(chars[8]);// expected output: &quot;k&quot;</code></pre><h3 id="string-startsWith"><a href="#string-startsWith" class="headerlink" title="string.startsWith"></a>string.startsWith</h3><p>åˆ¤æ–­è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥ä¼ å…¥çš„å­—ç¬¦ä¸²å¼€å¤´ï¼Œä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¼€å§‹åŒ¹é…çš„ä½ç½®</p><pre><code class="js">const str1 = &#39;Saturday night plans&#39;;console.log(str1.startsWith(&#39;Sat&#39;));// expected output: trueconsole.log(str1.startsWith(&#39;Sat&#39;, 3));// expected output: false</code></pre><h3 id="string-substring"><a href="#string-substring" class="headerlink" title="string.substring"></a>string.substring</h3><p>å¾ˆåƒ<code>string.slice</code>ï¼Œè·å–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å­—ä¸²</p><pre><code class="js">const str = &#39;Mozilla&#39;;console.log(str.substring(1, 3));// expected output: &quot;oz&quot;console.log(str.substring(2));// expected output: &quot;zilla&quot;</code></pre><h3 id="string-toLocaleLowerCase"><a href="#string-toLocaleLowerCase" class="headerlink" title="string.toLocaleLowerCase"></a>string.toLocaleLowerCase</h3><p>å°†å­—ç¬¦ä¸²æœ¬åœ°åŒ–å¹¶è½¬åŒ–ä¸ºå°å†™</p><pre><code class="js">const dotted = &#39;Ä°stanbul&#39;;console.log(`EN-US: ${dotted.toLocaleLowerCase(&#39;en-US&#39;)}`);// expected output: &quot;iÌ‡stanbul&quot;console.log(`TR: ${dotted.toLocaleLowerCase(&#39;tr&#39;)}`);// expected output: &quot;istanbul&quot;</code></pre><h3 id="string-toLocaleUpperCase"><a href="#string-toLocaleUpperCase" class="headerlink" title="string.toLocaleUpperCase"></a>string.toLocaleUpperCase</h3><p>å°†å­—ç¬¦ä¸²æœ¬åœ°åŒ–å¹¶è½¬åŒ–ä¸ºå¤§å†™</p><pre><code class="js">const city = &#39;istanbul&#39;;console.log(city.toLocaleUpperCase(&#39;en-US&#39;));// expected output: &quot;ISTANBUL&quot;console.log(city.toLocaleUpperCase(&#39;TR&#39;));// expected output: &quot;Ä°STANBUL&quot;</code></pre><h3 id="string-toLowerCase"><a href="#string-toLowerCase" class="headerlink" title="string.toLowerCase"></a>string.toLowerCase</h3><p>å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå°å†™</p><pre><code class="js">const sentence = &#39;The quick brown fox jumps over the lazy dog.&#39;;console.log(sentence.toLowerCase());// expected output: &quot;the quick brown fox jumps over the lazy dog.&quot;</code></pre><h3 id="string-toString"><a href="#string-toString" class="headerlink" title="string.toString"></a>string.toString</h3><p>å°†å­—ç¬¦ä¸²å¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²</p><pre><code class="js">const stringObj = new String(&#39;foo&#39;);console.log(stringObj);// expected output: String { &quot;foo&quot; }console.log(stringObj.toString());// expected output: &quot;foo&quot;</code></pre><h3 id="string-toUpperCase"><a href="#string-toUpperCase" class="headerlink" title="string.toUpperCase"></a>string.toUpperCase</h3><p>å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¤§å†™</p><pre><code class="js">const sentence = &#39;The quick brown fox jumps over the lazy dog.&#39;;console.log(sentence.toUpperCase());// expected output: &quot;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG.&quot;</code></pre><h3 id="string-trim"><a href="#string-trim" class="headerlink" title="string.trim"></a>string.trim</h3><p>å»é™¤å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰ç©ºç™½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç©ºæ ¼ã€å›è½¦</p><pre><code class="js">const greeting = &#39;   Hello world!   &#39;;console.log(greeting);// expected output: &quot;   Hello world!   &quot;;console.log(greeting.trim());// expected output: &quot;Hello world!&quot;;</code></pre><h3 id="string-trimEnd"><a href="#string-trimEnd" class="headerlink" title="string.trimEnd"></a>string.trimEnd</h3><p>å»é™¤ç»“å°¾çš„æ‰€æœ‰ç©ºç™½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç©ºæ ¼ã€å›è½¦ï¼Œ<code>trimRight</code>æ˜¯è¯¥æ–¹æ³•çš„åˆ«ç§°</p><pre><code class="js">const greeting = &#39;   Hello world!   &#39;;console.log(greeting);// expected output: &quot;   Hello world!   &quot;;console.log(greeting.trimEnd());// expected output: &quot;   Hello world!&quot;;</code></pre><h3 id="string-trimStart"><a href="#string-trimStart" class="headerlink" title="string.trimStart"></a>string.trimStart</h3><p>å»é™¤å¼€å¤´çš„æ‰€æœ‰ç©ºç™½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç©ºæ ¼ã€å›è½¦ï¼Œ<code>trimLeft</code>æ˜¯è¯¥æ–¹æ³•çš„åˆ«ç§°</p><pre><code class="js">const greeting = &#39;   Hello world!   &#39;;console.log(greeting);// expected output: &quot;   Hello world!   &quot;;console.log(greeting.trimStart());// expected output: &quot;Hello world!   &quot;;</code></pre><h3 id="string-valueOf"><a href="#string-valueOf" class="headerlink" title="string.valueOf"></a>string.valueOf</h3><p>è¿”å›å­—ç¬¦ä¸²å¯¹è±¡çš„åŸå§‹å€¼</p><pre><code class="js">const stringObj = new String(&#39;foo&#39;);console.log(stringObj);// expected output: String { &quot;foo&quot; }console.log(stringObj.valueOf());// expected output: &quot;foo&quot;</code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾ªç¯èµ›æ—¥ç¨‹å®‰æ’</title>
    <link href="undefined2020/06/round-robin/"/>
    <url>2020/06/round-robin/</url>
    
    <content type="html"><![CDATA[<h1 id="å¾ªç¯èµ›æ—¥ç¨‹å®‰æ’-â€“-170521328-èµµè‹±åš"><a href="#å¾ªç¯èµ›æ—¥ç¨‹å®‰æ’-â€“-170521328-èµµè‹±åš" class="headerlink" title="å¾ªç¯èµ›æ—¥ç¨‹å®‰æ’ â€“ 170521328 èµµè‹±åš"></a>å¾ªç¯èµ›æ—¥ç¨‹å®‰æ’ â€“ 170521328 èµµè‹±åš</h1><h2 id="é—®é¢˜èƒŒæ™¯ï¼ˆè‡ªå®šï¼‰"><a href="#é—®é¢˜èƒŒæ™¯ï¼ˆè‡ªå®šï¼‰" class="headerlink" title="é—®é¢˜èƒŒæ™¯ï¼ˆè‡ªå®šï¼‰"></a>é—®é¢˜èƒŒæ™¯ï¼ˆè‡ªå®šï¼‰</h2><p>è®¾æœ‰<code>n=2^k</code>ä¸ªé€‰æ‰‹è¦è¿›è¡Œå¾ªç¯èµ›ï¼Œè®¾è®¡ä¸€ä¸ªæ»¡è¶³ä»¥ä¸‹è¦æ±‚çš„æ¯”èµ›æ—¥ç¨‹è¡¨ï¼š</p><ul><li>æ¯ä¸ªé€‰æ‰‹å¿…é¡»ä¸å…¶ä»–<code>n-1</code>ä¸ªé€‰æ‰‹å„æ¯”èµ›ä¸€æ¬¡</li><li>æ¯ä¸ªé€‰æ‰‹ä¸€å¤©åªèƒ½æ¯”èµ›ä¸€æ¬¡</li></ul><h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>æ¯ä¸ªé€‰æ‰‹å¿…é¡»ä¸å…¶ä»–é€‰æ‰‹æ¯”èµ›ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°±è®¾è®¡ä¸€ä¸ª<code>nÃ—(n-1)</code>çš„äºŒç»´è¡¨ï¼Œå…¶ä¸­ï¼Œ<code>(i, j)</code>è¡¨ç¤ºå’Œç¬¬<code>i</code>ä¸ªé€‰æ‰‹åœ¨ç¬¬<code>j</code>å¤©æ¯”èµ›çš„é€‰æ‰‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªäºŒç»´è¡¨è¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œè­¬å¦‚<code>nï¼2^k</code>ä¸ªé€‰æ‰‹çš„æ—¥ç¨‹è¡¨å°±å¯ä»¥åˆ†æˆä¸¤ä¸ª<code>n/2ï¼2^(k-1)</code>çš„æ—¥ç¨‹è¡¨</p><p>åœ¨è¿›è¡Œé€’å½’åˆ†å‰²</p><p>åˆ†å‰²ç›´åˆ°åªå‰©ä¸‹ä¸¤ä¸ªé€‰æ‰‹</p><blockquote><p>æ¯”èµ›æ—¥ç¨‹è¡¨åœ¨è¿™ä¸ªæ—¶å€™å°±å¾ˆç®€å•äº†ï¼Œè®©è¿™ä¸¤ä¸ªäººç›´æ¥è¿›è¡Œæ¯”èµ›å°±å¥½äº†</p></blockquote><p>å‡è®¾æœ‰å…«ä¸ªäººæ¯”èµ›</p><p>æ•´ä¸ªæ±‚è§£è¿‡ç¨‹æ˜¯è‡ªåº•å‘ä¸Šçš„è¿­ä»£è¿‡ç¨‹ï¼Œå…¶ä¸­è¡¨æ ¼<code>c</code>å·¦ä¸Šè§’å’Œå·¦ä¸‹è§’åˆ†åˆ«ä¸ºé€‰æ‰‹1åˆ°é€‰æ‰‹8å‰ä¸‰å¤©çš„æ¯”èµ›æ—¥ç¨‹</p><p>å°†å·¦ä¸Šè§’å¤åˆ¶åˆ°å³ä¸‹è§’ï¼Œå°†å·¦ä¸‹è§’å¤åˆ¶åˆ°å³ä¸Šè§’ï¼Œå°±å®‰æ’äº†é€‰æ‰‹1åˆ°é€‰æ‰‹8åå››å¤©çš„æ¯”èµ›æ—¥ç¨‹</p><ul><li>è¡¨æ ¼a</li></ul><table><thead><tr><th>1</th><th>2</th></tr></thead><tbody><tr><td>2</td><td>1</td></tr></tbody></table><ul><li>è¡¨æ ¼b</li></ul><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr><td>2</td><td>1</td><td>4</td><td>3</td></tr><tr><td>3</td><td>4</td><td>1</td><td>2</td></tr><tr><td>4</td><td>3</td><td>2</td><td>1</td></tr></tbody></table><ul><li>è¡¨æ ¼c</li></ul><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr></thead><tbody><tr><td>2</td><td>1</td><td>4</td><td>3</td><td>6</td><td>5</td><td>8</td><td>7</td></tr><tr><td>3</td><td>4</td><td>1</td><td>2</td><td>7</td><td>8</td><td>5</td><td>6</td></tr><tr><td>4</td><td>3</td><td>2</td><td>1</td><td>8</td><td>7</td><td>6</td><td>5</td></tr><tr><td>5</td><td>6</td><td>7</td><td>8</td><td>1</td><td>2</td><td>3</td><td>4</td></tr><tr><td>6</td><td>5</td><td>8</td><td>7</td><td>2</td><td>1</td><td>4</td><td>3</td></tr><tr><td>7</td><td>8</td><td>5</td><td>6</td><td>3</td><td>4</td><td>1</td><td>2</td></tr><tr><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td></tr></tbody></table><p>å°†æ±‚è§£<code>2^k</code>ä¸ªé€‰æ‰‹æ¯”èµ›æ—¥ç¨‹è§„åˆ’åˆ†è§£ä¸º<code>2^1</code>ï¼Œ<code>2^2</code>ï¼Œ<code>2^k</code>ä¸ªé€‰æ‰‹çš„æ¯”èµ›æ—¥ç¨‹é—®é¢˜ï¼Œé€šè¿‡è¿­ä»£çš„æ–¹æ³•å°†é—®é¢˜è§£å†³</p><h2 id="æµç¨‹æè¿°"><a href="#æµç¨‹æè¿°" class="headerlink" title="æµç¨‹æè¿°"></a>æµç¨‹æè¿°</h2><p>æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå°†é—®é¢˜åˆ’åˆ†ä¸ºäº†å››éƒ¨åˆ†</p><h3 id="å·¦ä¸Šè§’"><a href="#å·¦ä¸Šè§’" class="headerlink" title="å·¦ä¸Šè§’"></a>å·¦ä¸Šè§’</h3><p>æ˜¯<code>2^(k-1)</code>ä¸ªé€‰æ‰‹åœ¨å‰åŠç¨‹çš„æ¯”èµ›æ—¥ç¨‹</p><h3 id="å·¦ä¸‹è§’"><a href="#å·¦ä¸‹è§’" class="headerlink" title="å·¦ä¸‹è§’"></a>å·¦ä¸‹è§’</h3><p>æ˜¯å¦å¤–<code>2^(k-1)</code>ä¸ªé€‰æ‰‹åœ¨å‰åŠç¨‹çš„æ¯”èµ›æ—¥ç¨‹</p><h3 id="å³ä¸Šè§’"><a href="#å³ä¸Šè§’" class="headerlink" title="å³ä¸Šè§’"></a>å³ä¸Šè§’</h3><p>å·¦ä¸‹è§’å¤åˆ¶å¾—æ¥ï¼Œæ˜¯<code>2^(k-1)</code>ä¸ªé€‰æ‰‹åœ¨ååŠç¨‹çš„æ¯”èµ›æ—¥ç¨‹</p><h3 id="å³ä¸‹è§’"><a href="#å³ä¸‹è§’" class="headerlink" title="å³ä¸‹è§’"></a>å³ä¸‹è§’</h3><p>å·¦ä¸Šè§’å¤åˆ¶å¾—æ¥ï¼Œæ˜¯å¦å¤–<code>2^(k-1)</code>ä¸ªé€‰æ‰‹åœ¨ååŠç¨‹çš„æ¯”èµ›æ—¥ç¨‹</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>ä½¿ç”¨è¯­è¨€Javascript</p><pre><code class="js">// æ ¹æ®äººå‘˜æ•°åˆ›å»ºåˆé€‚å¤§å°çš„ç©ºæ•°ç»„function createArray(k) {  let arr = new Array(k).map(item =&gt; return new Array(k))  return arr}// ä¸»å‡½æ•°éœ€è¦ä¼ å…¥é€‰æ‰‹å‚æ•°æ•°kfunction gameTable(k) {  // n=2^k(kâ‰¥1)ä¸ªé€‰æ‰‹å‚åŠ æ¯”èµ›  let table = createArray(k)  let n = 2;  //æ±‚è§£2ä¸ªé€‰æ‰‹æ¯”èµ›æ—¥ç¨‹ï¼Œå¾—åˆ°å·¦ä¸Šè§’å…ƒç´   table[0][0]=1; table[0][1]=2;     table[1][0]=2; table[1][1]=1;  // å¦‚æœk å°±æ˜¯1ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›  if(k == 1) return table  // å…¶ä½™æƒ…å†µè¿›è¡Œè¿­ä»£è¿ç®—  for(let time = 1; time &lt; k; time++) {    //è¿­ä»£å¤„ç†ï¼Œä¾æ¬¡å¤„ç†2^2, â€¦, 2^kä¸ªé€‰æ‰‹æ¯”èµ›æ—¥ç¨‹    temp=n; n=n*2;       //å¡«å·¦ä¸‹è§’å…ƒç´     for (i=temp+1; i&lt;=n; i++ )          for (j=1; j&lt;=temp; j++)                table[i][j]=table[i-temp][j]+temp;    //å·¦ä¸‹è§’å…ƒç´ å’Œå·¦ä¸Šè§’å…ƒç´ çš„å¯¹åº”å…³ç³»    //å¡«å³ä¸Šè§’å…ƒç´     for (i=1; i&lt;=temp; i++)           for (j=temp+1; j&lt;=n; j++)                table[i][j]=table[i+temp][(j+temp)% n];    //å¡«å³ä¸‹è§’å…ƒç´     for (i=temp+1; i&lt;=n; i++)          for (j=temp+1; j&lt;=n; j++)                table[i][j]=table[i-temp][j-temp];  }  // è¿”å›æ•´ä¸ªæ—¶é—´è¡¨  return table}</code></pre>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
      <category>å¾ªç¯èµ›</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSåŸºç¡€ç±»å‹APIæ•´ç†--Array</title>
    <link href="undefined2020/06/js-api-array/"/>
    <url>2020/06/js-api-array/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><h3 id="array-concat"><a href="#array-concat" class="headerlink" title="array.concat"></a>array.concat</h3><p>ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªæ•°ç»„ï¼Œæ­¤æ–¹æ³•ä¸æ”¹å˜ç°æœ‰çš„æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚</p><pre><code class="js">const array1 = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];const array2 = [&#39;d&#39;, &#39;e&#39;, &#39;f&#39;];const array3 = array1.concat(array2);console.log(array3);// expected output: Array [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</code></pre><h3 id="array-copyWithin"><a href="#array-copyWithin" class="headerlink" title="array.copyWithin"></a>array.copyWithin</h3><p>ç”¨äºå°†è¯¥æ•°ç»„çš„ä¸€éƒ¨åˆ†è¦†å†™åˆ°å¦ä¸€éƒ¨åˆ†ä¸Šï¼Œç”¨æ³•ï¼š<code>arr.copyWithin(target, start, end)</code></p><pre><code class="js">const array1 = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;];// copy to index 0 the element at index 3console.log(array1.copyWithin(0, 3, 4));// expected output: Array [&quot;d&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]// copy to index 1 all elements from index 3 to the endconsole.log(array1.copyWithin(1, 3));// expected output: Array [&quot;d&quot;, &quot;d&quot;, &quot;e&quot;, &quot;d&quot;, &quot;e&quot;]</code></pre><h3 id="array-entries"><a href="#array-entries" class="headerlink" title="array.entries"></a>array.entries</h3><p>ç”¨äºè·å–æ•°ç»„çš„Iteratorï¼Œä½†æ˜¯æ¯”æ­£å¸¸çš„å¤šäº†å½“å‰çš„index</p><pre><code class="js">const array1 = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];const iterator1 = array1.entries();console.log(iterator1.next().value);// expected output: Array [0, &quot;a&quot;]console.log(iterator1.next().value);// expected output: Array [1, &quot;b&quot;]let iterator2 = array1[Symbol.iterator]();console.log(iterator2.next().value);// expected output: String &quot;a&quot;</code></pre><h3 id="array-every"><a href="#array-every" class="headerlink" title="array.every"></a>array.every</h3><p>ä¼ å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œä¼šéå†è¯¥æ•°ç»„åˆ°æ–¹æ³•é‡Œï¼Œæ–¹æ³•è¿”å›<code>true</code>æˆ–è€…<code>false</code>ï¼Œåªè¦æœ‰ä¸€ä¸ªæ˜¯<code>false</code>å°±è¿”å›<code>false</code>ï¼Œç”¨äºæ£€æµ‹è¯¥æ•°ç»„çš„å†…å®¹æ˜¯ä¸æ˜¯éƒ½ç¬¦åˆæŸæ¡ä»¶</p><pre><code class="js">const isBelowThreshold = (currentValue) =&gt; currentValue &lt; 40;const array1 = [1, 30, 39, 29, 10, 13];console.log(array1.every(isBelowThreshold));// expected output: true</code></pre><h3 id="array-fill"><a href="#array-fill" class="headerlink" title="array.fill"></a>array.fill</h3><p>ç”¨äºå¡«å……æ•°ç»„çš„æŒ‡å®šæ®µï¼Œç”¨æ³•ï¼š<code>arr.fill(value[, start[, end]])</code></p><pre><code class="js">const array1 = [1, 2, 3, 4];// fill with 0 from position 2 until position 4console.log(array1.fill(0, 2, 4));// expected output: [1, 2, 0, 0]// fill with 5 from position 1console.log(array1.fill(5, 1));// expected output: [1, 5, 5, 5]console.log(array1.fill(6));// expected output: [6, 6, 6, 6]</code></pre><h3 id="array-filter"><a href="#array-filter" class="headerlink" title="array.filter"></a>array.filter</h3><p>ç”¨äºè¿‡æ»¤æ•°ç»„å†…å®¹ï¼Œä¼ å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œéå†æ•°ç»„åˆ°è¯¥æ–¹æ³•é‡Œï¼Œæ–¹æ³•è¿”å›<code>true</code>åˆ™å°†è¯¥å…ƒç´ æ”¾è¿›æ–°æ•°ç»„ï¼Œç„¶åè¿”å›æ–°æ•°ç»„</p><pre><code class="js">const words = [&#39;spray&#39;, &#39;limit&#39;, &#39;elite&#39;, &#39;exuberant&#39;, &#39;destruction&#39;, &#39;present&#39;];const result = words.filter(word =&gt; word.length &gt; 6);console.log(result);// expected output: Array [&quot;exuberant&quot;, &quot;destruction&quot;, &quot;present&quot;]</code></pre><h3 id="array-find"><a href="#array-find" class="headerlink" title="array.find"></a>array.find</h3><p>æ‰¾åˆ°æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ å¹¶è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ»¡è¶³çš„å…ƒç´ å°±è¿”å›<code>undefined</code></p><pre><code class="js">const array1 = [5, 12, 8, 130, 44];const found = array1.find(element =&gt; element &gt; 10);console.log(found);// expected output: 12</code></pre><h3 id="array-findIndex"><a href="#array-findIndex" class="headerlink" title="array.findIndex"></a>array.findIndex</h3><p>æ‰¾åˆ°æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ çš„ä¸‹æ ‡å¹¶è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ»¡è¶³çš„å…ƒç´ å°±è¿”å›<code>-1</code></p><pre><code class="js">const array1 = [5, 12, 8, 130, 44];const isLargeNumber = (element) =&gt; element &gt; 13;console.log(array1.findIndex(isLargeNumber));// expected output: 3</code></pre><h3 id="array-forEach"><a href="#array-forEach" class="headerlink" title="array.forEach"></a>array.forEach</h3><p>éå†æ•°ç»„ï¼Œå¦‚æœæœ‰ç¬¬äºŒä¸ªå‚æ•°å°±ç»‘å®šåˆ°ç¬¬ä¸€ä¸ªæ–¹æ³•çš„this</p><pre><code class="js">const array1 = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];array1.forEach(element =&gt; console.log(element));// expected output: &quot;a&quot;// expected output: &quot;b&quot;// expected output: &quot;c&quot;</code></pre><h3 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from"></a>Array.from</h3><p>ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªéå†çš„å‡½æ•°ï¼Œå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œéå†æ“ä½œï¼Œç”¨æ³•ï¼š<code>Array.from(arrayLike[, mapFn[, thisArg]])</code></p><p>å¯è½¬åŒ–Setå’ŒMapè¿˜æœ‰argumentsä¸ºçœŸå®çš„æ•°ç»„</p><pre><code class="js">console.log(Array.from(&#39;foo&#39;));// expected output: Array [&quot;f&quot;, &quot;o&quot;, &quot;o&quot;]console.log(Array.from([1, 2, 3], x =&gt; x + x));// expected output: Array [2, 4, 6]Array.from({length: 5}, (v, i) =&gt; i);// [0, 1, 2, 3, 4]</code></pre><h3 id="array-includes"><a href="#array-includes" class="headerlink" title="array.includes"></a>array.includes</h3><p>æŸ¥è¯¢æ•°ç»„æ˜¯å¦åŒ…å«æŸå…ƒç´ </p><pre><code class="js">const array1 = [1, 2, 3];console.log(array1.includes(2));// expected output: trueconst pets = [&#39;cat&#39;, &#39;dog&#39;, &#39;bat&#39;];console.log(pets.includes(&#39;cat&#39;));// expected output: trueconsole.log(pets.includes(&#39;at&#39;));// expected output: false</code></pre><h3 id="array-indexOf"><a href="#array-indexOf" class="headerlink" title="array.indexOf"></a>array.indexOf</h3><p>ç”¨äºæŸ¥è¯¢æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªè¯¥å…ƒç´ çš„ä½ç½®ï¼Œæ²¡æœ‰è¯¥å…ƒç´ å°±è¿”å›<code>-1</code>ï¼Œç”¨æ³•ï¼š<code>arr.indexOf(searchElement[, fromIndex])</code>ï¼Œ<code>fromIndex</code>å¯çœï¼ŒæŒ‡å®šå¼€å§‹æœç´¢çš„ä½ç½®</p><pre><code class="js">const beasts = [&#39;ant&#39;, &#39;bison&#39;, &#39;camel&#39;, &#39;duck&#39;, &#39;bison&#39;];console.log(beasts.indexOf(&#39;bison&#39;));// expected output: 1// start from index 2console.log(beasts.indexOf(&#39;bison&#39;, 2));// expected output: 4console.log(beasts.indexOf(&#39;giraffe&#39;));// expected output: -1</code></pre><h3 id="Array-isArray"><a href="#Array-isArray" class="headerlink" title="Array.isArray"></a>Array.isArray</h3><p>ç”¨äºåˆ¤å®šä¼ å…¥çš„å‚æ•°æ˜¯å¦æ˜¯æ•°ç»„ï¼Œè¿”å›<code>boolean</code></p><pre><code class="js">Array.isArray([1, 2, 3]);  // trueArray.isArray({foo: 123}); // falseArray.isArray(&#39;foobar&#39;);   // falseArray.isArray(undefined);  // false</code></pre><h3 id="array-join"><a href="#array-join" class="headerlink" title="array.join"></a>array.join</h3><p>ç”¨äºå°†æ•°ç»„çš„å†…å®¹æ‹¼æˆå­—ç¬¦ä¸²ï¼Œä¼ å…¥çš„å‚æ•°å°±æ˜¯åˆ†å‰²ç¬¦</p><pre><code class="js">const elements = [&#39;Fire&#39;, &#39;Air&#39;, &#39;Water&#39;];console.log(elements.join());// expected output: &quot;Fire,Air,Water&quot;console.log(elements.join(&#39;&#39;));// expected output: &quot;FireAirWater&quot;console.log(elements.join(&#39;-&#39;));// expected output: &quot;Fire-Air-Water&quot;</code></pre><h3 id="array-lastIndexOf"><a href="#array-lastIndexOf" class="headerlink" title="array.lastIndexOf"></a>array.lastIndexOf</h3><p>è¿”å›ç»™å®šçš„å†…å®¹åœ¨æ•°ç»„ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰è¿”å›<code>-1</code>ï¼Œç”¨æ³•ï¼š<code>arr.lastIndexOf(searchElement[, fromIndex])</code>ï¼Œ<code>fromIndex</code>å¯çœï¼ŒæŒ‡å®šå¼€å§‹æœç´¢çš„ä½ç½®</p><pre><code class="js">const animals = [&#39;Dodo&#39;, &#39;Tiger&#39;, &#39;Penguin&#39;, &#39;Dodo&#39;];console.log(animals.lastIndexOf(&#39;Dodo&#39;));// expected output: 3console.log(animals.lastIndexOf(&#39;Tiger&#39;));// expected output: 1</code></pre><h3 id="Array-length"><a href="#Array-length" class="headerlink" title="Array.length"></a>Array.length</h3><p>è·å–æ•°ç»„çš„é•¿åº¦ï¼Œæ˜¯ä¸€ä¸ª32ä½æ•´æ•°</p><pre><code class="js">const clothing = [&#39;shoes&#39;, &#39;shirts&#39;, &#39;socks&#39;, &#39;sweaters&#39;];console.log(clothing.length);// expected output: 4</code></pre><h3 id="array-map"><a href="#array-map" class="headerlink" title="array.map"></a>array.map</h3><p>æ ¹æ®éå†å‡½æ•°çš„è¿”å›å€¼è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</p><pre><code class="js">const array1 = [1, 4, 9, 16];// pass a function to mapconst map1 = array1.map(x =&gt; x * 2);console.log(map1);// expected output: Array [2, 8, 18, 32]</code></pre><h3 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of"></a>Array.of</h3><p>æ ¹æ®å‚æ•°åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸ç›´æ¥newçš„å·®åˆ«åœ¨äºå¯¹æ•´æ•°çš„å¤„ç†ï¼Œä¼ å…¥æ•°å­—è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªåŒ…å«è¯¥æ•°å­—çš„æ•°ç»„è€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºè¯¥æ•°å­—çš„ç©ºæ•°ç»„</p><pre><code class="js">Array.of(7);       // [7] Array.of(1, 2, 3); // [1, 2, 3]Array(7);          // [ , , , , , , ]Array(1, 2, 3);    // [1, 2, 3]</code></pre><h3 id="array-pop"><a href="#array-pop" class="headerlink" title="array.pop"></a>array.pop</h3><p>å¼¹å‡ºæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ ï¼ŒåŒæ—¶ä¼šæ”¹å˜åŸæ•°ç»„</p><pre><code class="js">const plants = [&#39;broccoli&#39;, &#39;cauliflower&#39;, &#39;cabbage&#39;, &#39;kale&#39;, &#39;tomato&#39;];console.log(plants.pop());// expected output: &quot;tomato&quot;console.log(plants);// expected output: Array [&quot;broccoli&quot;, &quot;cauliflower&quot;, &quot;cabbage&quot;, &quot;kale&quot;]</code></pre><h3 id="array-push"><a href="#array-push" class="headerlink" title="array.push"></a>array.push</h3><p>å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›æ·»åŠ åçš„æ•°ç»„é•¿åº¦</p><pre><code class="js">const animals = [&#39;pigs&#39;, &#39;goats&#39;, &#39;sheep&#39;];const count = animals.push(&#39;cows&#39;);console.log(count);// expected output: 4console.log(animals);// expected output: Array [&quot;pigs&quot;, &quot;goats&quot;, &quot;sheep&quot;, &quot;cows&quot;]animals.push(&#39;chickens&#39;, &#39;cats&#39;, &#39;dogs&#39;);console.log(animals);// expected output: Array [&quot;pigs&quot;, &quot;goats&quot;, &quot;sheep&quot;, &quot;cows&quot;, &quot;chickens&quot;, &quot;cats&quot;, &quot;dogs&quot;]</code></pre><blockquote><p>å¯ä»¥ç”¨è¿™ä¸ªæ¨¡æ‹Ÿcancatï¼Œä½†æ˜¯æ²¡ä»€ä¹ˆç”¨å°±æ˜¯äº†</p></blockquote><pre><code class="js">var vegetables = [&#39;parsnip&#39;, &#39;potato&#39;];var moreVegs = [&#39;celery&#39;, &#39;beetroot&#39;];// Merge the second array into the first one// Equivalent to vegetables.push(&#39;celery&#39;, &#39;beetroot&#39;);Array.prototype.push.apply(vegetables, moreVegs);console.log(vegetables); // [&#39;parsnip&#39;, &#39;potato&#39;, &#39;celery&#39;, &#39;beetroot&#39;]</code></pre><h3 id="array-reduce"><a href="#array-reduce" class="headerlink" title="array.reduce"></a>array.reduce</h3><p>æ‰§è¡Œä¼ å…¥çš„æ–¹æ³•æœ€ç»ˆè¿”å›ä¸€ä¸ªå€¼ï¼Œä¼ å…¥çš„æ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯ï¼šç´¯åŠ å™¨(acc)ï¼Œå½“å‰éå†çš„å€¼(cur)ï¼Œå½“å‰éå†çš„ä¸‹æ ‡(idx)ï¼Œæ•´ä¸ªæ•°ç»„(src)ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåˆå§‹çš„é»˜è®¤å€¼ï¼Œå¯ä»¥ä¸åŠ </p><pre><code class="js">const array1 = [1, 2, 3, 4];const reducer = (accumulator, currentValue) =&gt; accumulator + currentValue;// 1 + 2 + 3 + 4console.log(array1.reduce(reducer));// expected output: 10// 5 + 1 + 2 + 3 + 4console.log(array1.reduce(reducer, 5));// expected output: 15</code></pre><h3 id="array-reduceRight"><a href="#array-reduceRight" class="headerlink" title="array.reduceRight"></a>array.reduceRight</h3><p>å’Œä¸Šè¾¹ä¸€æ ·ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹éå†</p><pre><code class="js">const array1 = [[0, 1], [2, 3], [4, 5]].reduceRight(  (accumulator, currentValue) =&gt; accumulator.concat(currentValue));console.log(array1);// expected output: Array [4, 5, 2, 3, 0, 1]</code></pre><h3 id="array-reverse"><a href="#array-reverse" class="headerlink" title="array.reverse"></a>array.reverse</h3><p>åè½¬æ•´ä¸ªæ•°ç»„`</p><pre><code class="js">const array1 = [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;];console.log(&#39;array1:&#39;, array1);// expected output: &quot;array1:&quot; Array [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]const reversed = array1.reverse();console.log(&#39;reversed:&#39;, reversed);// expected output: &quot;reversed:&quot; Array [&quot;three&quot;, &quot;two&quot;, &quot;one&quot;]// Careful: reverse is destructive -- it changes the original array.console.log(&#39;array1:&#39;, array1);// expected output: &quot;array1:&quot; Array [&quot;three&quot;, &quot;two&quot;, &quot;one&quot;]</code></pre><blockquote><p>æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</p></blockquote><h3 id="array-shift"><a href="#array-shift" class="headerlink" title="array.shift"></a>array.shift</h3><p>å¼¹å‡ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¼šæ”¹å˜åŸæ•°ç»„çš„é•¿åº¦</p><pre><code class="js">const array1 = [1, 2, 3];const firstElement = array1.shift();console.log(array1);// expected output: Array [2, 3]console.log(firstElement);// expected output: 1</code></pre><h3 id="array-slice"><a href="#array-slice" class="headerlink" title="array.slice"></a>array.slice</h3><p>è·å¾—æ•°ç»„æŸä¸€æ®µçš„<strong>æµ…æ‹·è´</strong>ï¼Œç”¨æ³•ï¼š<code>arr.slice([begin[, end]])</code></p><pre><code class="js">const animals = [&#39;ant&#39;, &#39;bison&#39;, &#39;camel&#39;, &#39;duck&#39;, &#39;elephant&#39;];console.log(animals.slice(2));// expected output: Array [&quot;camel&quot;, &quot;duck&quot;, &quot;elephant&quot;]console.log(animals.slice(2, 4));// expected output: Array [&quot;camel&quot;, &quot;duck&quot;]console.log(animals.slice(1, 5));// expected output: Array [&quot;bison&quot;, &quot;camel&quot;, &quot;duck&quot;, &quot;elephant&quot;]</code></pre><h3 id="array-some"><a href="#array-some" class="headerlink" title="array.some"></a>array.some</h3><p>å’Œ<code>array.every</code>ç›¸åï¼Œä¼ å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œä¼šéå†è¯¥æ•°ç»„åˆ°æ–¹æ³•é‡Œï¼Œæ–¹æ³•è¿”å›<code>true</code>æˆ–è€…<code>false</code>ï¼Œåªè¦æœ‰ä¸€ä¸ªæ˜¯<code>true</code>å°±è¿”å›<code>true</code>ï¼Œç”¨äºæ£€æµ‹è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æœ‰ç¬¦åˆæŸæ¡ä»¶çš„å…ƒç´ </p><pre><code class="js">const array = [1, 2, 3, 4, 5];// checks whether an element is evenconst even = (element) =&gt; element % 2 === 0;console.log(array.some(even));// expected output: true</code></pre><h3 id="array-sort"><a href="#array-sort" class="headerlink" title="array.sort"></a>array.sort</h3><p>ç”¨äºè¿›è¡Œæ•°ç»„æ’åºï¼Œå¯ä»¥ä¼ å…¥è‡ªå®šä¹‰æ’åºå‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è½¬æˆ<code>UTF-16</code>æ¯”è¾ƒé¦–å­—ç¬¦è¿›è¡Œæ’åºçš„ï¼Œä¼šæ”¹å˜åŸæ•°ç»„</p><pre><code class="js">const months = [&#39;March&#39;, &#39;Jan&#39;, &#39;Feb&#39;, &#39;Dec&#39;];months.sort();console.log(months);// expected output: Array [&quot;Dec&quot;, &quot;Feb&quot;, &quot;Jan&quot;, &quot;March&quot;]const array1 = [1, 30, 4, 21, 100000];array1.sort();console.log(array1);// expected output: Array [1, 100000, 21, 30, 4]var numbers = [4, 2, 5, 1, 3];numbers.sort(function(a, b) {  return a - b;  // å¦‚æœå¤§äº0å°†aåç§»ï¼Œå¦‚æœå°äº0å°†båç§»});console.log(numbers);// [1, 2, 3, 4, 5]</code></pre><h3 id="array-splice"><a href="#array-splice" class="headerlink" title="array.splice"></a>array.splice</h3><p>ç”¨äºæ›¿æ¢æ•°ç»„ä¸­æŸä¸€éƒ¨åˆ†</p><pre><code class="js">const months = [&#39;Jan&#39;, &#39;March&#39;, &#39;April&#39;, &#39;June&#39;];months.splice(1, 0, &#39;Feb&#39;);// inserts at index 1console.log(months);// expected output: Array [&quot;Jan&quot;, &quot;Feb&quot;, &quot;March&quot;, &quot;April&quot;, &quot;June&quot;]months.splice(4, 1, &#39;May&#39;);// replaces 1 element at index 4console.log(months);// expected output: Array [&quot;Jan&quot;, &quot;Feb&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;]</code></pre><h3 id="array-toString"><a href="#array-toString" class="headerlink" title="array.toString"></a>array.toString</h3><p>å°†æ•°ç»„è½¬åŒ–æˆå­—ç¬¦ä¸²</p><pre><code class="js">const array1 = [1, 2, &#39;a&#39;, &#39;1a&#39;];console.log(array1.toString());// expected output: &quot;1,2,a,1a&quot;</code></pre><h3 id="array-unshift"><a href="#array-unshift" class="headerlink" title="array.unshift"></a>array.unshift</h3><p>å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„å¼€å¤´ï¼Œå¹¶è¿”å›æ”¹å˜åçš„æ•°ç»„é•¿åº¦</p><pre><code class="js">const array1 = [1, 2, 3];console.log(array1.unshift(4, 5));// expected output: 5console.log(array1);// expected output: Array [4, 5, 1, 2, 3]</code></pre><h3 id="array-keys"><a href="#array-keys" class="headerlink" title="array.keys"></a>array.keys</h3><p>è¿”å›ä¸€ä¸ªæ•°ç»„ä¸‹æ ‡çš„è¿­ä»£å™¨</p><pre><code class="js">const array1 = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];const iterator = array1.keys();for (const key of iterator) {  console.log(key);}// expected output: 0// expected output: 1// expected output: 2</code></pre><blockquote><p>å¯¹äºç©ºå…ƒç´ Array.keyså’ŒObject.keysä¸å¤ªä¸€æ ·</p></blockquote><pre><code class="js">var arr = [&#39;a&#39;, , &#39;c&#39;];var sparseKeys = Object.keys(arr);var denseKeys = [...arr.keys()];console.log(sparseKeys); // [&#39;0&#39;, &#39;2&#39;]console.log(denseKeys);  // [0, 1, 2]</code></pre><h3 id="array-values"><a href="#array-values" class="headerlink" title="array.values"></a>array.values</h3><p>è¿”å›ä¸€ä¸ªæ•°ç»„å†…å®¹çš„è¿­ä»£å™¨</p><pre><code class="js">const array1 = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];const iterator = array1.values();for (const value of iterator) {  console.log(value);}// expected output: &quot;a&quot;// expected output: &quot;b&quot;// expected output: &quot;c&quot;var a = [&#39;w&#39;, &#39;y&#39;, &#39;k&#39;, &#39;o&#39;, &#39;p&#39;]; var iterator = a.values();console.log(iterator.next().value); // w console.log(iterator.next().value); // y console.log(iterator.next().value); // k console.log(iterator.next().value); // o console.log(iterator.next().value); // p</code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸‹ï¼‰å­¦ä¹ ç¬”è®°</title>
    <link href="undefined2020/06/js2/"/>
    <url>2020/06/js2/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><h3 id="prompt"><a href="#prompt" class="headerlink" title="prompt"></a>prompt</h3><p>ç”¨æ³•<code>var input = prompt(text,defaultText)</code></p><blockquote><p>text     å¯é€‰ã€‚è¦åœ¨å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºçš„çº¯æ–‡æœ¬ï¼ˆè€Œä¸æ˜¯ HTML æ ¼å¼çš„æ–‡æœ¬ï¼‰ã€‚<br>defaultText     å¯é€‰ã€‚é»˜è®¤çš„è¾“å…¥æ–‡æœ¬ã€‚</p></blockquote><h3 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h3><p>å¦‚æœä¸¤è¾¹ä»»æ„ä¸€è¾¹å‡ºç° <code>true</code> æˆ–è€… <code>false</code> ä½¿ç”¨ <strong>===</strong></p><p>å¦‚æœä¸¤è¾¹ä»»æ„ä¸€è¾¹å¯èƒ½æ˜¯ç‰¹å®šå€¼<code>0,&quot;&quot;, []</code> ä½¿ç”¨ <strong>===</strong></p><p>å‰©ä¸‹çš„æ‰€æœ‰æƒ…å†µ,ä½¿ç”¨ <strong>==</strong></p><p>å¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´,æ¯”è¾ƒä»…ä»…æ˜¯æ¯”è¾ƒå…¶å¼•ç”¨æ˜¯å¦æ˜¯åŒä¸€ä¸ª,å¦å¤–åœ¨å’Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶,æ•°ç»„ä¼šè‡ªåŠ¨è½¬æˆå­—ç¬¦ä¸²</p><pre><code class="js">var a = [1,2,3]var b = [1,2,3]var c = &quot;1,2,3&quot;console.log(a == b) // falseconsole.log(a == c) // trueconsole.log(b == c) // true</code></pre><h3 id="switchè¯­å¥"><a href="#switchè¯­å¥" class="headerlink" title="switchè¯­å¥"></a>switchè¯­å¥</h3><pre><code class="js">switch(a) {  case 2:  case 10:    // 2 æˆ–è€… 10 æ‰§è¡Œ    break;  default:    // æ¡ä»¶éƒ½ä¸æ»¡è¶³é»˜è®¤æ‰§è¡Œ}</code></pre><h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><h3 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h3><p>let å°½é‡å°†å˜é‡å£°æ˜æ”¾åœ¨ä»£ç å—å¼€å§‹,é¿å…åœ¨(Temproal Dead Zone, TDZ)<strong>ä¸´æ—¶æ­»äº¡åŒº</strong>ä½¿ç”¨è€ŒæŠ¥é”™</p><blockquote><p>å°½é‡ä½¿ç”¨forâ€¦let,åœ¨æ¯æ¬¡å¾ªç¯ä¸­éƒ½ä¼šå£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡,ç”Ÿæˆäº†ä¸€ä¸ªé—­åŒ…ã€‚é¿å…foré‡Œè¾¹çš„å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™å¼•ç”¨ä¸åˆ°æ­£ç¡®çš„å˜é‡ã€‚</p></blockquote><p>constå£°æ˜,ç›¸å¯¹äºä¿æŠ¤å…¶ä¸­çš„å†…å®¹æ›´æ³¨é‡å…¶è¯­æ„æ‰€å¸¦æ¥çš„è§„èŒƒæ€§</p><p>å¦‚æœæŠŠæ–¹æ³•å®šä¹‰åœ¨{}å†…,é‚£ä¹ˆåœ¨å—å¤–æ‰§è¡Œä¼šæŠ¥ReferenceError</p><h3 id="spread-restè§£æ„é‡æ„"><a href="#spread-restè§£æ„é‡æ„" class="headerlink" title="spread/restè§£æ„é‡æ„"></a>spread/restè§£æ„é‡æ„</h3><p>spread/rest<code>...</code>æ”¾åœ¨æ•°ç»„å‰ç”¨äºå±•å¼€æ•°ç»„,æ”¾åœ¨å˜é‡å‰å°±æ˜¯æ”¶é›†å˜é‡åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ,ä¾‹å¦‚ <code>function a(...arg){} a(a,b,c) -&gt; arg = [a,b,c]</code></p><p>è§£æ„ <code>var [a, b, c] = foo()</code> å¦‚æœfooè¿”å›çš„æ˜¯ä¸€ä¸ªé•¿åº¦ä¸ºä¸‰çš„æ•°ç»„å…¶å†…å®¹å°†ä¼šè¢«ä¾æ¬¡èµ‹å€¼ç»™abc</p><p>å¯¹è±¡å±æ€§å¤åˆ¶æ¨¡å¼<code>var {a, b, c} = foo()</code>è¿™é‡Œçœç•¥çš„å…¶å®æ˜¯<code>a:, b:, c:</code>,å¯¹è±¡çš„å±æ€§åè¦å’Œå‡½æ•°è¿”å›çš„å±æ€§åç›¸åŒ,ç„¶åå°†å€¼ä¸€ä¸€èµ‹å€¼ç»™å±æ€§å€¼<code>var {a: x, b: y, c: z} = foo()</code>æœ€åä½¿ç”¨çš„æ˜¯<code>xyz</code>è€Œä¸æ˜¯<code>abc</code></p><blockquote><p>å¯¹äºè¿™ä¸ªå½¢å¼,å¦‚æœçœç•¥å£°æ˜ç¬¦å°±éœ€è¦ç”¨å°æ‹¬å·æ‹¬èµ·æ¥<code>({a, b, c} = foo())</code></p></blockquote><p>ä½¿ç”¨<strong>å¯¹è±¡å±æ€§åçš„è®¡ç®—å±æ€§</strong><code>var which = &#39;w&#39;; o1 = {which: &#39;w&#39;}; =&gt; {which: &#39;w&#39;}   o2 = {[which]: &#39;w&#39;}; =&gt; {w: &#39;w&#39;}</code>ä½¿ç”¨ä¸­æ‹¬å·å³å¯ä½¿ç”¨å˜é‡é‡Œè¾¹çš„å†…å®¹ä½œä¸ºå±æ€§å</p><p>ç®€å•çš„äº¤æ¢ä¸¤ä¸ªå…ƒç´ <code>[a, b] = [b, a]</code></p><p>å…è®¸å‡ºç°å¤šæ¬¡åˆ—å‡ºåŒä¸€ä¸ªæºå±æ€§<code>{a: {x: X, x: Y}, a} = {a: {x: 1}} =&gt; X == Y == 1, a = {x :1}</code></p><blockquote><p>ä¸å¿…éƒ½å†™åœ¨ä¸€è¡Œé‡Œ,è§£æ„çš„ç›®çš„ä¸æ˜¯ä¸ºäº†æ‰“å­—æ›´å°‘,è€Œæ˜¯ä¸ºäº†å¯è¯»æ€§æ›´å¼º</p></blockquote><p>èµ‹å€¼çš„æ—¶å€™ç”¨ä¸åˆ°çš„ä¸œè¥¿å¯ä»¥æŠ›å¼ƒ<code>[,a,b] = [1, 2, 3] =&gt; a = 2, b = 3</code></p><p>èµ‹å€¼çš„æ—¶å€™å¤šä½™çš„ä¸œè¥¿ä¼šèµ‹å€¼undefined<code>[a, b] = [1] =&gt; a = 1, b = undefined</code></p><p>èµ‹å€¼çš„æ—¶å€™å¯ä»¥ä½¿ç”¨spread/rest<code>...</code>è¿›è¡Œæ”¶é›†æ“ä½œ<code>[...a,b] = [1, 2, 3] =&gt; a = [1, 2], b = 3</code></p><p>èµ‹å€¼çš„æ—¶å€™å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼<code>{a, b: WW = 20} = {a: 10}  =&gt; a = 10, WW = 20</code></p><p>èµ‹å€¼çš„æ—¶å€™å¯ä»¥åµŒå¥—ç»“æ„</p><p>åœ¨å½¢å‚ä¸­ä½¿ç”¨è¿™ä¸ªå°±æ¥è¿‘äº†å‘½åå‚æ•°,å¾—åˆ°äº†ä»»æ„ä½ç½®çš„å¯é€‰å‚æ•°åŠŸèƒ½</p><p>è®¾ç½®é»˜è®¤å‚æ•°<code>{x = 10} = {}</code>,</p><blockquote><p>æ¯”è¾ƒä¸€ä¸‹<code>{y} = {y: 10}</code>ä¸<code>{x = 10} = {}</code><br>å¯¹äºxè¿™ç§æ–°å¼çš„ç”¨æ³•æ¥è¯´ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çœç•¥æˆ–è€…æ˜¯undefinedï¼Œå°±ä¼šåº”ç”¨{}ç©ºå¯¹è±¡é»˜è®¤å€¼ï¼Œç„¶åï¼Œåœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ä¼ å…¥çš„ä»»ä½•å€¼â€”â€”æˆ–è€…æ˜¯é»˜è®¤{}æˆ–è€…æ˜¯ä½ ä¼ å…¥çš„ä»»ä½•å€¼ï¼Œéƒ½æ˜¯ç”¨<code>{x = 10}</code>è¿›è¡Œè§£æ„ï¼Œè¿™ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨xå±æ€§ï¼Œå¦‚æœæ²¡æœ‰æˆ–è€…æ˜¯undefinedï¼Œå°±ä¼šè‡ªåŠ¨èµ‹å€¼ä¸º10ï¼Œæ‰€ä»¥xä¸è®ºä¼ å…¥ä»€ä¹ˆï¼Œåªè¦æ²¡æŒ‡å®šxå°±æ˜¯10ï¼Œyåˆ™åœ¨æœªä¼ å…¥æˆ–è€…ä¼ å…¥undefinedå—¯å—¯æ—¶å€™æ‰ä¼šèµ‹å€¼ä¸º10</p></blockquote><h3 id="å¯¹è±¡å­—é¢é‡æ‹“å±•"><a href="#å¯¹è±¡å­—é¢é‡æ‹“å±•" class="headerlink" title="å¯¹è±¡å­—é¢é‡æ‹“å±•"></a>å¯¹è±¡å­—é¢é‡æ‹“å±•</h3><p>ç®€æ´å±æ€§<code>{x}</code></p><p>ç®€æ´æ–¹æ³•<code>{x(){}}</code></p><blockquote><p>è¿™ä¸ªæ“ä½œä¼šç”Ÿæˆä¸€ä¸ªåŒ¿åçš„å‡½æ•°,å¦‚æœéœ€è¦é€’å½’è¯·ä¸è¦ä½¿ç”¨</p></blockquote><h3 id="æ¨¡æ¿å­—é¢é‡"><a href="#æ¨¡æ¿å­—é¢é‡" class="headerlink" title="æ¨¡æ¿å­—é¢é‡"></a>æ¨¡æ¿å­—é¢é‡</h3><p>ä½¿ç”¨<code>...${foo(`${name}s`)}</code></p><h4 id="æ ‡ç­¾æ¨¡æ¿å­—é¢é‡"><a href="#æ ‡ç­¾æ¨¡æ¿å­—é¢é‡" class="headerlink" title="æ ‡ç­¾æ¨¡æ¿å­—é¢é‡"></a>æ ‡ç­¾æ¨¡æ¿å­—é¢é‡</h4><pre><code class="js">  function foo(strings, ...args) {    console.log(strings)    console.log(args)  }  var desc = &quot;awesome&quot;  foo`Every thing is ${desc}!`  // [&quot;Every this is &quot;, &quot;!&quot;]  // [&quot;awesome&quot;]</code></pre><p>é…åˆString.reduceéå†å­—ç¬¦ä¸²å¯ä»¥è¾¾æˆæœ¬åœ°åŒ–ä¹‹ç±»çš„åŠŸèƒ½</p><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>åˆç†ä½¿ç”¨ï¼Œå‡½æ•°è¶ŠçŸ­è¶Šé€‚åˆç”¨ï¼Œå‡½æ•°é•¿äº†åè€Œä¼šä½¿å‡½æ•°è¾¹ç•Œæ¨¡ç³Š</p><p>ä¸»è¦çš„åŠŸèƒ½æ˜¯ä¸ºäº†thisçš„è§„èŒƒåŒ–è€Œä¸æ˜¯å‡å°‘ä»£ç é‡</p><p>å°½å¯èƒ½å‡å°‘éå¿…è¦æƒ…å†µä¸‹çš„ç®­å¤´å‡½æ•°ä½¿ç”¨</p><h3 id="for-â€¦-of-å¾ªç¯"><a href="#for-â€¦-of-å¾ªç¯" class="headerlink" title="for â€¦ of å¾ªç¯"></a>for â€¦ of å¾ªç¯</h3><p><code>for ... in</code> éå†çš„æ—¶å€™éå†çš„æ˜¯ indexï¼ˆä»0å¼€å§‹ï¼‰ <code>for ... of</code>éå†çš„æ˜¯å€¼</p><p>é€‚ç”¨æ‰€æœ‰å¸¦è¿­ä»£å™¨çš„å˜é‡</p><p>è‡ªå¸¦è¿­ä»£å™¨çš„æœ‰Arrays,Strings,Generators,Collections/TypedArrays</p><p><code>...</code>å¯ä»¥æ˜¯èµ‹å€¼è¡¨è¾¾å¼ä¹Ÿå¯ä»¥æ˜¯å£°æ˜</p><blockquote><p>Object ä¸å¯è¿­ä»£æ‰€ä»¥ç”¨ä¸äº†ï¼Œéè¦ç”¨è‡ªå·±å†™ä¸ª<code>[Symbol.iterator]</code>æŒ‚prototypeä¸Šæˆ–è€…è‡ªå·±extendä¸€ä¸ª</p></blockquote><h3 id="æ­£åˆ™åŒ¹é…"><a href="#æ­£åˆ™åŒ¹é…" class="headerlink" title="æ­£åˆ™åŒ¹é…"></a>æ­£åˆ™åŒ¹é…</h3><h4 id="å®šç‚¹æ ‡è¯†"><a href="#å®šç‚¹æ ‡è¯†" class="headerlink" title="å®šç‚¹æ ‡è¯†"></a>å®šç‚¹æ ‡è¯†</h4><p><code>re = /d/ re.lastIndex</code></p><p>å®šç‚¹å®šä½<code>/f../y</code>ä¼šä»lastIndexå¼€å§‹æœç´¢,ä¸ä¼šæ›´æ–°lastIndex</p><p>gæ¨¡å¼ä½¿ç”¨exec ä¼šæ›´æ–°lastIndex</p><p>^ æ€»æ˜¯æŒ‡å‘è¾“å…¥èµ·å§‹å¤„çš„é”šç‚¹,ä¸å—lastIndexçš„å½±å“</p><p>y åŠ ä¸Š ^ åŠ ä¸ŠlastIndex &gt; 0 æ˜¯ä¸€ä¸ªä¸å…¼å®¹çš„ç»„åˆ,æ€»æ˜¯ä¼šå¯¼è‡´å¤±è´¥</p><h4 id="flags"><a href="#flags" class="headerlink" title="flags"></a>flags</h4><p><code>re = /foo/ig re.flags =&gt; gi</code>æŸ¥çœ‹åº”ç”¨çš„å“ªäº›æ ‡è¯†</p><p>é¡ºåºæ€»æ˜¯<code>gimuy</code></p><h3 id="æ•°å­—å­—é¢é‡æ‰©å±•"><a href="#æ•°å­—å­—é¢é‡æ‰©å±•" class="headerlink" title="æ•°å­—å­—é¢é‡æ‰©å±•"></a>æ•°å­—å­—é¢é‡æ‰©å±•</h3><p><code>doc = 12</code></p><p><code>oct = 0o52</code></p><p><code>hex = 0x2a</code></p><p><code>bin = 0b101010</code></p><p><code>a = 42 a.toString(10 || 8 || 6 || 2)</code>å¯ä»¥è¿›è¡Œè½¬æ¢</p><h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p><code>var snowman = &#39;\u2603&#39;</code> \uè½¬ä¹‰</p><p><code>var gclef = &#39;\uD834\uDD1E&#39;</code> æ›¿ä»£å¯¹</p><p><code>var gclef = &#39;\u{1D11E}&#39;</code> ç ç‚¹è½¬ä¹‰</p><h4 id="ç²¾ç¡®åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦"><a href="#ç²¾ç¡®åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦" class="headerlink" title="ç²¾ç¡®åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦"></a>ç²¾ç¡®åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦</h4><p><code>[...str].length</code></p><p><code>Array.from(str).length</code></p><h3 id="ç¬¦å·Symbol"><a href="#ç¬¦å·Symbol" class="headerlink" title="ç¬¦å·Symbol"></a>ç¬¦å·Symbol</h3><p>ä½¿ç”¨ä¾‹å­<code>var sym = Symbol(&#39;something&#39;)</code></p><blockquote><p>ä¸åº”è¯¥ä½¿ç”¨new</p></blockquote><p>ä½¿ç”¨<code>typeof</code>è¯†åˆ«</p><p>è·å–å…¨å±€ç¬¦å·ï¼ˆå¦‚æœå…¨å±€ä¸å­˜åœ¨åˆ™æ–°å»ºä¸€ä¸ªæ”¾åœ¨å…¨å±€ï¼‰<code>Symbol.for(&quot;exec.name&quot;)</code></p><p>é€šè¿‡ç¬¦å·è·å–å­—ç¬¦ä¸²<code>Symbol.keyFor(sym)</code></p><p>è®¾ç½®ä¸ºå¯¹è±¡çš„å±æ€§ä¹‹åä¸å¯æšä¸¾,ä½†æ˜¯å¯ä»¥é€šè¿‡<code>Object.getOwnPropertySymbols(sym)</code>è·å–</p><h3 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h3><p>å¯ä»¥ç”¨æ¥æ»¡è¶³æ¶ˆè´¹è€…ç”Ÿäº§è€…æ¨¡å‹</p><p>å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªnext()</p><p>å¯é€‰return()ç”¨äºæ¶ˆè´¹è€…å‘ç”Ÿäº§è€…å‘é€æ‰€æœ‰æ¶ˆè´¹è¿‡ç¨‹å®Œæˆçš„ä¿¡å·,ç”Ÿäº§è€…åº”è¿›è¡Œé”€æ¯ç¨‹åº</p><p>å¯é€‰throw()ç”¨äºå‘ç”Ÿäº§è€…å‘é€é”™è¯¯ä¿¡å·,ç»ˆæ­¢ç”Ÿäº§</p><p>for of å¯ä»¥æ¶ˆè´¹è¿­ä»£å™¨,ä½¿ç”¨breaké€€å‡ºä¼šè§¦å‘return</p><p>é€šè¿‡spread/restè¿ç®—ç¬¦å¯ä»¥æ¶ˆè€—è¿­ä»£å™¨<code>it = arr[Symbol.iterator]() var [x, y] = it; var [z, ...w] = it;</code> itæœ€ç»ˆä¼šè¢«æ¶ˆè€—å…‰</p><h3 id="ç”Ÿæˆå™¨"><a href="#ç”Ÿæˆå™¨" class="headerlink" title="ç”Ÿæˆå™¨"></a>ç”Ÿæˆå™¨</h3><p><code>function *foo() {yield 1;} it = foo() it.next() // value 1</code> nexté‡Œè¾¹çš„å‚æ•°ä¼šæ›¿æ¢æ‰ yieldåè¾¹çš„ä¸œè¥¿</p><p>å°±æ˜¯ç”¨è¿­ä»£å™¨æ¥æ§åˆ¶ç”Ÿæˆå™¨</p><p>å¯ä»¥ç”¨throw()é…åˆtry catchå®ç°é”™è¯¯çš„åŒå‘æˆ– å†…å¤–åŒå‘ä¼ é€’</p><p>æ¯æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šæ˜¯ä¸€ä¸ªæ–°çš„ç”Ÿæˆå™¨</p><p>åŠ * </p><h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p><code>import</code> å’Œ <code>export</code> å¿…é¡»åœ¨ä½¿ç”¨å®ƒä»¬çš„æœ€é¡¶å±‚ä½œç”¨åŸŸ</p><h4 id="å‘½åå¯¼å‡º"><a href="#å‘½åå¯¼å‡º" class="headerlink" title="å‘½åå¯¼å‡º"></a>å‘½åå¯¼å‡º</h4><pre><code class="js">// æ–¹å¼ä¸€export var bar = [1,3,4]; export function foo() {}// æ–¹å¼äºŒvar bar = []; function foo() {}; export {bar, foo}</code></pre><h4 id="å¯¼å‡ºçš„æ˜¯åœ¨æ¨¡å—å†…çš„æœ€åçš„å€¼"><a href="#å¯¼å‡ºçš„æ˜¯åœ¨æ¨¡å—å†…çš„æœ€åçš„å€¼" class="headerlink" title="å¯¼å‡ºçš„æ˜¯åœ¨æ¨¡å—å†…çš„æœ€åçš„å€¼"></a>å¯¼å‡ºçš„æ˜¯åœ¨æ¨¡å—å†…çš„æœ€åçš„å€¼</h4><pre><code class="js">var a = 1export { a }a = 2// -&gt; æœ€åå¯¼å‡ºçš„æ˜¯2è€Œä¸æ˜¯1</code></pre><h4 id="å¯¼å‡ºå¯ä»¥æŒ‡å®šåç§°"><a href="#å¯¼å‡ºå¯ä»¥æŒ‡å®šåç§°" class="headerlink" title="å¯¼å‡ºå¯ä»¥æŒ‡å®šåç§°"></a>å¯¼å‡ºå¯ä»¥æŒ‡å®šåç§°</h4><pre><code class="js">var a = 1export { a as b }// -&gt; åªæœ‰bå¯ä»¥è¢«å¯¼å…¥,aè¢«éšè—</code></pre><blockquote><p>å¯¼å…¥ä¸æ˜¯èµ‹å€¼æ“ä½œ,è€Œæ˜¯ç±»ä¼¼æŒ‡é’ˆä¸€æ ·çš„ç»‘å®š<br>es6å€¾å‘äºä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªexport,å¯ä»¥ä½¿importå˜å¾—ç®€å•</p></blockquote><h4 id="é»˜è®¤å¯¼å‡ºçš„ä¸¤ç§å½¢å¼"><a href="#é»˜è®¤å¯¼å‡ºçš„ä¸¤ç§å½¢å¼" class="headerlink" title="é»˜è®¤å¯¼å‡ºçš„ä¸¤ç§å½¢å¼"></a>é»˜è®¤å¯¼å‡ºçš„ä¸¤ç§å½¢å¼</h4><pre><code class="js">export default function foo() {} // -&gt; å¯¼å‡ºçš„æ˜¯è¡¨è¾¾å¼çš„ç»‘å®šfunction foo() {} export default foo // -&gt; åŒä¸Š,å³`export default`æ¥å—çš„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼function foo() {} export { foo as default } // -&gt; å¯¼å‡ºçš„æ˜¯æ ‡è¯†ç¬¦çš„ç»‘å®š,ä¹Ÿå°±æ˜¯å¯¼å‡ºfooåœ¨æ–‡ä»¶ä¸­æœ€åçš„å€¼</code></pre><blockquote><p>ä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªdefault</p></blockquote><pre><code class="js">// æ–¹å¼ä¸€export default function foo() {}export function bar() {}// æ–¹å¼äºŒfunction foo() {}function bar() {}export { foo as default, bar }</code></pre><h4 id="å¯ä»¥å¯¼å‡ºåˆ«çš„æ¨¡å—çš„å¯¼å‡º-gt-æ„Ÿè§‰å¯ä»¥ç”¨æ¥é›†æˆæ¨¡å—-ä¹Ÿæ²¡å•¥ç”¨"><a href="#å¯ä»¥å¯¼å‡ºåˆ«çš„æ¨¡å—çš„å¯¼å‡º-gt-æ„Ÿè§‰å¯ä»¥ç”¨æ¥é›†æˆæ¨¡å—-ä¹Ÿæ²¡å•¥ç”¨" class="headerlink" title="å¯ä»¥å¯¼å‡ºåˆ«çš„æ¨¡å—çš„å¯¼å‡º -&gt; æ„Ÿè§‰å¯ä»¥ç”¨æ¥é›†æˆæ¨¡å—,,ä¹Ÿæ²¡å•¥ç”¨"></a>å¯ä»¥å¯¼å‡ºåˆ«çš„æ¨¡å—çš„å¯¼å‡º -&gt; æ„Ÿè§‰å¯ä»¥ç”¨æ¥é›†æˆæ¨¡å—,,ä¹Ÿæ²¡å•¥ç”¨</h4><pre><code class="js">export { foo, bar } from &#39;baz&#39;export { foo as FOO, bar as BAR } from &#39;baz&#39;export * from &#39;baz&#39;</code></pre><p>å¯¼å…¥æ¨¡å—å¦‚æœæœ‰default<code>import foo from &quot;baz&quot;</code>å¼•å…¥é‚£ä¸ªdefault</p><p>å¯¹å¯¼å…¥è¿›è¡Œé‡å‘½å<code>import { foo as Foo } from &quot;baz&quot; -&gt; Foo()</code></p><p>å¯¹å¤åˆå¯¼å…¥<code>import FOOFN, { bar, baz } from &quot;baz&quot;</code></p><p>å‘½åç©ºé—´å¯¼å…¥<code>import * as foo from &quot;foo&quot; -&gt; foo.bar()</code>å½“å‰åªèƒ½å…¨éƒ¨å¯¼å…¥</p><p>å¦‚æœæœ‰é»˜è®¤å¯¼å‡º,å°±æ˜¯<code>foo.default()</code></p><p>é»˜è®¤+å‘½åç©ºé—´<code>import foofn, * as hello from &quot;world&quot;</code> <code>foofn -&gt; hello.default</code> å°½é‡ä¸è¦ç”¨è¿™ç§è¿·æƒ‘æ“ä½œ</p><p>æ‰€æœ‰å¯¼å…¥çš„ç»‘å®šéƒ½æ˜¯åªè¯»çš„,æ‰€æœ‰çš„èµ‹å€¼æ“ä½œéƒ½ä¼šæŠ¥é”™</p><p>æ‰€æœ‰å¯¼å…¥éƒ½ä¼šè¢«æå‡,å…¨å±€è®¿é—®</p><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><p>ä½¿ç”¨<code>class</code>å£°æ˜ç±»,ç±»åå¤§å†™</p><pre><code class="js">class Foo {  constructor(a, b) {    this.x = a;    this.y = b;  }  gimmeXY() {    return this.x * this.y  }}</code></pre><p>ä¸èƒ½ä½¿ç”¨callæ‰€ä»¥åªèƒ½é€šè¿‡newå®ä¾‹åŒ–</p><p>ç±»ä¸èƒ½è¢«æå‡,æ‰€ä»¥å®ä¾‹åŒ–ä¹‹å‰å¿…é¡»å£°æ˜</p><p>å£°æ˜ä¸€ä¸ªclasså¹¶æ²¡æœ‰åˆ›å»ºä¸€ä¸ªåŒåçš„å…¨å±€å¯¹è±¡å±æ€§</p><p>classæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå®ä½“,è€Œæ˜¯ä¸€ä¸ªåŒ…è£¹ç€å…¶ä»–åƒå‡½æ•°å’Œå±æ€§è¿™æ ·çš„å…·ä½“å®ä½“å¹¶æŠŠå®ƒä»¬ç»„åˆåˆ°ä¸€èµ·çš„å…ƒæ¦‚å¿µ</p><p>classä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</p><pre><code class="js">var x = class Y {} // -&gt; å¯¹äºæŠŠç±»å®šä¹‰(ä¸¥æ ¼è¯´æ˜¯æ„é€ å™¨æœ¬èº«)ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’,æˆ–è€…æŠŠå®ƒèµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡å±æ€§çš„æ—¶å€™ç‰¹åˆ«ç®¡ç”¨</code></pre><p>æŠŠç±»ç†è§£ä¸ºä¸€ä¸ªå®,ç”¨äºè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªprototypeå¯¹è±¡</p><p>ç±»å¯¹extendsä»¥åŠsuperæä¾›è¯­æ³•ç³–</p><pre><code class="js">class Bar extends Foo {  constructor(a, b, c) {    super(a, b)    this.z = c  }  gimmeXYZ() {    return super.gimmeXY() * this.z  }}</code></pre><p>å¦‚æœå­ç±»ä¸å®šä¹‰æ„é€ å‡½æ•°å°±ä¼š</p><pre><code class="js">constructor(...args) {  super(...args)}</code></pre><blockquote><p>å­ç±»ä¸åœ¨æ„é€ å™¨ä¸­ä½¿ç”¨<code>super</code>æ˜¯æ— æ³•ä½¿ç”¨<code>this</code>çš„</p></blockquote><p>å¯ä»¥æ‹“å±•åŸç”Ÿç±»</p><pre><code class="js">class MyCoolArray extends Array {  first() {return this[0]}  last() {return this[this.length -1 ]}}a = new MyCoolArray(1, 2, 3)a.first()</code></pre><p><code>new.target</code>åœ¨æ„é€ å™¨ä¸­è®¿é—®newç›´æ¥è°ƒç”¨çš„æ„é€ å™¨</p><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>å†³è®®çš„ç»“æœåªå¯èƒ½æ˜¯å®Œæˆæˆ–è€…æ‹’ç»,é™„å¸¦ä¸€ä¸ªå¯é€‰çš„å•ä¸ªå€¼,å¦‚æœæ‹’ç»,é‚£ä¹ˆæœ€ç»ˆçš„å€¼ç§°ä¸ºåŸå› </p><p>åªèƒ½è¢«å®Œæˆæˆ–è€…æ‹’ç»ä¸€æ¬¡,ä¹‹åå®Œæˆæˆ–è€…æ‹’ç»çš„æ“ä½œéƒ½ä¼šè¢«å¿½ç•¥</p><p>åˆ›å»ºä¸€ä¸ªPromise</p><pre><code class="js">var p = new Promise(function(resolve, reject) {  // æˆåŠŸ  resolve(arg)  // é‡‡ç”¨å¦ä¸€ä¸ªPromiseçš„å†³è®®å€¼  resolve(promise)  // æ‹’ç»  reject(why)})// è°ƒç”¨// thenæ¥å—ä¸¤ä¸ªå‡½æ•°ç¬¬ä¸€ä¸ªæ˜¯å®Œæˆ,ç¬¬äºŒä¸ªæ˜¯æ‹’ç»æ—¶æ‰§è¡Œp().then(  function fulfilled(res) {},  funcrion rejected(err){},)</code></pre><p>ä¸è®ºæ˜¯<code>.then</code>è¿˜æ˜¯<code>.catch</code>éƒ½ä¼šè¿”å›ä¸€ä¸ªPromise,å¯ä»¥ç”¨<code>.then</code>è¿›è¡Œå¤„ç†</p><p>åªè¦æ˜¯å‡½æ•°é‡Œè¾¹åŒ…å«<code>then</code>æ–¹æ³•éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª<code>thenable</code>æ‰€ä»¥ä¸è¦ç›²ç›®ä¿¡ä»»è‡ªç§°æ˜¯Promiseçš„ä¸œè¥¿</p><h4 id="Promise-API"><a href="#Promise-API" class="headerlink" title="Promise API"></a>Promise API</h4><p><code>Promise.resolve</code></p><pre><code class="js">var p1 = Promise.resolve(42)var p2 = new Promise(function pr(resolve){resolve(42)})// p1 å’Œ p2 çš„æœ€ç»ˆè¡Œä¸ºæ–¹å¼æ˜¯ç›¸åŒçš„</code></pre><p>è¿™ä¸ªæ¥å£æä¾›äº†ä¸€ä¸ªè§„èŒƒåŒ–Promiseçš„æ–¹æ³•,å¯ä»¥å°†åˆšåˆšä¸å¯ä¿¡ä»»çš„thenableæ”¾è¿›å»è§„èŒƒåŒ–</p><h5 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject"></a><code>Promise.reject</code></h5><p>å’Œä¸Šè¾¹çš„ä¸€æ ·åˆ›å»ºä¸€ä¸ªç«‹å³è¢«æ‹’ç»çš„promise,ä½†æ˜¯å¦‚æœä»–çš„å‚æ•°æ˜¯Promise,å®ƒä¸ä¼šç†ä¼šä¼ è¿›æ¥å¾—Promiseçš„å†³è®®å€¼</p><h5 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all([])"></a><code>Promise.all([])</code></h5><p>æ¥å—ä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼çš„æ•°ç»„,æ¯”å¦‚ç«‹å³å€¼ã€Promiseã€thenable,å®ƒè¿”å›ä¸€ä¸ªpromise,å¦‚æœé‡Œè¾¹çš„æ‰€æœ‰å€¼éƒ½æ˜¯å®Œæˆåˆ™å†³è®®ç»“æœæ˜¯å®Œæˆ,å…¶ä¸­æŸä¸€ä¸ªè¢«æ‹’ç»è¿™ä¸ªPromiseå°±ç«‹å³è¢«æ‹’ç»</p><blockquote><p>æ˜¯ç­‰å¾…æ‰€æœ‰éƒ½å®Œæˆæˆ–è€…ç¬¬ä¸€ä¸ªæ‹’ç»</p></blockquote><h5 id="Promise-rase"><a href="#Promise-rase" class="headerlink" title="Promise.rase([])"></a><code>Promise.rase([])</code></h5><p>ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆæˆ–è€…æ‹’ç»</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´è¿”å›ç¬¬ä¸€ä¸ªå®Œæˆçš„å†³è®®å€¼</p></blockquote><h3 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h3><h4 id="TypedArray"><a href="#TypedArray" class="headerlink" title="TypedArray"></a>TypedArray</h4><pre><code class="js">// åˆ›å»ºä¸€ä¸ªbuffer,é•¿åº¦ä¸º32å­—èŠ‚,ä¸€å…±256ä½var buf = new ArrayBuffer(32)console.log(buf.byteLength) // 32// å°†è¿™256ä½æ˜ å°„æˆä¸€ä¸ª16ä½æ— ç¬¦å·æ•´å‹çš„ç±»å‹æ•°ç»„var arr = new Uint16Array(buf)console.log(arr.length) // 16</code></pre><h4 id="å¤§å°ç«¯"><a href="#å¤§å°ç«¯" class="headerlink" title="å¤§å°ç«¯"></a>å¤§å°ç«¯</h4><p>æ˜¯æŒ‡å¤šå­—èŠ‚æ•°å­—ä¸­çš„ä½å­—èŠ‚ä½äºè¿™ä¸ªæ•°å­—å­—èŠ‚è¡¨ç¤ºä¸­çš„å³ä¾§è¿˜æ˜¯å·¦ä¾§</p><p>ä¸¾ä¸ªä¾‹å­,è®¾æƒ³ä¸€ä¸ªåè¿›åˆ¶æ•°å­—3085,æˆ‘ä»¬éœ€è¦ç”¨16ä½æ¥è¡¨ç¤ºå®ƒã€‚å¦‚æœåªæ˜¯ç”¨ä¸€ä¸ªåå…­ä½æ•°å­—å®¹å™¨,é‚£ä¹ˆä¸è®ºå¤§å°ç«¯é…ç½®å¦‚ä½•éƒ½æ˜¯0000110000001101B,æˆ–è€…0c0dH</p><p>ä½†æ˜¯å¦‚æœç”¨ä¸¤ä¸ªå…«ä½æ•°ç»„è¡¨ç¤ºæ•°å­—3085,é‚£ä¹ˆå¤§å°ç«¯å°±ä¼šæ˜æ˜¾å½±å“ä»–åœ¨å†…å­˜ä¸­çš„å­˜å‚¨è¡¨ç¤ºï¼š</p><ul><li>0000110000001101/0c0dï¼ˆå¤§ç«¯ï¼‰</li><li>0000110100001100/0d0cï¼ˆå°ç«¯ï¼‰</li></ul><p>å¿«é€Ÿç›‘æµ‹JavaScriptå¤§å°ç«¯çš„æ–¹æ³•</p><pre><code class="js">var littleEndian = (function() {  var buffer = new ArrayBuffer(2);  new DataView( buffer ).setInt16(0, 256, true)  return new Int16Array(buffer)[0] === 256;})();</code></pre><h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>å½“å‰çš„jsçš„å¯¹è±¡çš„é”®åªæ”¯æŒå­—ç¬¦ä¸²</p><pre><code class="js">var m = {}var x = { id : 1 }var y = { id : 2 }m[x] = &quot;foo&quot;m[y] = &quot;bar&quot;m[x] // &quot;bar&quot;m[y] // &quot;bar&quot;</code></pre><p>å› ä¸ºx,yä¸¤ä¸ªå¯¹è±¡å­—ç¬¦ä¸²åŒ–éƒ½æ˜¯â€[object object]â€, æ‰€ä»¥mä¸­åªæœ‰ä¸€ä¸ªé”®</p><h5 id="ES6-1"><a href="#ES6-1" class="headerlink" title="ES6"></a>ES6</h5><pre><code class="js">var m = new Map();var x = { id : 1 }var y = { id : 2 }m.set(x, &quot;foo&quot;)m.set(y, &quot;bar&quot;)m.get(x)m.get(y)m.delete(x)m.clear()m.size</code></pre><p>åªæ˜¯ä¸èƒ½ä½¿ç”¨<code>[]</code>çš„æ–¹å¼æ¥è¿›è¡Œè®¿é—®äº†,ä½†æ˜¯å¯ä»¥ç”¨setã€getå®Œç¾æ›¿æ¢,åˆ é™¤çš„è¯ä¸èƒ½ç”¨<code>delete</code>æ“ä½œç¬¦,è¦ç”¨<code>delete()</code>æ–¹æ³•,å®Œå…¨æ¸…ç©ºmapç”¨<code>clear()</code>æ–¹æ³•,è®¿é—®æ˜ å°„çš„å¤§å°ç”¨<code>size</code>å±æ€§</p><p><code>new</code>çš„æ—¶å€™å¯ä»¥ä¼ å…¥ä¸€ä¸ªäºŒç»´æ•°ç»„<code>[[key, value]]</code></p><h5 id="Mapå€¼"><a href="#Mapå€¼" class="headerlink" title="Mapå€¼"></a>Mapå€¼</h5><p>ä½¿ç”¨<code>value()</code></p><pre><code class="js">var m = new Map()var x = {id: 1},    y = {id: 2}m.set(x, &quot;foo&quot;)m.set(y, &quot;bar&quot;)var vals = [...m.values()]vals // [&quot;foo&quot;,&quot;bar&quot;]Array.from( m.values())// ä½¿ç”¨entriesè¿­ä»£vals = [...m.entries()]vals[0][0] === x; // truevals[0][1];       // &quot;foo&quot;vals[1][0] === y; // falsevals[1][1];       // &quot;bar&quot;</code></pre><h5 id="Mapé”®"><a href="#Mapé”®" class="headerlink" title="Mapé”®"></a>Mapé”®</h5><p>ä½¿ç”¨<code>keys()</code></p><pre><code class="js">var keys = [...m.keys()]keys[0] === x;    // truekeys[1] === y;    // true</code></pre><p>æŸ¥çœ‹æ˜¯å¦æœ‰ç»™å®šçš„é”®</p><pre><code class="js">m.has(x);         // truem.has(z);         // false</code></pre><p>mapçš„æœ¬è´¨æ˜¯å…è®¸ä½ æŠŠæŸäº›é¢å¤–çš„ä¿¡æ¯å…³è”åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Š,è€Œæ— éœ€æŠŠè¿™ä¸ªä¿¡æ¯æ”¾å…¥å¯¹è±¡æœ¬èº«</p><h5 id="weakmap"><a href="#weakmap" class="headerlink" title="weakmap"></a>weakmap</h5><p>ä½œä¸ºé”®çš„å¯¹è±¡è¢«å›æ”¶åä¼šè¢«è‡ªåŠ¨åˆ é™¤,å¤šç”¨äºdomä¸­</p><blockquote><p>æ²¡æœ‰size,æ²¡æœ‰clear()</p></blockquote><h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h4><p>æ˜¯ä¸€ä¸ªå€¼å¾—é›†åˆ,å…¶ä¸­å¾—å€¼å”¯ä¸€ï¼ˆé‡å¤ä¼šè¢«å¿½ç•¥ï¼‰</p><p>ç”¨add()ä»£æ›¿set(),æ²¡æœ‰get()</p><pre><code class="js">var s = new Set()var x = {id: 1}var y = {id: 2}s.add(x) s.add(y) s.add(x)s.size // 2s.delete(y)s.size // 1s.clear() // 0s.size // 0</code></pre><p>åˆå§‹åŒ–å¯ä»¥æ”¾è¿›å»ä¸€ä¸ªæ„é€ å™¨</p><pre><code class="js">var x = {id: 1}var y = {id: 2}var s = new Set([x, y])s.has(x) // true</code></pre><h3 id="æ–°å¢API"><a href="#æ–°å¢API" class="headerlink" title="æ–°å¢API"></a>æ–°å¢API</h3><h4 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h4><h5 id="é™æ€å‡½æ•°Array-of"><a href="#é™æ€å‡½æ•°Array-of" class="headerlink" title="é™æ€å‡½æ•°Array.of()"></a>é™æ€å‡½æ•°Array.of()</h5><p>æ­£å¸¸ä½¿ç”¨<code>new Array(4)</code>ä¼šç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º4å¾—ç©ºæ•°ç»„,ä½†æ˜¯ä½¿ç”¨<code>of</code>å°±èƒ½ç”Ÿæˆé•¿åº¦ä¸º1å€¼ä¸º4çš„æ•°ç»„</p><h5 id="é™æ€å‡½æ•°Array-from"><a href="#é™æ€å‡½æ•°Array-from" class="headerlink" title="é™æ€å‡½æ•°Array.from()"></a>é™æ€å‡½æ•°Array.from()</h5><p><code>Array.from({length:4})</code> ç”Ÿæˆ4ä¸ªundefinedå¯ä»¥é¿å…ç©ºæ§½ä½</p><p>æ˜ å°„<code>Array.from(arr, function(val, idx){return}, this)</code>å¯¹æ¯ä¸€ä¸ªå€¼è¿›è¡Œè¿›è¡Œæ˜ å°„å¤„ç†,ç±»ä¼¼.map(),å¦‚æœæœ‰ç¬¬ä¸‰ä¸ªå‚æ•°,åˆ™ä¼šè¢«ç»‘å®šä¸ºç¬¬äºŒä¸ªå‡½æ•°çš„this</p><h5 id="åŸå‹æ–¹æ³•copyWithin"><a href="#åŸå‹æ–¹æ³•copyWithin" class="headerlink" title="åŸå‹æ–¹æ³•copyWithin()"></a>åŸå‹æ–¹æ³•copyWithin()</h5><p>ä»ä¸€ä¸ªæ•°ç»„ä¸­å¤åˆ¶ä¸€éƒ¨åˆ†åˆ°åŒä¸€ä¸ªæ•°ç»„çš„å¦ä¸€ä¸ªä½ç½®,è¦†ç›–è¿™ä¸ªä½ç½®æ‰€æœ‰åŸæ¥çš„å€¼,å¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå‚æ•°æ˜¯è´Ÿå€¼,å°±è¢«å½“ä½œæ˜¯ç›¸å¯¹äºæ•°ç»„ç»“æŸçš„ç›¸å¯¹å€¼</p><pre><code class="js">[1,2,3,4,5].copyWithin(3,0); // [1,2,3,1,2][1,2,3,4,5].copyWithin(3,0,1); // [1,2,3,1,5][1,2,3,4,5].copyWithin(0,-2); // [4,5,3,4,5][1,2,3,4,5].copyWithin(0,-2,-1); // [4,2,3,4,5]</code></pre><blockquote><p>ç”¨çš„æ—¶å€™è¾“å‡ºä¸€ä¸‹ç»“æœ,é¿å…ä¸æ˜¯æƒ³è¦çš„ç»“æœ</p></blockquote><h5 id="åŸå‹æ–¹æ³•fill"><a href="#åŸå‹æ–¹æ³•fill" class="headerlink" title="åŸå‹æ–¹æ³•fill()"></a>åŸå‹æ–¹æ³•fill()</h5><p>å¡«å……æ•°ç»„,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å¡«å……çš„å†…å®¹,ç„¶åæ˜¯å¡«å……çš„å¼€å§‹å’Œç»“æŸ</p><pre><code class="js">[null, null, null, null].fill(42, 1, 3) // [null, 42, 42, null]</code></pre><h5 id="åŸå‹æ–¹æ³•find"><a href="#åŸå‹æ–¹æ³•find" class="headerlink" title="åŸå‹æ–¹æ³•find()"></a>åŸå‹æ–¹æ³•find()</h5><p>indexOfæ˜¯ç”¨çš„===å¯¼è‡´â€™2â€™ä¸èƒ½ä¸2åŒ¹é…</p><p>es5ä¸­çš„å˜é€šæ–¹æ³•æ˜¯ç”¨someæ–¹æ³•å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€ä¸ªå‡½æ•°å›è°ƒ,ç›´åˆ°æŸæ¬¡è¿”å›ä¸ºtrueä¸ºæ­¢,å› ä¸ºå¯ä»¥å®šä¹‰å›è°ƒå‡½æ•°,æ‰€ä»¥æ‹¥æœ‰äº†å¯¹åŒ¹é…æ–¹å¼çš„å®Œå…¨æ§åˆ¶,ä½†æ˜¯æœ€ååªèƒ½å¾—åˆ°åŒ¹é…çš„trueæˆ–è€…falseæç¤º,æ— æ³•çš„åˆ°çœŸæ­£çš„åŒ¹é…å€¼æœ¬èº«</p><p>find()ä¸some()åŸºæœ¬ä¸€è‡´,é™¤äº†ä¸€æ—¦è¿”å›å€¼æ˜¯çœŸå€¼,ä¼šè¿”å›å®é™…çš„æ•°ç»„å€¼,å¦‚æœæ²¡æ‰¾åˆ°ä¼šè¿”å›undefined</p><pre><code class="js">var a = [1,2,3,4,5]var b = a.find(function matcher(v){  return v == &#39;2&#39;})console.log(b) // 2</code></pre><h5 id="åŸå‹æ–¹æ³•findIndex"><a href="#åŸå‹æ–¹æ³•findIndex" class="headerlink" title="åŸå‹æ–¹æ³•findIndex()"></a>åŸå‹æ–¹æ³•findIndex()</h5><p>å’Œfind()ä¸€æ ·å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€ä¸ªå‡½æ•°å›è°ƒ,ä½†æ˜¯å¦‚æœè¿”å›æ˜¯trueåˆ™ä¼šè¿”å›index,å¦‚æœæ²¡æ‰¾åˆ°è¿”å›-1</p><blockquote><p>ä¸è¦ä½¿ç”¨findIndex(..) != -1(è¿™æ˜¯indexOfçš„æƒ¯ç”¨æ³•)ä»æœç´¢ä¸­å¾—åˆ°å¸ƒå°”å€¼,å› ä¸ºsome()å·²ç»yieldå‡ºä½ æƒ³è¦çš„true/falseã€‚ä¹Ÿä¸è¦ç”¨a[a.findIndex(..)]æ¥å¾—åˆ°åŒ¹é…å€¼,å› ä¸ºè¿™æ˜¯find()æ‰€ä½œçš„äº‹ã€‚æœ€åå¦‚æœéœ€è¦ä¸¥æ ¼åŒ¹é…çš„ç´¢å¼•å€¼,é‚£ä¹ˆä½¿ç”¨indexOf()ï¼›å¦‚æœéœ€è¦è‡ªå®šä¹‰åŒ¹é…çš„ç´¢å¼•å€¼,é‚£ä¹ˆä½¿ç”¨findIndex()</p></blockquote><p>æ¥å—å›è°ƒçš„æ•°ç»„æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°,å¦‚æœè®¾å®šè¿™ä¸ªå‚æ•°å°±ç»‘å®šåˆ°ç¬¬ä¸€ä¸ªå‚æ•°å›è°ƒçš„this,å¦åˆ™thiså°±æ˜¯undefined</p><p>åŸå‹æ–¹æ³•entries()ã€values()ã€keys()</p><blockquote><p>åŒSET,MAPå·®ä¸å¤š</p></blockquote><pre><code class="js">var a = [1, 2, 3][...a.values()] // [1,2,3][...a.keys()]   // [0,1,2][...a.entries()] // [[0,1],[1,2],[2,3]][...a[Symbol.iterator]()] // [1,2,3]</code></pre><h4 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h4><h5 id="é™æ€å‡½æ•°Object-is"><a href="#é™æ€å‡½æ•°Object-is" class="headerlink" title="é™æ€å‡½æ•°Object.is()"></a>é™æ€å‡½æ•°Object.is()</h5><p>æ‰§è¡Œæ¯”===æ›´ä¸¥æ ¼çš„å€¼æ¯”è¾ƒ,åº”è¯¥ç»§ç»­ä½¿ç”¨===è¿›è¡Œä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ,ä¸å¯å½“ä½œè¿™ä¸ªè¿ç®—ç¬¦çš„æ›¿ä»£,å¦‚æœéœ€è¦ä¸¥æ ¼è¯†åˆ«NaNæˆ–è€…-0,åˆ™åº”è¯¥é€‰æ‹©Object.is()</p><pre><code class="js">var x = NaN, y = 0, z = -0x === x  // falsey === z  // trueObject.is(x,x) // trueObject.is(y,z) // false</code></pre><h5 id="é™æ€å‡½æ•°Object-getOwnPropertySymbols"><a href="#é™æ€å‡½æ•°Object-getOwnPropertySymbols" class="headerlink" title="é™æ€å‡½æ•°Object.getOwnPropertySymbols()"></a>é™æ€å‡½æ•°Object.getOwnPropertySymbols()</h5><p>Symbolå¯èƒ½ä¼šæˆä¸ºå¯¹è±¡æœ€ç»å¸¸ä½¿ç”¨çš„ç‰¹æ®Š(å…ƒ)å±æ€§ã€‚æ‰€ä»¥å¼•å…¥äº†è¿™ä¸ªå·¥å…·ç›´æ¥ä»å¯¹è±¡ä¸Šå›å»æ‰€æœ‰çš„ç¬¦å·å±æ€§</p><pre><code class="js">var o = {  foo: 42,  [Symbol(&quot;bar&quot;)]: &quot;hello world&quot;,  baz: true}Object.getOwnPropertySymbols(o); // [Symbol(bar)]</code></pre><h5 id="é™æ€å‡½æ•°Object-setPrototypeOf"><a href="#é™æ€å‡½æ•°Object-setPrototypeOf" class="headerlink" title="é™æ€å‡½æ•°Object.setPrototypeOf()"></a>é™æ€å‡½æ•°Object.setPrototypeOf()</h5><p>ç”¨äºè®¾ç½®å¯¹è±¡çš„[[Prototype]]ç”¨äºè¡Œä¸ºå§”æ‰˜</p><pre><code class="js">var o1 = {foo() {}}var o2 = {baz() {}}Object.setPrototypeOf(o2, o1)o2.foo()// æˆ–è€…var o2 = Object.setPrototypeOf({baz(){}},o1)o2.foo()</code></pre><h5 id="é™æ€å‡½æ•°Object-assign"><a href="#é™æ€å‡½æ•°Object-assign" class="headerlink" title="é™æ€å‡½æ•°Object.assign()"></a>é™æ€å‡½æ•°Object.assign()</h5><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯target,å‰©ä¸‹çš„æ‰€æœ‰å‚æ•°çš„ä¼ å…¥çš„æº,æŒ‰ç…§ä¼ å…¥çš„é¡ºåºä¾æ¬¡å¤„ç†,å¯¹äºæ¯ä¸ªæºæ¥è®²,ä»–çš„å¯æšä¸¾å±æ€§å’Œè‡ªå·±æ‹¥æœ‰çš„ç®€ç›´,åŒ…æ‹¬ç¬¦å·éƒ½ä¼šé€šè¿‡ç®€å•çš„=èµ‹å€¼è¢«å¤åˆ¶,ä¼šè¿”å›ç›®æ ‡å¯¹è±¡,ç»è¿‡å®æµ‹,åè¾¹çš„ä¼šè¦†ç›–å‰è¾¹çš„å€¼,å¦‚æœä¸æƒ³è¿™æ ·å°±ä½¿ç”¨ç¬¦å·,åªè¯»å±æ€§å¯è¢«å¤åˆ¶ï¼šå¤åˆ¶åæ˜¯ä¸ªæ™®é€šå±æ€§ï¼Œä¸å¯æšä¸¾å±æ€§ä¸å¯å¤åˆ¶ï¼Œä¸å¯æšä¸¾ç¬¦å·ä¸å¯è¢«å¤åˆ¶</p><p>è€Œä¸”é™¤äº†setPrototypeOfå¯ä»¥é“¾æ¥[[prototype]]è¿˜å¯ä»¥ä½¿ç”¨</p><pre><code class="js">var o1 = {foo(){}}var o2 = Object.assign(Object.create(o1),{// o2 çš„å®šä¹‰})o2.foo()</code></pre><h4 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h4><h5 id="é™æ€å±æ€§"><a href="#é™æ€å±æ€§" class="headerlink" title="é™æ€å±æ€§"></a>é™æ€å±æ€§</h5><p>Number.EPSILONä»»æ„ä¸¤ä¸ªå€¼ä¹‹é—´çš„æœ€å°å·®</p><p>Number.MAX_SAFE_INTEGERå¯ä»¥ç”¨æ•°å­—å€¼æ— æ­§ä¹‰â€œå®‰å…¨è¡¨è¾¾â€çš„æœ€å¤§æ•´æ•°ï¼š2^53 - 1</p><p>Number.MIN_SAFE_INTEGERå¯ä»¥ç”¨æ•°å­—å€¼æ— æ­§ä¹‰â€œå®‰å…¨è¡¨è¾¾â€ çš„æœ€å°æ•´æ•°ï¼š-(2^53-1) æˆ– (-2)^53 + 1</p><h5 id="é™æ€å‡½æ•°Number-isNaN"><a href="#é™æ€å‡½æ•°Number-isNaN" class="headerlink" title="é™æ€å‡½æ•°Number.isNaN()"></a>é™æ€å‡½æ•°Number.isNaN()</h5><p>æ˜¯å¯¹äºå…¨å±€å‡½æ•°isNaN()çš„ä¿®æ­£ï¼Œå¯ä»¥æŒ‰æœŸæœ›å·¥ä½œ</p><h5 id="é™æ€å‡½æ•°Number-isFinite"><a href="#é™æ€å‡½æ•°Number-isFinite" class="headerlink" title="é™æ€å‡½æ•°Number.isFinite()"></a>é™æ€å‡½æ•°Number.isFinite()</h5><p>åˆ¤æ–­æ•°å­—æ˜¯ä¸æ˜¯éæ— é™çš„ï¼Œèƒ½æ’é™¤æ‰NaNå’ŒInfinity</p><p>å…¨å±€çš„isFinite()ä¼šå¼ºåˆ¶è¿›è¡Œç±»å‹è½¬æ¢ï¼Œè€Œè¿™ä¸ªä¸ä¼š</p><h5 id="æ•´å‹ç›¸å…³é™æ€å‡½æ•°"><a href="#æ•´å‹ç›¸å…³é™æ€å‡½æ•°" class="headerlink" title="æ•´å‹ç›¸å…³é™æ€å‡½æ•°"></a>æ•´å‹ç›¸å…³é™æ€å‡½æ•°</h5><p>æ­£å¸¸æƒ…å†µä¸‹æ˜¯æ£€æŸ¥å°æ•°éƒ¨åˆ†æ˜¯å¦é0 x===Math.floor(x)</p><p>ES6æ–°å¢Number.isInteger(),å¯ä»¥æ›´æœ‰æ•ˆçš„åˆ¤æ–­è¿™ä¸ªæ€§è´¨ï¼ŒåŒæ—¶æ’é™¤äº†NaN å’Œ Infinity è¿”å›falseï¼Œå¯¹äº4,4.0,4.00éƒ½ä¼šè¿”å›true</p><h4 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h4><h5 id="åŸå‹å‡½æ•°repeat"><a href="#åŸå‹å‡½æ•°repeat" class="headerlink" title="åŸå‹å‡½æ•°repeat()"></a>åŸå‹å‡½æ•°repeat()</h5><p>åœ¨pythonå’Œrubyè¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥è¿™æ ·é‡å¤å­—ç¬¦ä¸²<code>&quot;foo&quot; * 3 // &#39;foofoofoo&#39;</code></p><p>ES6ä¸­<code>&quot;foo&quot;.repeat(3) // &#39;foofoofoo&#39;</code></p><h5 id="å­—ç¬¦ä¸²æ£€æŸ¥å‡½æ•°"><a href="#å­—ç¬¦ä¸²æ£€æŸ¥å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²æ£€æŸ¥å‡½æ•°"></a>å­—ç¬¦ä¸²æ£€æŸ¥å‡½æ•°</h5><p><code>str.startsWith(&quot;some&quot;) // true</code></p><p><code>str.endsWith(&quot;some&quot;) // true</code></p><p><code>str.includes(&quot;some&quot;) // true</code></p><p>ä¸ä¼šæ¥å—æ­£åˆ™è¡¨è¾¾å¼ç”¨äºæœç´¢ï¼Œè€Œä¸”å¦‚æœæœç´¢ç©ºå­—ç¬¦ä¸²ä¸€èˆ¬ä¼šåœ¨å¼€å§‹æˆ–è€…ç»“å°¾æ‰¾åˆ°</p><h3 id="å…ƒç¼–ç¨‹"><a href="#å…ƒç¼–ç¨‹" class="headerlink" title="å…ƒç¼–ç¨‹"></a>å…ƒç¼–ç¨‹</h3><h4 id="å‡½æ•°å"><a href="#å‡½æ•°å" class="headerlink" title="å‡½æ•°å"></a>å‡½æ•°å</h4><pre><code class="js">(function(){...}); // name:(function*(){...}); // name:window.foo = function(){...}; // name:class Awesome{  constructor(){...} // name: Awesome  funny(){...} // name: funny}var c = class Awesome {..}; // name: Awesomevar o = {  foo(){...}, // name: foo  *bar(){...}, // name: bar  baz: () =&gt; {...}, // name: baz  bam: function() {...}, // name: bam  get qux() {...}, // name: get qux  set fuz() {...}, // name: set fuz  [&quot;b&quot;+&quot;lz&quot;]: function() {...}, // name: blz  [Symbol(&quot;buz&quot;)]: function() {...} // name: [buz]};var x = o.foo.bind(o); // bound foo(function(){..}).bind(0); // boundexport default function() {...} // name: defaultvar y = new Function(); // name: anonymousvar GeneratorFunction = function*(){}.__proto__.constructor;var z = new GeneratorFunction() // name: anonymous</code></pre><blockquote><p>é»˜è®¤æƒ…å†µä¸‹nameå±æ€§ä¸å¯å†™ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡Object.defineProperty(..)æ‰‹åŠ¨ä¿®æ”¹</p></blockquote><h4 id="å…ƒå±æ€§"><a href="#å…ƒå±æ€§" class="headerlink" title="å…ƒå±æ€§"></a>å…ƒå±æ€§</h4><p><code>new.target</code>å¯ä»¥æŒ‡å‘è°ƒç”¨newçš„ç›®æ ‡æ„é€ å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœåœ¨æ„é€ å™¨é‡Œæƒ³åŒºåˆ†ç›´æ¥è°ƒç”¨è¿˜æ˜¯å­ç±»è°ƒç”¨ä½¿ç”¨å¦‚ä¸‹ä»£ç </p><pre><code class="js">class Parent {  constructor() {    if (new.target === Parent) console.log(&#39;from parent&#39;)    else console.log(&#39;from child&#39;)  }}class Child extends Parent {}var a = new Parent(); // from parentvar b = new Child(); // from child</code></pre><h4 id="å…¬å¼€ç¬¦å·"><a href="#å…¬å¼€ç¬¦å·" class="headerlink" title="å…¬å¼€ç¬¦å·"></a>å…¬å¼€ç¬¦å·</h4><h5 id="Symbol-iterator"><a href="#Symbol-iterator" class="headerlink" title="Symbol.iterator"></a>Symbol.iterator</h5><p>è¡¨ç¤ºä»»æ„å¯¹è±¡ä¸Šçš„ä¸€ä¸ªä¸“é—¨ä½ç½®ï¼ˆå±æ€§ï¼‰ï¼Œè¯­è¨€æœºåˆ¶è‡ªåŠ¨åœ¨è¿™ä¸ªä½ç½®ä¸Šå¯»æ‰¾ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ„é€ ä¸€ä¸ªè¿­ä»£å™¨æ¥æ¶ˆè€—è¿™ä¸ªå¯¹è±¡çš„å€¼ã€‚å¾ˆå¤šå¯¹è±¡å®šä¹‰æœ‰è¿™ä¸ªç¬¦å·çš„é»˜è®¤å€¼</p><pre><code class="js">var arr = [4,5,6,7,8,9];for(let v of arr) {  console.log(v) // 4 5 6 7 8 9}// å®šä¹‰ä¸€ä¸ªåªåœ¨å¥‡æ•°ä½ç½®äº§ç”Ÿç´¢å¼•å€¼çš„è¿­ä»£å™¨arr[Symbol.iterator] = function *() {  var idx = 1;  do {    yield this[idx];  } while((idx += 2) &lt; this.length);};for (let v of arr) {  console.log(v) // 5 7 9}</code></pre><h5 id="Symbol-toStringTag-ä¸-Symbol-hasInstance"><a href="#Symbol-toStringTag-ä¸-Symbol-hasInstance" class="headerlink" title="Symbol.toStringTag ä¸ Symbol.hasInstance"></a>Symbol.toStringTag ä¸ Symbol.hasInstance</h5><pre><code class="js">function Foo(greeting) {  this.greeting = greeting;}Foo.prototype[Symbol.toSringTag] = &quot;Foo&quot;;Object.defineProperty(Foo, Symbol.hasInstance, {  value: function(inst) {    return inst.greeting == &#39;hello&#39;  }})var a = new Foo(&quot;hello&quot;)var b = new Foo(&quot;world&quot;)b[Symbol.toStringTag] = &#39;cool&#39;a.toString() // [Object Foo]b.toString() // [Object cool]a instanceof Foo; // trueb instanceof Foo; // false</code></pre><blockquote><p>åŸå‹ï¼ˆæˆ–è€…æ˜¯å®ä¾‹æœ¬èº«ï¼‰çš„@@toStringTagç¬¦å·æŒ‡å®šäº†åœ¨[Object ___]å­—ç¬¦ä¸²åŒ–æ—¶ä½¿ç”¨çš„å­—ç¬¦ä¸²å€¼</p></blockquote><blockquote><p>@@hasInstance ç¬¦å·æ˜¯åœ¨æ„é€ å™¨å‡½æ•°ä¸Šçš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥æ”¶å®ä¾‹å¯¹è±¡å€¼ï¼Œé€šè¿‡è¿”å›true æˆ–è€… false æ¥æŒ‡ç¤ºè¿™ä¸ªå€¼æ˜¯å¦å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå®ä¾‹<br>è¦åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šè®¾ç½®@@hasInstanceå¿…é¡»ä½¿ç”¨Object.definePropertyï¼Œå› ä¸ºé»˜è®¤çš„é‚£ä¸ªæ˜¯ä¸å¯å†™çš„</p></blockquote><h5 id="Symbol-species"><a href="#Symbol-species" class="headerlink" title="Symbol.species"></a>Symbol.species</h5><p>è¿™ä¸ªç¬¦å·æ§åˆ¶è¦ç”Ÿæˆæ–°å®ä¾‹çš„æ—¶å€™ï¼Œç±»çš„å†…ç½®æ–¹æ³•ä½¿ç”¨å“ªä¸€ä¸ªæ„é€ å™¨</p><pre><code class="js">class Cool {  // æŠŠ@@speciesæ¨è¿Ÿåˆ°å­ç±»  static get [Symbol.species]() {return this;} // è¿™ä¸ªå°±æ˜¯é»˜è®¤çš„è¡Œä¸º  again(){    return new this.constructor[Symbol.species]();  }}class Fun extends Cool {}class Awesome extends Cool {  // å¼ºåˆ¶æŒ‡å®š@@speciesä¸ºçˆ¶æ„é€ å™¨  static get [Symbol.species]() {    return Cool;  }}var a = new Fun(),b = new Awesome(),c = a.again(),d = b.again();c instanceof Fun; // trued instanceof Awesome; // falsed instanceof Cool; // true</code></pre><h5 id="Symbol-toPrimitive"><a href="#Symbol-toPrimitive" class="headerlink" title="Symbol.toPrimitive"></a>Symbol.toPrimitive</h5><p>å¦‚æœä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„è¦ä½¿ç”¨== æˆ–è€…+é‚£ä¹ˆå°±å¿…é¡»è¢«å¼ºåˆ¶è½¬åŒ–æˆä¸€ä¸ªåŸç”Ÿç±»å‹</p><pre><code class="js">var arr = [1,2,3,4,5]arr + 10 // 1,2,3,4,510arr[Symbol.toPrimitive] = function (hint) {  if(hint == &#39;default&#39; || hint == &#39;number&#39;) {    return this.reduce(function(acc, curr){      return acc + curr;    }, 0)  } }arr + 10 // 25</code></pre><blockquote><p>Symbol.toPrimitiveæ–¹æ³•æ ¹æ®è°ƒç”¨ToPrimitiveçš„è¿ç®—æœŸæœ›çš„ç±»å‹ï¼Œä¼šæä¾›ä¸€ä¸ªæç¤º<code>hint</code>æŒ‡å®šâ€stringâ€ã€â€numberâ€æˆ–è€…â€defaultâ€ï¼ˆè¿™åº”è¯¥è¢«è§£é‡Šæˆâ€numberâ€ï¼‰ã€‚åœ¨å‰é¢çš„ä»£ç ä¸­ï¼ŒåŠ æ³•è¿ç®—æ²¡æœ‰æç¤ºï¼ˆä¼ å…¥â€defaultâ€ï¼‰ã€‚è€Œä¹˜æ³•è¿ç®—æç¤ºä¸ºâ€numberâ€ï¼ŒString(arr)æç¤ºä¸ºâ€stringâ€ã€‚</p></blockquote><h5 id="Symbol-isConcatSpreadable"><a href="#Symbol-isConcatSpreadable" class="headerlink" title="Symbol.isConcatSpreadable"></a>Symbol.isConcatSpreadable</h5><p>å¯ä»¥è¢«å®šä¹‰ä¸ºä»»ä½•å¯¹è±¡ï¼ˆæ¯”å¦‚æ•°ç»„æˆ–è€…å…¶ä»–å¯è¿­ä»£å¯¹è±¡ï¼‰çš„å¸ƒå°”å±æ€§ï¼Œç”¨æ¥æŒ‡ç¤ºå¦‚æœæŠŠå®ƒä¼ ç»™ä¸€ä¸ªæ•°ç»„çš„<code>concat()</code>æ˜¯å¦åº”è¯¥å°†å…¶<strong>å±•å¼€</strong></p><pre><code class="js">var a = [1,2,3],b = [4,5,6];b[Symbol.isConcatSpreadable] = false;[].contact(a,b); // [1,2,3,[4,5,6]]</code></pre><h5 id="Symbol-unscopables"><a href="#Symbol-unscopables" class="headerlink" title="Symbol.unscopables"></a>Symbol.unscopables</h5><p>å¯ä»¥è¢«å®šä¹‰ä¸ºä»»æ„å¯¹è±¡çš„å¯¹è±¡å±æ€§ï¼Œç”¨æ¥æŒ‡ç¤ºä½¿ç”¨withè¯­å¥æ—¶é‚£äº›å±æ€§å¯ä»¥æˆ–ä¸å¯ä»¥æš´éœ²ä¸ºè¯æ³•å˜é‡</p><pre><code class="js">var o = {a:1, b:2, c:3},a = 10, b = 20, c = 30;o[Symbol.unscopables] = {  a: false, // èƒ½æš´éœ²ä¸ºè¯æ³•å˜é‡ï¼Œå› ä¸ºæ˜¯unscopables  b: true,  c: false}with (o) {  console.log(a,b,c)  // 1 20 3}</code></pre><blockquote><p>strict æ¨¡å¼ä¸‹ä¸å…è®¸ä½¿ç”¨withå±æ€§ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨withï¼Œæ‰€ä»¥è¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆç”¨</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸Šï¼‰å­¦ä¹ ç¬”è®°</title>
    <link href="undefined2020/04/js1/"/>
    <url>2020/04/js1/</url>
    
    <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="ä½œç”¨åŸŸå’Œé—­åŒ…"><a href="#ä½œç”¨åŸŸå’Œé—­åŒ…" class="headerlink" title="ä½œç”¨åŸŸå’Œé—­åŒ…"></a>ä½œç”¨åŸŸå’Œé—­åŒ…</h2><h3 id="LHS-å’Œ-RHS"><a href="#LHS-å’Œ-RHS" class="headerlink" title="LHS å’Œ RHS"></a>LHS å’Œ RHS</h3><p>L å’Œ R ä»£è¡¨å·¦å³</p><blockquote><p>LHS èµ‹å€¼æ“ä½œçš„ç›®æ ‡æ˜¯è°<br>RHS è°æ˜¯èµ‹å€¼æ“ä½œçš„æºå¤´</p></blockquote><p>å˜é‡å‡ºç°åœ¨èµ‹å€¼æ“ä½œçš„å·¦è¾¹å¯¹å…¶è¿›è¡Œ<code>LHS</code>æŸ¥è¯¢ï¼Œå³è¯•å›¾æ‰¾åˆ°è¯¥å®¹å™¨å¹¶å¯å¯¹å…¶è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œ<strong>ä¸å…¶åŸå…ˆæ˜¯å¦æœ‰å†…å®¹æ— å…³</strong></p><p>å˜é‡å‡ºç°åœ¨èµ‹å€¼æ“ä½œçš„å³è¾¹å¯¹å…¶è¿›è¡Œ<code>RHS</code>æŸ¥è¯¢ï¼Œå³è¯•å›¾æ‰¾åˆ°è¯¥å®¹å™¨ä¸­çš„<strong>å†…å®¹</strong></p><h3 id="ReferenceErroråŒä½œç”¨åŸŸåˆ¤åˆ«å¤±è´¥æœ‰å…³"><a href="#ReferenceErroråŒä½œç”¨åŸŸåˆ¤åˆ«å¤±è´¥æœ‰å…³" class="headerlink" title="ReferenceErroråŒä½œç”¨åŸŸåˆ¤åˆ«å¤±è´¥æœ‰å…³"></a>ReferenceErroråŒä½œç”¨åŸŸåˆ¤åˆ«å¤±è´¥æœ‰å…³</h3><p>ä¸¥æ ¼æ¨¡å¼ä¸‹è¿›è¡ŒLHSæŸ¥è¯¢å¤±è´¥å°±ä¼šå‡ºç°ï¼Œ<strong>éä¸¥æ ¼æ¨¡å¼</strong>ä¸‹ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå˜é‡</p><p>RHSæŸ¥è¯¢å¤±è´¥ä¸€å®šä¼šæŠ¥è¿™ä¸ªé”™è¯¯</p><p>TypeErrorä»£è¡¨ä½œç”¨åŸŸåˆ¤åˆ«æˆåŠŸäº†ä½†æ˜¯å¯¹<strong>ç»“æœçš„æ“ä½œ</strong>æ˜¯éæ³•çš„æˆ–è€…ä¸åˆç†çš„</p><p>LHSæŸ¥è¯¢æ˜¯ä»åº•å±‚ä¸€å±‚ä¸€å±‚<strong>å‘ä¸Š</strong>æ‰¾çš„ï¼Œæ‰€ä»¥ä¸‹ä¸€çº§çš„å˜é‡ä¼šå¯¹ä¸Šçº§çš„å˜é‡å½¢æˆâ€œé®è”½â€ç°è±¡</p><p><code>eval(&lt;str&gt;)</code>ä¸­é—´çš„strå¯ä»¥å½“æˆä¸€å¼€å§‹å°±å†™åœ¨é‚£ä¸ªä½ç½®çš„ä»£ç ä½¿ç”¨ï¼Œå¯ä»¥å¯¹ä¸Šä¸€çº§çš„å˜é‡è¿›è¡Œâ€œé®è”½â€</p><p><code>with(obj){ a = 1 } =&gt; obj.a = 1</code> withä¼šåˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸï¼Œå¹¶æŠŠobjçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•æ”¾è¿›å»ï¼Œè¿›è¡Œçš„æ˜¯æ­£å¸¸çš„LHSæŸ¥è¯¢ï¼Œä½†æ˜¯è¿™å°±å¯¼è‡´äº†å½“objä¸­æ²¡æœ‰è¢«èµ‹å€¼çš„å±æ€§çš„æ—¶å€™å°±ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºä¸€ä¸ªå˜é‡å¯¼è‡´å˜é‡æ³„éœ²åˆ°å…¨å±€ä½œç”¨åŸŸå³<code>obj.a =&gt; undefined</code>,<code>window.a =&gt; 2</code></p><blockquote><p>evalå’Œwithéƒ½ä¼šå¯¼è‡´å¼•æ“å¯¹ä»£ç çš„ä¼˜åŒ–å¤±è´¥ä»è€Œé™ä½è¿è¡Œæ•ˆç‡</p></blockquote><h3 id="IIFE-Immediately-Invoked-Function-Expression-ï¼šç«‹å³æ‰§è¡Œå‡½æ•°"><a href="#IIFE-Immediately-Invoked-Function-Expression-ï¼šç«‹å³æ‰§è¡Œå‡½æ•°" class="headerlink" title="IIFE(Immediately Invoked Function Expression)ï¼šç«‹å³æ‰§è¡Œå‡½æ•°"></a>IIFE(Immediately Invoked Function Expression)ï¼šç«‹å³æ‰§è¡Œå‡½æ•°</h3><p>å¯ä»¥æŠŠwindowå½“æˆå‚æ•°ç›´æ¥ä¼ è¿›å»ï¼Œå½¢å‚æ˜¯global</p><p>å°†ä¸€ä¸ªå‚æ•°å‘½åä¸ºundefinedä½†æ˜¯ä¸ä¼ å‚æ•°å°±èƒ½ä¿è¯undefinedæ˜¯çœŸçš„undefinedï¼Œé˜²æ­¢è¢«è¦†ç›–ï¼Œä¾‹å¦‚<code>undefined = true</code>è¿™ç§ä»£ç </p><p>å°½é‡å‡å°‘ä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œç›´æ¥åŠ ä¸Šä¸ªåå­—å°±å¥½ï¼Œè¿™æ ·åœ¨å‡ºé”™çš„æ—¶å€™æ›´å®¹æ˜“æ‰¾åˆ°ä½ç½®</p><h3 id="å—ä½œç”¨åŸŸ"><a href="#å—ä½œç”¨åŸŸ" class="headerlink" title="å—ä½œç”¨åŸŸ"></a>å—ä½œç”¨åŸŸ</h3><ul><li><strong>with</strong></li><li><strong>try/catch</strong> (ES3å°±æœ‰äº†)<ul><li>catché‡Œè¾¹å°±æ˜¯ä¸€ä¸ªä½œç”¨åŸŸï¼Œçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼ˆç±»ä¼¼ï¼‰</li></ul></li><li><strong>let</strong>åˆ›å»ºçš„å˜é‡å¹¶ä¸ä¼šè¢«æå‡ï¼Œæ‰€ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨éƒ½ä¼šæŠ¥ReferenceErroré”™è¯¯<ul><li>ä¸ºä»£ç æä¾›ä¸€ä¸ªæ˜¾å¼çš„ä½œç”¨åŸŸå¹¶ä½¿ç”¨letå¯ä»¥è®©å¼•æ“åœ¨åˆé€‚çš„æ—¶é—´å›æ”¶åƒåœ¾</li></ul></li><li><strong>const</strong> å¯ä»¥åˆ›å»ºå—ä½œç”¨åŸŸå˜é‡</li></ul><blockquote><p>è¯æ³•ä½œç”¨åŸŸå…³æ³¨å‡½æ•°åœ¨ä½•å¤„å£°æ˜ï¼ŒåŠ¨æ€ä½œç”¨åŸŸå…³æ³¨å‡½æ•°ä»ä½•å¤„è°ƒç”¨</p></blockquote><h3 id="Traceur"><a href="#Traceur" class="headerlink" title="Traceur"></a>Traceur</h3><p>ä½¿ç”¨googleçš„Traceurå¯ä»¥å°†es6è½¬æ¢ä¸ºes5ï¼Œå°†letè½¬æ¢ä¸ºtry/catch</p><h3 id="æå‡"><a href="#æå‡" class="headerlink" title="æå‡"></a>æå‡</h3><p>æå‡çš„æ—¶å€™å‡½æ•°ä¼˜å…ˆä¹Ÿå°±æ˜¯è¯´</p><pre><code class="js">foo() //1var foo // é‡å¤å£°æ˜è€Œè¢«å¿½ç•¥function foo(){ // ç”±äºä¼˜å…ˆè€Œè¢«æå‡åˆ°æœ€é¡¶ï¼Œç„¶åå°±æ‰§è¡Œäº†foo  console.log(1)}foo = function() {  console.log(2)}</code></pre><p><code>var a = 2; =&gt; var a; a = 2;</code>å¼•æ“å°†å…¶æ‹†æˆä¸¤ä¸ªå£°æ˜ï¼Œä¸€ä¸ªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µçš„ä»»åŠ¡ï¼Œä¸€ä¸ªæ˜¯åœ¨æ‰§è¡Œé˜¶æ®µçš„ä»»åŠ¡</p><p>å£°æ˜æœ¬èº«ä¼šè¢«æå‡ï¼Œä½†æ˜¯åŒ…æ‹¬å‡½æ•°è¡¨è¾¾å¼çš„èµ‹å€¼åœ¨å†…çš„èµ‹å€¼æ“ä½œéƒ½ä¸ä¼šè¢«æå‡</p><p>å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œè¿™æ—¶å°±äº§ç”Ÿäº†é—­åŒ…</p><h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>ä¸ºåˆ›å»ºå†…éƒ¨ä½œç”¨åŸŸè€Œè°ƒç”¨äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°</p><p>åŒ…è£…å‡½æ•°çš„è¿”å›å€¼è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªå¯¹å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šåˆ›å»ºæ¶µç›–æ•´ä¸ªåŒ…è£…å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…</p><h2 id="thiså’Œå¯¹è±¡åŸå‹"><a href="#thiså’Œå¯¹è±¡åŸå‹" class="headerlink" title="thiså’Œå¯¹è±¡åŸå‹"></a>thiså’Œå¯¹è±¡åŸå‹</h2><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>ç®­å¤´å‡½æ•°ä¼šä½¿thisç»§æ‰¿ä¸Šä¸€çº§çš„this</p><p>ä½¿ç”¨bindå°†å¤–è¾¹çš„thisä¼ è¿›å…¥ä¹Ÿæ›´åŠ é è°±</p><p>thisæ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ï¼Œä¹Ÿä¸æŒ‡å‘å‡½æ•°çš„ä½œç”¨åŸŸ</p><h3 id="ç»‘å®š"><a href="#ç»‘å®š" class="headerlink" title="ç»‘å®š"></a>ç»‘å®š</h3><h4 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h4><ul><li>ç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼Œæ­¤æ—¶thisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼åˆ™ä¼šç»‘å®šundefined</li><li>è™½ç„¶thisç»‘å®šè§„åˆ™å®Œå…¨å–å†³äºè°ƒç”¨ä½ç½®ï¼Œä½†æ˜¯åªæœ‰å‡½æ•°è¿è¡Œåœ¨éstrict modeä¸‹æ—¶ï¼Œé»˜è®¤ç»‘å®šæ‰èƒ½ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è°ƒç”¨å‡½æ•°åˆ™ä¸ä¼šå½±å“é»˜è®¤ç»‘å®š</li></ul><h4 id="éšå¼ç»‘å®š"><a href="#éšå¼ç»‘å®š" class="headerlink" title="éšå¼ç»‘å®š"></a>éšå¼ç»‘å®š</h4><ul><li>è°ƒç”¨ä½ç½®æ˜¯å¦æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæˆ–è€…è¯´æ—¶è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«</li><li><code>function foo(){} var obj = {foo:foo} obj.foo()</code>æ­¤æ—¶thisæŒ‡å‘obj</li><li><code>function foo(){} var obj1 = {foo:foo} var obj2 = {obj1:obj1} obj2.obj1.foo()</code>æ­¤æ—¶thisæŒ‡å‘obj1ï¼Œå³å¯¹è±¡å±æ€§å¼•ç”¨é“¾ä¸­åªæœ‰ä¸Šä¸€å±‚æˆ–è€…è¯´æœ€åä¸€å±‚è°ƒç”¨ä½ç½®ä¸­èµ·ä½œç”¨</li><li><code>function foo(){} var obj = {foo:foo} var bar = obj.foo bar()</code>æ­¤æ—¶barçš„thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéšå¼ä¸¢å¤±ï¼‰ï¼Œè™½ç„¶baræ˜¯obj.fooçš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¼•ç”¨çš„æ˜¯fooå‡½æ•°æœ¬èº«ï¼Œå› æ­¤æ­¤æ—¶çš„bar()å…¶å®æ˜¯ä¸€ä¸ªä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤åº”ç”¨äº†é»˜è®¤ç»‘å®š</li></ul><h4 id="æ˜¾å¼ç»‘å®š"><a href="#æ˜¾å¼ç»‘å®š" class="headerlink" title="æ˜¾å¼ç»‘å®š"></a>æ˜¾å¼ç»‘å®š</h4><ul><li>callå’Œapplyä»¥åŠbindçš„è¯¦ç»†ä»‹ç»<a href="https://blog.csdn.net/wyyandyou_6/article/details/81488103" target="_blank" rel="noopener">é“¾æ¥</a></li><li><code>arr.forEach(fn(currentValue, index, arr),thisValue)</code>åœ¨thisValueæ˜¾å¼ç»‘å®šthis</li></ul><h4 id="newç»‘å®š"><a href="#newç»‘å®š" class="headerlink" title="newç»‘å®š"></a>newç»‘å®š</h4><ul><li>åŒ…æ‹¬å†…ç½®å¯¹è±¡å‡½æ•°åœ¨å†…çš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨newæ¥è°ƒç”¨ï¼Œè¿™ç§å‡½æ•°è°ƒç”¨è¢«ç§°ä¸ºæ„é€ å‡½æ•°è°ƒç”¨</li><li>ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œ<ul><li>åˆ›å»ºï¼ˆæˆ–è€…è¯´æ„é€ ï¼‰ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡</li><li>è¿™ä¸ªæ–°å¯¹è±¡ä¼šæ‰§è¡ŒPrototypeè¿æ¥</li><li>è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„thisï¼ˆ<strong>newç»‘å®š</strong>ï¼‰</li><li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡</li></ul></li></ul><blockquote><p>ä¼˜å…ˆçº§ newç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®šï¼Œåœ¨bindå‡½æ•°ä¸­ä¼šåˆ¤æ–­æ˜¯ä¸æ˜¯newè°ƒç”¨ï¼Œnewä¼˜å…ˆ</p></blockquote><blockquote><p>å¦‚æœæŠŠnullæˆ–è€…undefinedä½œä¸ºthisçš„ç»‘å®šå¯¹è±¡ä¼ å…¥callã€applyæˆ–è€…bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨çš„æ—¶å€™æˆ–è¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™<br>æ¥ä¸Šï¼Œä½†æ˜¯å‡å¦‚å‡½æ•°ä¸­ç¡®å®ä½¿ç”¨åˆ°äº†thiså°±ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä½¿ç”¨<code>Object.create(null)</code>,æ¥åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ¯”{}è¿˜å°‘ä¸€ä¸ªprototypeï¼Œç”¨è¿™ä¸ªä»£æ›¿nullå½“ä½œthisçš„ç»‘å®šå¯¹è±¡</p></blockquote><p>æŸ¯é‡ŒåŒ–<a href="https://www.jianshu.com/p/2975c25e4d71" target="_blank" rel="noopener">é“¾æ¥</a></p><p>è½¯ç»‘å®š<a href="https://segmentfault.com/q/1010000006223479" target="_blank" rel="noopener">é“¾æ¥</a></p><h4 id="ç®­å¤´å‡½æ•°ä¸‹çš„this"><a href="#ç®­å¤´å‡½æ•°ä¸‹çš„this" class="headerlink" title="ç®­å¤´å‡½æ•°ä¸‹çš„this"></a>ç®­å¤´å‡½æ•°ä¸‹çš„this</h4><ul><li>ç®­å¤´å‡½æ•°ä¸é€‚ç”¨thisçš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚ï¼ˆå‡½æ•°æˆ–è€…å…¨å±€ï¼‰ä½œç”¨åŸŸæ¥å†³å®šthis</li><li>ç®­å¤´å‡½æ•°ç»‘å®šçš„thisæ— æ³•è¢«æ”¹å˜ï¼Œå³ä½¿æ˜¯newä¹Ÿä¸è¡Œ</li><li>thisæŒ‡å‘è°ƒç”¨æ—¶ä¸Šçº§çš„this</li><li>ä»¥åè¦å°½é‡å‡å°‘that=thisçš„å†™æ³•ï¼Œå¤šç”¨bindä»¥åŠç®­å¤´å‡½æ•°</li></ul><h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><ul><li>å¯ä»¥é€šè¿‡å£°æ˜å½¢å¼(å¯ä»¥æ·»åŠ å¤šä¸ªé”®å€¼å¯¹)å’Œæ„é€ æ¨¡å¼(å¿…é¡»é€ä¸ªæ·»åŠ å±æ€§)å®šä¹‰</li></ul><h3 id="å…­ç§ä¸»è¦ç±»å‹ï¼ˆè¯­è¨€ç±»å‹ï¼‰"><a href="#å…­ç§ä¸»è¦ç±»å‹ï¼ˆè¯­è¨€ç±»å‹ï¼‰" class="headerlink" title="å…­ç§ä¸»è¦ç±»å‹ï¼ˆè¯­è¨€ç±»å‹ï¼‰"></a>å…­ç§ä¸»è¦ç±»å‹ï¼ˆè¯­è¨€ç±»å‹ï¼‰</h3><p><code>string number boolean null undefined object</code>,é™¤äº†<strong>object</strong>éƒ½ä¸æ˜¯å¯¹è±¡ç±»å‹</p><blockquote><p>ç”±äºå¯¹è±¡åº•å±‚è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ï¼Œå‰ä¸‰ä½ä¸º0è¢«åˆ¤å®šä¸ºobjectï¼Œä½†æ˜¯nulläºŒè¿›åˆ¶å…¨ä¸ºé›¶ï¼Œ<strong>æ‰€ä»¥æ‰§è¡Œtypeofä¼šè¿”å›object</strong></p></blockquote><h3 id="å†…ç½®å¯¹è±¡"><a href="#å†…ç½®å¯¹è±¡" class="headerlink" title="å†…ç½®å¯¹è±¡"></a>å†…ç½®å¯¹è±¡</h3><p><code>String Number Boolean Object Function Array Date RegExp Error</code></p><ul><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼•æ“ä¼šæŠŠå­—é¢é‡è½¬åŒ–ä¸ºå¯¹åº”çš„å¯¹è±¡ï¼Œä½†æ˜¯<code>null</code>å’Œ<code>undefined</code>åªæœ‰<strong>æ–‡å­—å½¢å¼</strong>ï¼Œ<code>Date</code>åªæœ‰<strong>æ„é€ å½¢å¼</strong></p></li><li><p>å¯¹äº <code>Object Function Array RegExp</code> æ¥è¯´ä¸è®ºæ˜¯æ–‡å­—å½¢å¼è¿˜æ˜¯æ„é€ å½¢å¼éƒ½æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å­—é¢é‡</p></li><li><p><code>.a</code>å±æ€§è®¿é—® <code>[&#39;a&#39;]</code> é”®è®¿é—®,é”®è®¿é—®å¯ä»¥æ¥å—ä»»æ„UTF-8/Unicodeå­—ç¬¦ä¸²ä½œä¸ºå±æ€§åï¼Œä¾‹å¦‚â€™Super-Fun!â€™</p></li><li><p>es6ä¸­åœ¨å­—é¢é‡å®šä¹‰å¯¹è±¡å±æ€§æ—¶ï¼ŒåŠ ä¸Š<code>[å˜é‡]</code>å°±å¯ä»¥åšåˆ°å¯è®¡ç®—å±æ€§å</p></li></ul><h3 id="å¤åˆ¶"><a href="#å¤åˆ¶" class="headerlink" title="å¤åˆ¶"></a>å¤åˆ¶</h3><ul><li><code>JSON.parse(JSON.stringify(obj))</code>çš„æ–¹å¼å¤åˆ¶ä¸äº†function</li><li><code>Object.assign({}, obj1,...)</code>çš„æ–¹å¼å¯ä»¥æµ…å¤åˆ¶ï¼ŒåŒ…æ‹¬function</li></ul><h3 id="å±æ€§æè¿°ç¬¦"><a href="#å±æ€§æè¿°ç¬¦" class="headerlink" title="å±æ€§æè¿°ç¬¦"></a>å±æ€§æè¿°ç¬¦</h3><ul><li>æŸ¥çœ‹<code>Object.getOwnPropertyDiscriptor(obj, &lt;key&gt;)</code></li><li>è®¾ç½®<pre><code class="js">Object.defineProperty(obj,&#39;a&#39;,{  value: 2, //å€¼  writable: true, // å¯å†™ï¼Œè®¾ç½®falseæ—¶ç±»ä¼¼è®¾ç½®setterä¸ºç©ºï¼Œæ­¤æ—¶ä¿®æ”¹å€¼ä¼šæŠ¥typeErrorï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ï¼Œéä¸¥æ ¼æ¨¡å¼ä¼šé™é»˜å¤±è´¥  configurable: true, // å¯é…ç½®ï¼Œå•å‘æ“ä½œï¼Œè®¾ç½®ä¸ºfalseä¹‹åå°±æ”¹ä¸å›æ¥äº†å¹¶ä¸”ä¸å¯åˆ é™¤(deleteï¼Œéä¸¥æ ¼æ¨¡å¼ä¼šé™é»˜å¤±è´¥)ï¼Œä½†æ˜¯ä»å¯ä»¥è®¾ç½®writableä¸ºfalseï¼Œä¸ç®¡æ˜¯ä¸æ˜¯ä¸¥æ ¼æ¨¡å¼ä¿®æ”¹ä¸å¯é…ç½®çš„å±æ€§æè¿°ç¬¦éƒ½ä¼šå‡ºé”™  enumerable: true // å¯æšä¸¾ï¼Œå¦‚æœä¸æƒ³è®©å…¶å‡ºç°åœ¨for...in å¾ªç¯ä¸­å°±è®¾ç½®ä¸ºfalse})</code></pre></li><li>ä¸å˜æ€§<ul><li>å¯¹è±¡å¸¸é‡ï¼šç»“åˆ<code>configurable: false,writable: false,</code>å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„å¸¸é‡å±æ€§ï¼ˆä¸å¯ä¿®æ”¹ï¼Œé‡å®šä¹‰æˆ–åˆ é™¤ï¼‰</li><li>ç¦æ­¢æ‹“å±•ï¼š<code>Object.preventExtensions(obj)</code>ç¦æ­¢å¯¹è±¡æ·»åŠ æ–°çš„å±æ€§å¹¶ä¸”ä¿ç•™å·²æœ‰å±æ€§</li><li>å¯†å°ï¼š<code>Object.seal(obj)</code>ç›¸å½“äºç¦æ­¢æ‹“å±•åŠ <code>configurable: false</code>å³ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ä¹Ÿä¸èƒ½é‡æ–°é…ç½®æˆ–åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§</li><li>å†»ç»“ï¼š<code>Object.freeze()</code>ç›¸å½“äºå…ˆå¯†å°å†<code>writable: false</code>ï¼Œä½†æ˜¯ä»ä¸èƒ½å†»ç»“è¿™ä¸ªå¯¹è±¡å¼•ç”¨çš„å¯¹è±¡<ul><li>æ·±åº¦å†»ç»“ï¼Œå…ˆå†»ç»“è¯¥å¯¹è±¡ï¼Œç„¶åéå†å…¶å­å¯¹è±¡ç„¶åå†»ç»“</li></ul></li></ul></li><li><code>[[get]]</code>å…ˆåœ¨objä¸­æŸ¥æ‰¾å±æ€§åç›¸åŒçš„å±æ€§ï¼Œæ²¡æœ‰å°±å»æŸ¥è¯¢åŸå‹é“¾</li><li><code>[[put]]</code>å…ˆçœ‹æœ‰æ²¡æœ‰setterï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰ï¼Œç„¶åçœ‹æ˜¯ä¸æ˜¯writable</li><li>get å’Œ set<ul><li><pre><code class="js">var obj = {  // ç»™aå®šä¹‰ä¸€ä¸ªgetter  get a() {    return this._a_  },  set a(val) {    this._a_ = val * 2  }}Object.defineProperty(  obj,  &#39;b&#39;,  {    get: function() {return this._a_ * 2},    //ç¡®ä¿bä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§åˆ—è¡¨ä¸­    enumerable: true  })obj.a = 2obj.a // 4obj.b // 4</code></pre></li><li>ä»¥ä¸Šæ“ä½œéƒ½ä¼šåœ¨objä¸­åˆ›å»ºä¸€ä¸ªä¸åŒ…å«å€¼çš„å±æ€§ï¼Œå¯¹äºè¿™ä¸ªå±æ€§çš„è®¿é—®ä¼šè‡ªåŠ¨è°ƒç”¨ä¸€ä¸ªéšè—å‡½æ•°ï¼Œè¿”å›å€¼å³æ˜¯è¢«å½“ä½œå±æ€§è®¿é—®çš„è¿”å›å€¼</li><li>åœ¨å®šä¹‰æ–°å±æ€§æ—¶ï¼Œgetå’Œsetä¸èƒ½åŒvalueæˆ–è€…writableä¸€èµ·å‡ºç°å¦åˆ™æŠ¥TypeError</li></ul></li><li>å­˜åœ¨æ€§<ul><li><code>a in obj</code>inæ“ä½œç¬¦æˆ–æ£€æŸ¥å¯¹è±¡åŠå…¶åŸå‹é“¾<ul><li>inæ“ä½œç¬¦åªæ£€æŸ¥çš„æ˜¯å±æ€§åï¼Œè€Œä¸æ˜¯å€¼ï¼Œæ‰€ä»¥ <code>4 in [4,1,2] -&gt; false</code></li></ul></li><li><code>obj.hasOwnProperty(&#39;a&#39;)</code>åªæ£€æŸ¥å¯¹è±¡ï¼Œä¸æ£€æŸ¥åŸå‹é“¾<ul><li>å¯¹äºæ²¡æœ‰åŸå‹é“¾çš„å¯¹è±¡å¦‚<code>Object.create(null)</code>å¯<code>Object.prototype.hasOwnProerty.call(obj)</code>æ˜¾å¼ç»‘å®š</li></ul></li><li><code>Object.keys(obj)</code>æŸ¥çœ‹å¯¹è±¡ä¸­æ‰€æœ‰é”®ï¼Œåªæ˜¾ç¤ºå¯æšä¸¾å±æ€§ï¼Œå¹¶ä¸”ä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾ï¼Œè¿”å›æ•°ç»„</li><li><code>Object.getOwnPropertyNames(obj)</code>è¿”å›æ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å±æ€§ï¼Œä¸è®ºæ˜¯å¦å¯æšä¸¾ï¼Œä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾</li><li><code>obj.propertyIsEnumerable(&#39;a&#39;)</code>è¿”å›Booleanï¼ŒæŸ¥çœ‹è¯¥å…ƒç´ æ˜¯å¦å¯æšä¸¾</li></ul></li></ul><h2 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h2><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><ul><li>forEachï¼šå¿½ç•¥å›è°ƒå‡½æ•°çš„è¿”å›å€¼</li><li>everyï¼šä¼šä¸€ç›´è¿è¡Œåˆ°å›è°ƒå‡½æ•°è¿”å›false</li><li>someï¼šä¼šä¸€ç›´è¿åˆ°åˆ°å›è°ƒå‡½æ•°è¿”å›true</li><li>æ•°ç»„å¯ä»¥ç›´æ¥for ofå¾ªç¯å‡ºæ‰€æœ‰çš„å€¼</li><li>for ofå®é™…ä¸Šæ˜¯è°ƒç”¨çš„è¿­ä»£å™¨å¯¹è±¡</li><li>æ•°ç»„<pre><code class="js">var arr = []var it = arr[Symbol.iterator]()it.next() // {value: 1, done: false}//...it.next() // {done: true}</code></pre>æ³¨æ„:æœ€åä¼šå‡ºç°è¿™ä¸ª<code>{done: true}</code></li></ul><h3 id="å¯¹è±¡-1"><a href="#å¯¹è±¡-1" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><ul><li>å¯¹è±¡å¹¶æ²¡æœ‰@@iteratoræ‰€ä»¥æ— æ³•å®Œæˆfor of éå†ï¼Œä½†æ˜¯å¯ä»¥è‡ªå·±å†™ä¸€ä¸ª<pre><code class="js">// ä¼šç”Ÿæˆæ— é™ä¸ªéšæœºæ•°var randoms = {  [Symbol.iterator]: function() {    return :function() {      return {value: Math.random()}    }  }}// -----------------------------------var obj = {  a: 2,  b: 3}Object.defineProperty(obj, Symbol.iterator,{  enumerable: false,  writable: false,  configurable: true,  value: function(){    var o = this;    var idx = 0;    var ks = Object.keys(o)    return {      next: function(){        return {          value: o[ks[idx++]],          done: (idx &gt; ks.length)        }      }    }  }})// æ‰‹åŠ¨éå†var it = obj[Symbol.iterator]()it.next() //{ value: 2, done:false}it.next() //{ value: 3, done:false}it.next() //{ done:true}// ä½¿ç”¨for offor(var v of obj) {  console.log(v)}// 2// 3</code></pre></li></ul><h2 id="æ··åˆå¯¹è±¡â€œç±»â€"><a href="#æ··åˆå¯¹è±¡â€œç±»â€" class="headerlink" title="æ··åˆå¯¹è±¡â€œç±»â€"></a>æ··åˆå¯¹è±¡â€œç±»â€</h2><ul><li>è®¾è®¡æ¨¡å¼ï¼šå®ä¾‹åŒ–ï¼Œç»§æ‰¿ï¼Œ(ç›¸å¯¹)å¤šæ€</li><li>å¤šæ€å¹¶ä¸èƒ½è¡¨ç¤ºå­ç±»å’Œçˆ¶ç±»æœ‰å…³è”ï¼Œå­ç±»å¾—åˆ°çš„åªæ˜¯çˆ¶ç±»çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç±»çš„ç»§æ‰¿å®é™…ä¸Šå°±æ˜¯å¤åˆ¶</li><li>superå…³é”®å­—ç”¨äºè®¿é—®å’Œè°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„çˆ¶å¯¹è±¡ä¸Šçš„å‡½æ•°ã€‚<code>super.prop</code>å’Œ<code>super[expr]</code>è¡¨è¾¾å¼åœ¨ç±»å’Œå¯¹è±¡å­—é¢é‡ä»»ä½•æ–¹æ³•å®šä¹‰ä¸­éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</li><li>jsæœ¬èº«å¹¶ä¸æ”¯æŒå¤šé‡ç»§æ‰¿</li><li>ç±»æ„å‘³ç€å¤åˆ¶ï¼Œjså¹¶ä¸ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬</li><li>æ··å…¥æ¨¡å¼å¯ä»¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸‘é™‹å¹¶ä¸”è„†å¼±çš„è¯­æ³•ã€‚</li><li>è€Œä¸”å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰åªèƒ½å¤åˆ¶å¼•ç”¨ï¼Œæ— æ³•å¤åˆ¶è¢«å¼•ç”¨çš„å¯¹è±¡æˆ–è€…å‡½æ•°æœ¬èº«ï¼Œæ‰€ä»¥åœ¨jsä¸­æ¨¡æ‹Ÿç±»æ˜¯å¾—ä¸å¿å¤±çš„ï¼Œè™½ç„¶å¯ä»¥è§£å†³å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šç•™ä¸‹æ›´å¤šçš„éšæ‚£</li></ul><h3 id="åŸå‹"><a href="#åŸå‹" class="headerlink" title="åŸå‹"></a>åŸå‹</h3><ul><li><code>Object.create(...)</code>åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶<code>prototype</code>å…³è”åˆ°æŒ‡å®šå¯¹è±¡</li><li>æ‰€æœ‰å¯¹è±¡çš„<code>prototype</code>æœ€ç»ˆéƒ½æŒ‡å‘äº†å†…ç½®çš„<code>Object.prototype</code>å…¶ä¸­åŒ…å«ç±»å¦‚<code>.toString();.valueOf()</code>ä¹‹ç±»çš„æ–¹æ³•</li></ul><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>å¦‚æœfooä¸ç›´æ¥å­˜åœ¨äºobjä¸Šè€Œæ˜¯å­˜åœ¨äºåŸå‹é“¾ä¸Šå±‚æ—¶ä¼šå‡ºç°çš„ä¸‰ç§æƒ…å†µ</p><ul><li>å¦‚æœä¸Šå±‚çš„fooæ˜¯æ™®é€šçš„æ•°æ®è®¿é—®å±æ€§ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«æ ‡è®°ä¸ºåªè¯»ï¼Œé‚£å°±ä¼šåœ¨å¯¹è±¡ä¸Šç›´æ¥åˆ›å»ºfooå±æ€§ï¼Œå®ƒæ˜¯é®è”½å±æ€§</li><li>å¦‚æœä¸Šå±‚çš„fooæ˜¯åªè¯»å±æ€§çš„è¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œæ­£å¸¸æ¨¡å¼ä¸‹é™é»˜å¤±è´¥ï¼Œå¯ä»¥ç†è§£ä¸ºobjç»§æ‰¿äº†fooä½†æ˜¯fooæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ä¸å¯æ›´æ”¹ï¼ˆå®é™…ä¸Šjså¹¶æ²¡æœ‰ç»§æ‰¿è¿™ä¸€æ¦‚å¿µï¼Œåªæ˜¯ä¸ºäº†ç†è§£ã€<ul><li>è€Œä¸”ä»…é™äº = èµ‹å€¼ä¸­ï¼Œä½¿ç”¨<code>Object.defineProperty()</code>å¹¶ä¸ä¼šå—åˆ°ä»»ä½•å½±å“</li><li>å¦‚æœä¸Šå±‚çš„fooå­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªsetterï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªsetterï¼Œfooä¸ä¼šé‡æ–°å®šä¹‰ä¹Ÿä¸ä¼šç›´æ¥æ·»åŠ åˆ°objä¸­</li></ul></li></ul><h4 id="æ¨¡ä»¿ç±»"><a href="#æ¨¡ä»¿ç±»" class="headerlink" title="æ¨¡ä»¿ç±»"></a>æ¨¡ä»¿ç±»</h4><ul><li>åˆ©ç”¨æ‰€æœ‰å‡½æ•°éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º<code>prototype</code>çš„å…±æœ‰ä¸”ä¸å¯æšä¸¾çš„å±æ€§ï¼Œå¹¶ä¸”ä¼šæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡</li><li>é€šè¿‡<code>new foo()</code>æœ€åæˆ‘ä»¬å¾—åˆ°äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä»–ä»¬äº’ç›¸å…³è”ï¼Œå®é™…ä¸Šnewå¹¶æ²¡æœ‰ç›´æ¥åˆ›å»ºå…³è”ï¼Œè¿™ä¸ªå…³è”åªæ˜¯ä¸€ä¸ªæ„å¤–çš„å‰¯ä½œç”¨</li><li>new ä¼šåŠ«æŒæ‰€æœ‰çš„å‡½æ•°å¹¶ç”¨æ„é€ å¯¹è±¡çš„å½¢å¼æ¥è°ƒç”¨å®ƒï¼Œè€Œä¸”æ— è®ºå¦‚ä½•éƒ½ä¼šæ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œæ¢å¥è¯è¯´åœ¨jsä¸­å¯¹äºâ€œæ„é€ å‡½æ•°â€æœ€å‡†ç¡®çš„è§£é‡Šæ˜¯ï¼šæ‰€æœ‰å¸¦newçš„å‡½æ•°è°ƒç”¨</li><li>å‡½æ•°è¢«åˆ›å»ºçš„æ—¶å€™ä¼šé»˜è®¤åœ¨å…¶<code>prototype</code>ä¸­å£°æ˜ä¸€ä¸ªä¸å¯æšä¸¾çš„<code>construct</code>å±æ€§ï¼ŒæŒ‡å‘å®ƒè‡ªå·±ï¼Œä½¿ç”¨<code>new</code>åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ç”±äºå…¶<code>prototype</code>ä¼šé“¾æ¥åˆ°å‡½æ•°çš„<code>prototype</code>ä¸Šï¼Œæ‰€ä»¥<code>obj.construct</code>ä¼šå§”æ‰˜åˆ°<code>prototype</code>ä¸Šä¹Ÿå°±æ˜¯æŒ‡å‘äº†å‡½æ•°ï¼Œä½†æ˜¯å¦‚æœé‚£ä¸ªå‡½æ•°é‡å®šä¹‰äº†æ•´ä¸ª<code>prototype</code>ï¼Œå†å»æŸ¥æ‰¾<code>obj.construct</code>å°±ä¼šä¸€å±‚ä¸€å±‚å§”æ‰˜åˆ°<code>Object</code>çš„<code>construct</code>ä¸Šï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘<code>Object</code>ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯è¯´constructå¹¶ä¸èƒ½è¡¨ç¤ºç”±â€œæŸå‡½æ•°â€åˆ›å»ºï¼Œå°½é‡ä¸è¦ä½¿ç”¨å®ƒä»¥å‡å°‘éº»çƒ¦</li><li>å®ç°ç±»çš„ç»§æ‰¿,å®é™…ä¸Šæ˜¯å§”æ‰˜<ul><li>æ–¹æ³•ä¸€<code>Bar.prototype = Object.create(Foo.prototype)</code></li><li>æ–¹æ³•äºŒ<code>Object.setPrototypeOf(Bar.prototype, Foo.prototype)</code> ES6è¯­æ³•</li></ul></li><li><code>__proto__</code>å­˜åœ¨äº<code>Object.prototype</code>ä¸­ï¼Œçœ‹èµ·æ¥åƒä¸€ä¸ªå±æ€§ï¼Œä½†æ˜¯æ›´åƒæ˜¯getter/setter</li><li>åˆ›å»ºå…³è”æœ€å¥½çš„æ–¹å¼ä¸æ˜¯åˆ›å»ºä¸€ä¸ªç±»ï¼Œè€Œæ˜¯ä½¿ç”¨<code>Object.create()</code></li><li>æ‰€æœ‰åŒ…å«â€ç»§æ‰¿â€ä¹‹ç±»çš„è¯è¯­éƒ½ä¸é€‚åˆå½¢å®¹jsçš„æ“ä½œï¼Œæ›´åº”è¯¥ä½¿ç”¨â€å§”æ‰˜â€ï¼Œå› ä¸ºâ€œç»§æ‰¿â€æ˜¯å¤åˆ¶æ“ä½œï¼ˆç”±ä¸Šè‡³ä¸‹çš„ï¼‰ï¼Œâ€å§”æ‰˜â€æ˜¯é“¾æ¥æ“ä½œï¼ˆç”±ä¸‹è‡³ä¸Šçš„ï¼‰</li></ul><h4 id="è¡Œä¸ºå§”æ‰˜"><a href="#è¡Œä¸ºå§”æ‰˜" class="headerlink" title="è¡Œä¸ºå§”æ‰˜"></a>è¡Œä¸ºå§”æ‰˜</h4><ul><li><p>jsä¸­<code>[[prototype]]</code>è¿™ä¸ªæœºåˆ¶çš„æœ¬è´¨å°±æ˜¯<strong>å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»</strong></p></li><li><p>åœ¨æ­£å¸¸çš„æ¨¡ä»¿ç±»çš„è®¾è®¡ä¸­ï¼Œä¸Šä»£ç ï¼  </p><pre><code class="js">function Foo(who) {  this.me = who}Foo.prototype.indetify = function() {  return &quot;I am&quot; + this.me}function Bar(who) {  Foo.call(this, who)}   Bar.prototype = Object.create(Foo.prototype)Bar.prototype.speak = function() {  alert(&#39;Hello,&#39;+ this.indetify() + &#39;.&#39;)}var b1 = new Bar(&#39;b1&#39;)var b2 = new Bar(&#39;b2&#39;)b1.speak()b2.speak()</code></pre></li><li><p>åœ¨es6çš„è¯­æ³•ç³–ä¸­ï¼Œä¸Šä»£ç ï¼</p><pre><code class="js">class Foo {  constructor(who) {    this.me = who  }  indetify(){    return &quot;I am&quot; + this.me  }}class Bar extends Foo {  constructor(who) {    super(who)  }  speak(){    alert(&#39;Hello,&#39;+ super.indetify() + &#39;.&#39;)  }}var b1 = new Bar(&#39;b1&#39;)var b2 = new Bar(&#39;b2&#39;)b1.speak()b2.speak()</code></pre></li><li><p>åœ¨å…³è”é£æ ¼ä»£ç ä¸­çš„å®ç°ï¼Œä¸Šä»£ç ï¼</p><pre><code class="js"> var Foo = {   init: function(who) {     this.me = who   },   indetify: function() {     return &quot;I am&quot; + this.me   } } var Bar = Object.create(Foo) Bar.speak = function() {   alert(&#39;Hello,&#39;+ this.indetify() + &#39;.&#39;) } var b1 = Object.create(Bar) b1.init(&#39;b1&#39;) var b2 = Object.create(Bar) b2.init(&#39;b2&#39;) b1.speak() b2.speak()</code></pre></li><li><p>åŒä¸ºå…³è”é£æ ¼ä»£ç ï¼Œä½†æ˜¯è¿›è¡Œäº†è¯­æ³•ä¸Šçš„ä¼˜åŒ–ï¼ˆes6ä¸­çš„ç®€æ´æ–¹æ³•å£°æ˜ï¼‰ï¼ˆObject.setPrototypeOfåç½®å…³è”ï¼‰è¿™æ ·çœ‹èµ·æ¥èˆ’æœä¸å°‘  </p><pre><code class="js"> var Foo = {   init(who) {     this.me = who   },   indetify() {     return &quot;I am&quot; + this.me   } } var Bar = {   speak() {     alert(&#39;Hello,&#39;+ this.indetify() + &#39;.&#39;)   } } Object.setPrototypeOf(Bar, Foo) var b1 = Object.create(Bar) b1.init(&#39;b1&#39;) var b2 = Object.create(Bar) b2.init(&#39;b2&#39;) b1.speak() b2.speak()</code></pre></li></ul><ul><li>instanceof å¦‚æœ Barâ€ç»§æ‰¿äº†â€œFoo é‚£ä¹ˆå°±æ˜¯ <code>Bar.prototype instanceof Foo =&gt; true</code></li><li>å¦‚æœ<code>Bar = Object.create(Foo)</code>åˆ™<code>Foo.isPrototypeOf(Bar) =&gt; true</code>,<code>Object.getPrototypeOf(Bar) === Foo =&gt; ture</code> </li></ul>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TypeScriptå­¦ä¹ ç¬”è®°ï¼ˆé«˜çº§ç¯‡</title>
    <link href="undefined2020/04/ts3/"/>
    <url>2020/04/ts3/</url>
    
    <content type="html"><![CDATA[<h1 id="TypeScripté«˜çº§"><a href="#TypeScripté«˜çº§" class="headerlink" title="TypeScripté«˜çº§"></a>TypeScripté«˜çº§</h1><p><a href="https://ts.xcatliu.com" target="_blank" rel="noopener">TypeScriptå…¥é—¨æ•™ç¨‹</a></p><h2 id="å†™åœ¨å‰è¾¹"><a href="#å†™åœ¨å‰è¾¹" class="headerlink" title="å†™åœ¨å‰è¾¹"></a>å†™åœ¨å‰è¾¹</h2><p>è¿™åªæ˜¯ä¸€ä¸ªç¬”è®°ï¼Œå¹¶ä¸æ˜¯æ•™ç¨‹ï¼Œé˜®ä¸€å³°å¤§ä½¬å†™çš„æ•™ç¨‹é“¾æ¥åœ¨ä¸Šè¾¹</p><h2 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h2><p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚</p><pre><code class="ts">type Name = string;type NameResolver = () =&gt; string;type NameOrResolver = Name | NameResolver;function getName(n: NameOrResolver): Name {    if (typeof n === &#39;string&#39;) {        return n;    } else {        return n();    }}</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>type</code> åˆ›å»ºç±»å‹åˆ«åã€‚</p><blockquote><p>ç±»å‹åˆ«åå¸¸ç”¨äºè”åˆç±»å‹ã€‚</p></blockquote><h2 id="å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹"><a href="#å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹"></a>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹</h2><p>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ç”¨æ¥çº¦æŸå–å€¼åªèƒ½æ˜¯æŸå‡ ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªã€‚</p><pre><code class="ts">type EventNames = &#39;click&#39; | &#39;scroll&#39; | &#39;mousemove&#39;;function handleEvent(ele: Element, event: EventNames) {    // do something}handleEvent(document.getElementById(&#39;hello&#39;), &#39;scroll&#39;);  // æ²¡é—®é¢˜handleEvent(document.getElementById(&#39;world&#39;), &#39;dbclick&#39;); // æŠ¥é”™ï¼Œevent ä¸èƒ½ä¸º &#39;dbclick&#39;// index.ts(7,47): error TS2345: Argument of type &#39;&quot;dbclick&quot;&#39; is not assignable to parameter of type &#39;EventNames&#39;.</code></pre><blockquote><p>æ³¨æ„ï¼Œç±»å‹åˆ«åä¸å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹éƒ½æ˜¯ä½¿ç”¨ <code>type</code> è¿›è¡Œå®šä¹‰ã€‚</p></blockquote><h2 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h2><p>å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º <code>string</code> å’Œ <code>number</code> çš„å…ƒç»„</p><pre><code class="ts">let tom: [string, number] = [&#39;Tom&#39;, 25];let tom2: [string, number]tom2[0] = &#39;Tom&#39;  // ç›´æ¥èµ‹å€¼ä¼šåœ¨nodeå’Œæµè§ˆå™¨ä¸­æŠ¥é”™ï¼Œä½†æ˜¯tsä¸ä¼šæŠ¥é”™tom2[1] = 1 // å¯ä»¥å¯¹å®ƒèµ‹å€¼ï¼Œä¹Ÿå¯ä»¥ä¸èµ‹å€¼ï¼Œä¸ä¼šæŠ¥é”™tom2[1] = &#39;tox&#39; // è¿™ä¸ªåœ°æ–¹å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæŒ‡å®šäº†æ˜¯numbertom2 = [&#39;Tom&#39;] // ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ•´ä½“èµ‹å€¼å¿…é¡»è¦ç¬¦åˆå®šä¹‰tom2.push(&#39;d&#39;) // æ–°åŠ å…¥å¾—å…ƒç´ åªè¦ç¬¦åˆtom2.push(1)let tom3: any = [] // ç»æµ‹è¯•æ­£å¸¸è¿˜æ˜¯ç”¨è¿™ä¸ªæŠŠ</code></pre><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>æšä¸¾ï¼ˆEnumï¼‰ç±»å‹ç”¨äºå–å€¼è¢«é™å®šåœ¨ä¸€å®šèŒƒå›´å†…çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å‘¨åªèƒ½æœ‰ä¸ƒå¤©ï¼Œé¢œè‰²é™å®šä¸ºçº¢ç»¿è“ç­‰ã€‚</p><pre><code class="ts">enum Days {Sun, Mon, Tue, Wed, Thu, Fri, Sat};</code></pre><p>æšä¸¾æˆå‘˜ä¼šè¢«èµ‹å€¼ä¸ºä» 0 å¼€å§‹é€’å¢çš„æ•°å­—ï¼ŒåŒæ—¶ä¹Ÿä¼šå¯¹æšä¸¾å€¼åˆ°æšä¸¾åè¿›è¡Œåå‘æ˜ å°„ï¼š</p><pre><code class="ts">enum Days {Sun, Mon, Tue, Wed, Thu, Fri, Sat};console.log(Days[&quot;Sun&quot;] === 0); // trueconsole.log(Days[&quot;Mon&quot;] === 1); // trueconsole.log(Days[&quot;Tue&quot;] === 2); // trueconsole.log(Days[&quot;Sat&quot;] === 6); // trueconsole.log(Days[0] === &quot;Sun&quot;); // trueconsole.log(Days[1] === &quot;Mon&quot;); // trueconsole.log(Days[2] === &quot;Tue&quot;); // trueconsole.log(Days[6] === &quot;Sat&quot;); // true// ä¼šè¢«ç¼–è¯‘ä¸ºvar Days;(function (Days) {    Days[Days[&quot;Sun&quot;] = 0] = &quot;Sun&quot;;    Days[Days[&quot;Mon&quot;] = 1] = &quot;Mon&quot;;    Days[Days[&quot;Tue&quot;] = 2] = &quot;Tue&quot;;    Days[Days[&quot;Wed&quot;] = 3] = &quot;Wed&quot;;    Days[Days[&quot;Thu&quot;] = 4] = &quot;Thu&quot;;    Days[Days[&quot;Fri&quot;] = 5] = &quot;Fri&quot;;    Days[Days[&quot;Sat&quot;] = 6] = &quot;Sat&quot;;})(Days || (Days = {}));</code></pre><p><strong>æ‰‹åŠ¨èµ‹å€¼</strong></p><pre><code class="ts">enum Days {Sun = 7, Mon = 1, Tue, Wed, Thu, Fri, Sat};console.log(Days[&quot;Sun&quot;] === 7); // trueconsole.log(Days[&quot;Mon&quot;] === 1); // trueconsole.log(Days[&quot;Tue&quot;] === 2); // trueconsole.log(Days[&quot;Sat&quot;] === 6); // true</code></pre><blockquote><p>å¦‚æœæœªæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¸æ‰‹åŠ¨èµ‹å€¼çš„é‡å¤äº†ï¼ŒTypeScript æ˜¯ä¸ä¼šå¯Ÿè§‰åˆ°è¿™ä¸€ç‚¹çš„ï¼Œå°å¿ƒè¢«è¦†ç›–<br>å½“ç„¶ï¼Œæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¹Ÿå¯ä»¥ä¸ºå°æ•°æˆ–è´Ÿæ•°ï¼Œæ­¤æ—¶åç»­æœªæ‰‹åŠ¨èµ‹å€¼çš„é¡¹çš„é€’å¢æ­¥é•¿ä»ä¸º 1</p></blockquote><p>æ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹å¯ä»¥ä¸æ˜¯æ•°å­—ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€æ¥è®© tsc æ— è§†ç±»å‹æ£€æŸ¥ (ç¼–è¯‘å‡ºçš„ js ä»ç„¶æ˜¯å¯ç”¨çš„)</p><pre><code class="ts">enum Days {Sun = 7, Mon, Tue, Wed, Thu, Fri, Sat = &lt;any&gt;&quot;S&quot;};</code></pre><p>å‰é¢æˆ‘ä»¬æ‰€ä¸¾çš„ä¾‹å­éƒ½æ˜¯å¸¸æ•°é¡¹ï¼Œä¸€ä¸ªå…¸å‹çš„è®¡ç®—æ‰€å¾—é¡¹çš„ä¾‹å­ï¼š</p><pre><code class="ts">enum Color {Red, Green, Blue = &quot;blue&quot;.length};  // &quot;blue&quot;.length å°±æ˜¯ä¸€ä¸ªè®¡ç®—æ‰€å¾—é¡¹ã€‚</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯<strong>å¦‚æœç´§æ¥åœ¨è®¡ç®—æ‰€å¾—é¡¹åé¢çš„æ˜¯æœªæ‰‹åŠ¨èµ‹å€¼çš„é¡¹</strong>ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå› ä¸ºæ— æ³•è·å¾—åˆå§‹å€¼è€ŒæŠ¥é”™</p><p><strong>å¸¸æ•°æšä¸¾</strong></p><p>å¸¸æ•°æšä¸¾æ˜¯ä½¿ç”¨ <code>const enum</code> å®šä¹‰çš„æšä¸¾ç±»å‹</p><p>å¸¸æ•°æšä¸¾ä¸æ™®é€šæšä¸¾çš„åŒºåˆ«æ˜¯ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«åˆ é™¤ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å«è®¡ç®—æˆå‘˜ã€‚</p><p><strong>å¤–éƒ¨æšä¸¾</strong></p><p>æ˜¯ä½¿ç”¨ <code>declare enum</code> å®šä¹‰çš„æšä¸¾ç±»å‹</p><blockquote><p>åŒæ—¶ä½¿ç”¨ declare å’Œ const ä¹Ÿæ˜¯å¯ä»¥çš„</p></blockquote><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><p><strong>TypeScript</strong> é™¤äº†å®ç°äº†æ‰€æœ‰ ES6 ä¸­çš„ç±»çš„åŠŸèƒ½ä»¥å¤–ï¼Œè¿˜æ·»åŠ äº†ä¸€äº›æ–°çš„ç”¨æ³•ã€‚</p><p><strong>TypeScript</strong> å¯ä»¥ä½¿ç”¨ä¸‰ç§è®¿é—®ä¿®é¥°ç¬¦ï¼ˆAccess Modifiersï¼‰ï¼Œåˆ†åˆ«æ˜¯ <code>publicã€private</code> å’Œ <code>protected</code>ã€‚</p><p>å½“æ„é€ å‡½æ•°ä¿®é¥°ä¸º <code>private</code> æ—¶ï¼Œè¯¥ç±»ä¸å…è®¸è¢«ç»§æ‰¿æˆ–è€…å®ä¾‹åŒ–</p><p>å½“æ„é€ å‡½æ•°ä¿®é¥°ä¸º <code>protected</code> æ—¶ï¼Œè¯¥ç±»åªå…è®¸è¢«ç»§æ‰¿</p><h3 id="å‚æ•°å±æ€§"><a href="#å‚æ•°å±æ€§" class="headerlink" title="å‚æ•°å±æ€§"></a>å‚æ•°å±æ€§</h3><p>ä¿®é¥°ç¬¦å’Œ<code>readonly</code>è¿˜å¯ä»¥ä½¿ç”¨åœ¨æ„é€ å‡½æ•°å‚æ•°ä¸­ï¼Œç­‰åŒäºç±»ä¸­å®šä¹‰è¯¥å±æ€§åŒæ—¶ç»™è¯¥å±æ€§èµ‹å€¼ï¼Œä½¿ä»£ç æ›´ç®€æ´</p><pre><code class="ts">class Animal {    // public name: string;    public constructor (public name) {        // this.name = name;    }}class Animal {    readonly name;    public constructor(name) {        this.name = name;    }}a.name = &#39;Tom&#39;; //ä¼šæŠ¥é”™</code></pre><blockquote><p>æ³¨æ„å¦‚æœ <code>readonly</code> å’Œå…¶ä»–è®¿é—®ä¿®é¥°ç¬¦åŒæ—¶å­˜åœ¨çš„è¯ï¼Œéœ€è¦å†™åœ¨å…¶åé¢</p></blockquote><h3 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h3><p><code>abstract</code> ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œå…¶ä¸­çš„æŠ½è±¡æ–¹æ³•</p><p>é¦–å…ˆï¼ŒæŠ½è±¡ç±»æ˜¯ä¸å…è®¸è¢«å®ä¾‹åŒ–çš„</p><p>å…¶æ¬¡ï¼ŒæŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»è¢«å­ç±»å®ç°</p><pre><code class="ts">abstract class Animal {    public name;    public constructor(name) {        this.name = name;    }    public abstract sayHi();}class Cat extends Animal {    public sayHi() {        console.log(`Hello`);    }}let animal =  new Animal(&#39;dd&#39;) // ä¼šæŠ¥é”™ï¼ŒæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–let cat = new Cat(&#39;dd&#39;)  // ok</code></pre><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿æ˜¯æŠ½è±¡æ–¹æ³•ï¼ŒTypeScript çš„ç¼–è¯‘ç»“æœä¸­ï¼Œä»ç„¶ä¼šå­˜åœ¨è¿™ä¸ªç±»</p></blockquote><h3 id="ç±»çš„ç±»å‹"><a href="#ç±»çš„ç±»å‹" class="headerlink" title="ç±»çš„ç±»å‹"></a>ç±»çš„ç±»å‹</h3><p>ç»™ç±»åŠ ä¸Š TypeScript çš„ç±»å‹å¾ˆç®€å•ï¼Œä¸æ¥å£ç±»ä¼¼</p><pre><code class="ts">class Animal {    name: string;    constructor(name: string) {        this.name = name;    }    sayHi(): string {      return `My name is ${this.name}`;    }}let a: Animal = new Animal(&#39;Jack&#39;);console.log(a.sayHi()); // My name is Jack</code></pre><h2 id="ç±»ä¸æ¥å£"><a href="#ç±»ä¸æ¥å£" class="headerlink" title="ç±»ä¸æ¥å£"></a>ç±»ä¸æ¥å£</h2><p>æ¥å£ï¼ˆInterfacesï¼‰å¯ä»¥ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ã€è¿›è¡Œæè¿°ã€‚</p><p>è¿™ä¸€ç« ä¸»è¦ä»‹ç»æ¥å£çš„å¦ä¸€ä¸ªç”¨é€”ï¼Œå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ã€‚</p><h3 id="ç±»å®ç°æ¥å£"><a href="#ç±»å®ç°æ¥å£" class="headerlink" title="ç±»å®ç°æ¥å£"></a>ç±»å®ç°æ¥å£</h3><p>å®ç°ï¼ˆ<code>implements</code>ï¼‰æ˜¯é¢å‘å¯¹è±¡ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œæœ‰æ—¶å€™ä¸åŒç±»ä¹‹é—´å¯ä»¥æœ‰ä¸€äº›å…±æœ‰çš„ç‰¹æ€§ï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠç‰¹æ€§æå–æˆæ¥å£ï¼ˆinterfacesï¼‰ï¼Œç”¨ <code>implements</code> å…³é”®å­—æ¥å®ç°ã€‚è¿™ä¸ªç‰¹æ€§å¤§å¤§æé«˜äº†é¢å‘å¯¹è±¡çš„çµæ´»æ€§ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œé—¨æ˜¯ä¸€ä¸ªç±»ï¼Œé˜²ç›—é—¨æ˜¯é—¨çš„å­ç±»ã€‚å¦‚æœé˜²ç›—é—¨æœ‰ä¸€ä¸ªæŠ¥è­¦å™¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç»™é˜²ç›—é—¨æ·»åŠ ä¸€ä¸ªæŠ¥è­¦æ–¹æ³•ã€‚è¿™æ—¶å€™å¦‚æœæœ‰å¦ä¸€ä¸ªç±»ï¼Œè½¦ï¼Œä¹Ÿæœ‰æŠ¥è­¦å™¨çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥è€ƒè™‘æŠŠæŠ¥è­¦å™¨æå–å‡ºæ¥ï¼Œä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œé˜²ç›—é—¨å’Œè½¦éƒ½å»å®ç°å®ƒ</p><p>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</p><pre><code class="ts">interface Alarm {    alert(): void;}interface Light {    lightOn(): void;    lightOff(): void;}class Door {}class SecurityDoor extends Door implements Alarm {    alert() {        console.log(&#39;SecurityDoor alert&#39;);    }}class Car implements Alarm, Light {    alert() {        console.log(&#39;Car alert&#39;);    }    lightOn() {        console.log(&#39;Car light on&#39;);    }    lightOff() {        console.log(&#39;Car light off&#39;);    }}</code></pre><h3 id="æ¥å£ç»§æ‰¿æ¥å£"><a href="#æ¥å£ç»§æ‰¿æ¥å£" class="headerlink" title="æ¥å£ç»§æ‰¿æ¥å£"></a>æ¥å£ç»§æ‰¿æ¥å£</h3><pre><code class="ts">interface Alarm {    alert(): void;}interface LightableAlarm extends Alarm {    lightOn(): void;    lightOff(): void;}</code></pre><h3 id="æ¥å£ç»§æ‰¿ç±»"><a href="#æ¥å£ç»§æ‰¿ç±»" class="headerlink" title="æ¥å£ç»§æ‰¿ç±»"></a>æ¥å£ç»§æ‰¿ç±»</h3><pre><code class="ts">class Point {    x: number;    y: number;    constructor(x: number, y: number) {        this.x = x;        this.y = y;    }}interface Point3d extends Point {    z: number;}let point3d: Point3d = {x: 1, y: 2, z: 3};</code></pre><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§ã€‚</p><pre><code class="ts">function createArray(length: number, value: any): Array&lt;any&gt; {    let result = [];    for (let i = 0; i &lt; length; i++) {        result[i] = value;    }    return result;}createArray(3, &#39;x&#39;); // [&#39;x&#39;, &#39;x&#39;, &#39;x&#39;]function createArray&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {    let result: T[] = [];    for (let i = 0; i &lt; length; i++) {        result[i] = value;    }    return result;}createArray&lt;string&gt;(3, &#39;x&#39;); // [&#39;x&#39;, &#39;x&#39;, &#39;x&#39;]</code></pre><h3 id="å¤šä¸ªç±»å‹å‚æ•°"><a href="#å¤šä¸ªç±»å‹å‚æ•°" class="headerlink" title="å¤šä¸ªç±»å‹å‚æ•°"></a>å¤šä¸ªç±»å‹å‚æ•°</h3><pre><code class="ts">function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] {    return [tuple[1], tuple[0]];}swap([7, &#39;seven&#39;]); // [&#39;seven&#39;, 7]</code></pre><h3 id="æ³›å‹çº¦æŸ"><a href="#æ³›å‹çº¦æŸ" class="headerlink" title="æ³›å‹çº¦æŸ"></a>æ³›å‹çº¦æŸ</h3><p>åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•</p><pre><code class="ts">interface Lengthwise {    length: number;}function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T {    console.log(arg.length);    return arg;}</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† extends çº¦æŸäº†æ³›å‹ T å¿…é¡»ç¬¦åˆæ¥å£ Lengthwise çš„å½¢çŠ¶ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»åŒ…å« length å±æ€§ã€‚</p><p>æ­¤æ—¶å¦‚æœè°ƒç”¨ loggingIdentity çš„æ—¶å€™ï¼Œä¼ å…¥çš„ arg ä¸åŒ…å« lengthï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™äº†</p><p>å¤šä¸ªç±»å‹å‚æ•°ä¹‹é—´ä¹Ÿå¯ä»¥äº’ç›¸çº¦æŸ</p><pre><code class="ts">function copyFields&lt;T extends U, U&gt;(target: T, source: U): T {    for (let id in source) {        target[id] = (&lt;T&gt;source)[id];    }    return target;}let x = { a: 1, b: 2, c: 3, d: 4 };copyFields(x, { b: 10, d: 20 });</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªç±»å‹å‚æ•°ï¼Œå…¶ä¸­è¦æ±‚ T ç»§æ‰¿ Uï¼Œè¿™æ ·å°±ä¿è¯äº† U ä¸Šä¸ä¼šå‡ºç° T ä¸­ä¸å­˜åœ¨çš„å­—æ®µ</p><h3 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h3><pre><code class="ts">interface CreateArrayFunc&lt;T&gt; {    (length: number, value: T): Array&lt;T&gt;;}let createArray: CreateArrayFunc&lt;any&gt;;createArray = function&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {    let result: T[] = [];    for (let i = 0; i &lt; length; i++) {        result[i] = value;    }    return result;}createArray(3, &#39;x&#39;); // [&#39;x&#39;, &#39;x&#39;, &#39;x&#39;]</code></pre><h3 id="æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹"><a href="#æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹" class="headerlink" title="æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹"></a>æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹</h3><p>åœ¨ TypeScript 2.3 ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æµ‹å‡ºæ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨ã€‚</p><pre><code class="ts">function createArray&lt;T = string&gt;(length: number, value: T): Array&lt;T&gt; {    let result: T[] = [];    for (let i = 0; i &lt; length; i++) {        result[i] = value;    }    return result;}</code></pre><h2 id="å£°æ˜çš„åˆå¹¶"><a href="#å£°æ˜çš„åˆå¹¶" class="headerlink" title="å£°æ˜çš„åˆå¹¶"></a>å£°æ˜çš„åˆå¹¶</h2><p>å¦‚æœå®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‡½æ•°ã€æ¥å£æˆ–ç±»ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šåˆå¹¶æˆä¸€ä¸ªç±»å‹</p><h3 id="å‡½æ•°çš„åˆå¹¶"><a href="#å‡½æ•°çš„åˆå¹¶" class="headerlink" title="å‡½æ•°çš„åˆå¹¶"></a>å‡½æ•°çš„åˆå¹¶</h3><pre><code class="ts">function reverse(x: number): number;function reverse(x: string): string;function reverse(x: number | string): number | string {    if (typeof x === &#39;number&#39;) {        return Number(x.toString().split(&#39;&#39;).reverse().join(&#39;&#39;));    } else if (typeof x === &#39;string&#39;) {        return x.split(&#39;&#39;).reverse().join(&#39;&#39;);    }}</code></pre><h3 id="æ¥å£çš„åˆå¹¶"><a href="#æ¥å£çš„åˆå¹¶" class="headerlink" title="æ¥å£çš„åˆå¹¶"></a>æ¥å£çš„åˆå¹¶</h3><pre><code class="ts">interface Alarm {    price: number;}interface Alarm {    weight: number;}// ç›¸å½“äºinterface Alarm {    price: number;    weight: number;}</code></pre><blockquote><p>åˆå¹¶çš„å±æ€§çš„ç±»å‹å¿…é¡»æ˜¯å”¯ä¸€çš„</p></blockquote><p>æ¥å£ä¸­æ–¹æ³•çš„åˆå¹¶ï¼Œä¸å‡½æ•°çš„åˆå¹¶ä¸€æ ·</p><pre><code class="ts">interface Alarm {    price: number;    alert(s: string): string;}interface Alarm {    weight: number;    alert(s: string, n: number): string;}// ç›¸å½“äºinterface Alarm {    price: number;    weight: number;    alert(s: string): string;    alert(s: string, n: number): string;}</code></pre><h2 id="æ‹“å±•é˜…è¯»"><a href="#æ‹“å±•é˜…è¯»" class="headerlink" title="æ‹“å±•é˜…è¯»"></a>æ‹“å±•é˜…è¯»</h2><p><a href="https://ts.xcatliu.com/advanced/further-reading" target="_blank" rel="noopener">ç´¢å¼•é“¾æ¥</a></p>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>ts</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ts</tag>
      
      <tag>é«˜çº§</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TypeScriptå­¦ä¹ ç¬”è®°ï¼ˆåŸºç¡€ç¯‡2</title>
    <link href="undefined2020/04/ts2/"/>
    <url>2020/04/ts2/</url>
    
    <content type="html"><![CDATA[<h1 id="TypeScriptåŸºç¡€"><a href="#TypeScriptåŸºç¡€" class="headerlink" title="TypeScriptåŸºç¡€"></a>TypeScriptåŸºç¡€</h1><p><a href="https://ts.xcatliu.com" target="_blank" rel="noopener">TypeScriptå…¥é—¨æ•™ç¨‹</a></p><h2 id="å†™åœ¨å‰è¾¹"><a href="#å†™åœ¨å‰è¾¹" class="headerlink" title="å†™åœ¨å‰è¾¹"></a>å†™åœ¨å‰è¾¹</h2><p>è¿™åªæ˜¯ä¸€ä¸ªç¬”è®°ï¼Œå¹¶ä¸æ˜¯æ•™ç¨‹ï¼Œé˜®ä¸€å³°å¤§ä½¬å†™çš„æ•™ç¨‹é“¾æ¥åœ¨ä¸Šè¾¹</p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ul><li><p>å‡½æ•°å£°æ˜å®šä¹‰</p><pre><code class="ts">function sum(x: number, y: number): number {  return x + y;}</code></pre><blockquote><p>è¾“å…¥å¤šä½™çš„ï¼ˆæˆ–è€…å°‘äºè¦æ±‚çš„ï¼‰å‚æ•°ï¼Œæ˜¯ä¸è¢«å…è®¸çš„</p></blockquote></li><li><p>å‡½æ•°è¡¨è¾¾å¼å®šä¹‰</p><pre><code class="ts">let mySum: (x: number, y: number) =&gt; number = function (x: number, y: number): number {  return x + y;};</code></pre><blockquote><p>æ³¨æ„ä¸è¦æ··æ·†äº† TypeScript ä¸­çš„ =&gt; å’Œ ES6 ä¸­çš„ =&gt;ã€‚<br>åœ¨ TypeScript çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ=&gt; ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ï¼Œå·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹ã€‚<br>åœ¨ ES6 ä¸­ï¼Œ=&gt; å«åšç®­å¤´å‡½æ•°ï¼Œåº”ç”¨ååˆ†å¹¿æ³›ï¼Œå¯ä»¥å‚è€ƒ ES6 ä¸­çš„ç®­å¤´å‡½æ•°ã€‚</p></blockquote></li><li><p>ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶</p><pre><code class="ts">interface SearchFunc {  (source: string, subString: string): boolean;}let mySearch: SearchFunc;mySearch = function(source: string, subString: string) {  return source.search(subString) !== -1;}</code></pre><blockquote><p>é‡‡ç”¨å‡½æ•°è¡¨è¾¾å¼|æ¥å£å®šä¹‰å‡½æ•°çš„æ–¹å¼æ—¶ï¼Œå¯¹ç­‰å·å·¦ä¾§è¿›è¡Œç±»å‹é™åˆ¶ï¼Œå¯ä»¥ä¿è¯ä»¥åå¯¹å‡½æ•°åèµ‹å€¼æ—¶ä¿è¯å‚æ•°ä¸ªæ•°ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ä¸å˜ã€‚</p></blockquote></li><li><p>å¯é€‰å‚æ•°<br>ä¸æ¥å£ä¸­çš„å¯é€‰å±æ€§ç±»ä¼¼ï¼Œæˆ‘ä»¬ç”¨ <code>?</code> è¡¨ç¤ºå¯é€‰çš„å‚æ•°</p><pre><code class="ts">function buildName(firstName: string, lastName?: string) {  if (lastName) {      return firstName + &#39; &#39; + lastName;  } else {      return firstName;  }}let tomcat = buildName(&#39;Tom&#39;, &#39;Cat&#39;);let tom = buildName(&#39;Tom&#39;);</code></pre><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€‚æ¢å¥è¯è¯´ï¼Œå¯é€‰å‚æ•°åé¢ä¸å…è®¸å†å‡ºç°å¿…éœ€å‚æ•°äº†</p></blockquote></li><li><p>å‚æ•°é»˜è®¤å€¼<br>TypeScript ä¼šå°†æ·»åŠ äº†é»˜è®¤å€¼çš„å‚æ•°è¯†åˆ«ä¸ºå¯é€‰å‚æ•°</p><pre><code class="ts">function buildName(firstName: string, lastName: string = &#39;Cat&#39;) {  return firstName + &#39; &#39; + lastName;}let tomcat = buildName(&#39;Tom&#39;, &#39;Cat&#39;);let tom = buildName(&#39;Tom&#39;);</code></pre><blockquote><p>æ­¤æ—¶å°±ä¸å—ã€Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€çš„é™åˆ¶äº†</p></blockquote></li><li><p>å‰©ä½™å‚æ•°<br>ES6 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>...rest</code> çš„æ–¹å¼è·å–å‡½æ•°ä¸­çš„å‰©ä½™å‚æ•°ï¼ˆrest å‚æ•°ï¼‰</p></li></ul><p>äº‹å®ä¸Šï¼Œitems æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„çš„ç±»å‹æ¥å®šä¹‰å®ƒ</p><pre><code class="ts">function push(array: any[], ...items: any[]) {    items.forEach(function(item) {        array.push(item);    });}let a = [];push(a, 1, 2, 3);</code></pre><blockquote><p>rest å‚æ•°åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°</p></blockquote><ul><li>é‡è½½</li></ul><p>é‡è½½å…è®¸ä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒæ•°é‡æˆ–ç±»å‹çš„å‚æ•°æ—¶ï¼Œä½œå‡ºä¸åŒçš„å¤„ç†ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•° reverseï¼Œè¾“å…¥æ•°å­— 123 çš„æ—¶å€™ï¼Œè¾“å‡ºåè½¬çš„æ•°å­— 321ï¼Œè¾“å…¥å­—ç¬¦ä¸² â€˜helloâ€™ çš„æ—¶å€™ï¼Œè¾“å‡ºåè½¬çš„å­—ç¬¦ä¸² â€˜ollehâ€™ã€‚</p><p>åˆ©ç”¨è”åˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®ç°ï¼š</p><pre><code class="ts">function reverse(x: number): number;function reverse(x: string): string;function reverse(x: number | string): number | string {    if (typeof x === &#39;number&#39;) {        return Number(x.toString().split(&#39;&#39;).reverse().join(&#39;&#39;));    } else if (typeof x === &#39;string&#39;) {        return x.split(&#39;&#39;).reverse().join(&#39;&#39;);    }}</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬é‡å¤å®šä¹‰äº†å¤šæ¬¡å‡½æ•° <code>reverse</code>ï¼Œå‰å‡ æ¬¡éƒ½æ˜¯å‡½æ•°å®šä¹‰ï¼Œæœ€åä¸€æ¬¡æ˜¯å‡½æ•°å®ç°ã€‚åœ¨ç¼–è¾‘å™¨çš„ä»£ç æç¤ºä¸­ï¼Œå¯ä»¥æ­£ç¡®çš„çœ‹åˆ°å‰ä¸¤ä¸ªæç¤ºã€‚</p><blockquote><p>æ³¨æ„ï¼ŒTypeScript ä¼šä¼˜å…ˆä»æœ€å‰é¢çš„å‡½æ•°å®šä¹‰å¼€å§‹åŒ¹é…ï¼Œæ‰€ä»¥å¤šä¸ªå‡½æ•°å®šä¹‰å¦‚æœæœ‰åŒ…å«å…³ç³»ï¼Œéœ€è¦ä¼˜å…ˆæŠŠç²¾ç¡®çš„å®šä¹‰å†™åœ¨å‰é¢ã€‚</p></blockquote><h2 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h2><p>ä½¿ç”¨ <code>å€¼</code> as <code>ç±»å‹</code> çš„è¯­æ³•</p><pre><code class="ts">interface Cat {    name: string;    run(): void;}interface Fish {    name: string;    swim(): void;}function isFish(animal: Cat | Fish) {    if (typeof animal.swim === &#39;function&#39;) {  // ä¼šæŠ¥é”™ï¼Œå› ä¸ºswimä¸æ˜¯Catå’ŒFishçš„å…±æœ‰å±æ€§        return true;    }    return false;}function isFish(animal: Cat | Fish) {    if (typeof (animal as Fish).swim === &#39;function&#39;) { // ä½¿ç”¨æ–­è¨€ï¼Œé¿å…é”™è¯¯        return true;    }    return false;}</code></pre><blockquote><p>ç±»å‹æ–­è¨€åªèƒ½å¤Ÿã€Œæ¬ºéª—ã€TypeScript ç¼–è¯‘å™¨ï¼Œæ— æ³•é¿å…è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œåè€Œæ»¥ç”¨ç±»å‹æ–­è¨€å¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯</p></blockquote><pre><code class="ts">window.foo = 1; // ç›´æ¥èµ‹å€¼ä¼šæç¤ºä½ windowä¸Šè¾¹æ²¡æœ‰fooå±æ€§(window as any).foo = 1; // æŠŠwindowæ–­è¨€æˆä¸€ä¸ªanyå°±å¯ä»¥éšä¾¿èµ‹å€¼äº†</code></pre><ul><li>æ€»ç»“</li></ul><p>è”åˆç±»å‹å¯ä»¥è¢«æ–­è¨€ä¸ºå…¶ä¸­ä¸€ä¸ªç±»å‹</p><p>çˆ¶ç±»å¯ä»¥è¢«æ–­è¨€ä¸ºå­ç±»</p><p>ä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«æ–­è¨€ä¸º any</p><p>any å¯ä»¥è¢«æ–­è¨€ä¸ºä»»ä½•ç±»å‹</p><p>è¦ä½¿å¾— A èƒ½å¤Ÿè¢«æ–­è¨€ä¸º Bï¼Œåªéœ€è¦ A å…¼å®¹ B æˆ– B å…¼å®¹ A å³å¯</p><h2 id="å£°æ˜æ–‡ä»¶"><a href="#å£°æ˜æ–‡ä»¶" class="headerlink" title="å£°æ˜æ–‡ä»¶"></a>å£°æ˜æ–‡ä»¶</h2><p>å½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨å®ƒçš„å£°æ˜æ–‡ä»¶ï¼Œæ‰èƒ½è·å¾—å¯¹åº”çš„ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºç­‰åŠŸèƒ½ã€‚</p><p>å£°æ˜æ–‡ä»¶å¿…éœ€ä»¥ <code>.d.ts</code> ä¸ºåç¼€ã€‚</p><pre><code class="ts">// src/jQuery.d.tsdeclare var jQuery: (selector: string) =&gt; any;</code></pre><blockquote><p>å‡å¦‚ä»ç„¶æ— æ³•è§£æï¼Œé‚£ä¹ˆå¯ä»¥æ£€æŸ¥ä¸‹ <code>tsconfig.json</code> ä¸­çš„ <code>filesã€include</code> å’Œ <code>exclude</code> é…ç½®ï¼Œç¡®ä¿å…¶åŒ…å«äº† <code>jQuery.d.ts</code> æ–‡ä»¶ã€‚</p></blockquote><h2 id="ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶"><a href="#ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶" class="headerlink" title="ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶"></a>ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶</h2><p>å½“ç„¶ï¼ŒjQuery çš„å£°æ˜æ–‡ä»¶ä¸éœ€è¦æˆ‘ä»¬å®šä¹‰äº†ï¼Œç¤¾åŒºå·²ç»å¸®æˆ‘ä»¬å®šä¹‰å¥½äº†ï¼šjQuery in DefinitelyTypedã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹æ¥ä½¿ç”¨ï¼Œä½†æ˜¯æ›´æ¨èçš„æ˜¯ä½¿ç”¨ <code>@types</code> ç»Ÿä¸€ç®¡ç†ç¬¬ä¸‰æ–¹åº“çš„å£°æ˜æ–‡ä»¶ã€‚</p><p><code>@types</code> çš„ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥ç”¨ <code>npm</code> å®‰è£…å¯¹åº”çš„å£°æ˜æ¨¡å—å³å¯ï¼Œä»¥ <code>jQuery</code> ä¸¾ä¾‹</p><pre><code class="cmd">cnpm install @types/jquery --save-dev</code></pre><p>å¯ä»¥åœ¨<a href="https://microsoft.github.io/TypeSearch/" target="_blank" rel="noopener">è¿™ä¸ªé¡µé¢</a>æœç´¢ä½ éœ€è¦çš„å£°æ˜æ–‡ä»¶ã€‚</p><h2 id="ä¹¦å†™å£°æ˜æ–‡ä»¶"><a href="#ä¹¦å†™å£°æ˜æ–‡ä»¶" class="headerlink" title="ä¹¦å†™å£°æ˜æ–‡ä»¶"></a>ä¹¦å†™å£°æ˜æ–‡ä»¶</h2><p>å½“ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›å£°æ˜æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±ä¹¦å†™å£°æ˜æ–‡ä»¶äº†ã€‚å‰é¢åªä»‹ç»äº†æœ€ç®€å•çš„å£°æ˜æ–‡ä»¶å†…å®¹ï¼Œè€ŒçœŸæ­£ä¹¦å†™ä¸€ä¸ªå£°æ˜æ–‡ä»¶å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œä»¥ä¸‹ä¼šè¯¦ç»†ä»‹ç»å¦‚ä½•ä¹¦å†™å£°æ˜æ–‡ä»¶ã€‚</p><ul><li>å…¨å±€å˜é‡<a href="https://ts.xcatliu.com/basics/declaration-files#quan-ju-bian-liang" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>npmåŒ…<a href="https://ts.xcatliu.com/basics/declaration-files#npm-bao" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>UMDåº“<a href="https://ts.xcatliu.com/basics/declaration-files#umd-ku" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>ç›´æ¥æ‰©å±•å…¨å±€å˜é‡<a href="https://ts.xcatliu.com/basics/declaration-files#zhi-jie-kuo-zhan-quan-ju-bian-liang" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>åœ¨ npm åŒ…æˆ– UMD åº“ä¸­æ‰©å±•å…¨å±€å˜é‡<a href="https://ts.xcatliu.com/basics/declaration-files#zai-npm-bao-huo-umd-ku-zhong-kuo-zhan-quan-ju-bian-liang" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>æ¨¡å—æ’ä»¶<a href="https://ts.xcatliu.com/basics/declaration-files#mo-kuai-cha-jian" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>å£°æ˜æ–‡ä»¶ä¸­çš„ä¾èµ–<a href="https://ts.xcatliu.com/basics/declaration-files#sheng-ming-wen-jian-zhong-de-yi-lai" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li><li>è‡ªåŠ¨ç”Ÿæˆå£°æ˜æ–‡ä»¶<a href="https://ts.xcatliu.com/basics/declaration-files#zi-dong-sheng-cheng-sheng-ming-wen-jian" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a></li></ul><h2 id="å†…ç½®å¯¹è±¡"><a href="#å†…ç½®å¯¹è±¡" class="headerlink" title="å†…ç½®å¯¹è±¡"></a>å†…ç½®å¯¹è±¡</h2><p>ECMAScript æ ‡å‡†æä¾›çš„å†…ç½®å¯¹è±¡æœ‰ï¼š<code>Booleanã€Errorã€Dateã€RegExp</code> ç­‰ã€‚</p><pre><code class="ts">let b: Boolean = new Boolean(1);let e: Error = new Error(&#39;Error occurred&#39;);let d: Date = new Date();let r: RegExp = /[a-z]/;</code></pre><blockquote><p>æ›´å¤šçš„å†…ç½®å¯¹è±¡ï¼Œå¯ä»¥æŸ¥çœ‹ MDN çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">æ–‡æ¡£</a>ã€‚</p></blockquote><h2 id="DOM-å’Œ-BOM-çš„å†…ç½®å¯¹è±¡"><a href="#DOM-å’Œ-BOM-çš„å†…ç½®å¯¹è±¡" class="headerlink" title="DOM å’Œ BOM çš„å†…ç½®å¯¹è±¡"></a>DOM å’Œ BOM çš„å†…ç½®å¯¹è±¡</h2><p>DOM å’Œ BOM æä¾›çš„å†…ç½®å¯¹è±¡æœ‰ï¼š<code>Documentã€HTMLElementã€Eventã€NodeList</code> ç­‰ã€‚</p><pre><code class="ts">let body: HTMLElement = document.body;let allDiv: NodeList = document.querySelectorAll(&#39;div&#39;);document.addEventListener(&#39;click&#39;, function(e: MouseEvent) {  // Do something});</code></pre><h2 id="ç”¨-TypeScript-å†™-Node-js"><a href="#ç”¨-TypeScript-å†™-Node-js" class="headerlink" title="ç”¨ TypeScript å†™ Node.js"></a>ç”¨ TypeScript å†™ Node.js</h2><p>Node.js ä¸æ˜¯å†…ç½®å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæƒ³ç”¨ TypeScript å†™ Node.jsï¼Œåˆ™éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶ï¼š</p><pre><code class="cmd">npm install @types/node --save-dev</code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>ts</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ts</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TypeScriptå­¦ä¹ ç¬”è®°ï¼ˆåŸºç¡€ç¯‡1</title>
    <link href="undefined2020/04/ts1/"/>
    <url>2020/04/ts1/</url>
    
    <content type="html"><![CDATA[<h1 id="TypeScriptåŸºç¡€"><a href="#TypeScriptåŸºç¡€" class="headerlink" title="TypeScriptåŸºç¡€"></a>TypeScriptåŸºç¡€</h1><p><a href="https://ts.xcatliu.com" target="_blank" rel="noopener">TypeScriptå…¥é—¨æ•™ç¨‹</a></p><h2 id="å†™åœ¨å‰è¾¹"><a href="#å†™åœ¨å‰è¾¹" class="headerlink" title="å†™åœ¨å‰è¾¹"></a>å†™åœ¨å‰è¾¹</h2><p>è¿™åªæ˜¯ä¸€ä¸ªç¬”è®°ï¼Œå¹¶ä¸æ˜¯æ•™ç¨‹ï¼Œé˜®ä¸€å³°å¤§ä½¬å†™çš„æ•™ç¨‹é“¾æ¥åœ¨ä¸Šè¾¹</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre><code>cnpm install -g typescript</code></pre><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><pre><code>tsc hello.ts</code></pre><blockquote><p>æˆ‘ä»¬çº¦å®šä½¿ç”¨ TypeScript ç¼–å†™çš„æ–‡ä»¶ä»¥ .ts ä¸ºåç¼€ï¼Œç”¨ TypeScript ç¼–å†™ React æ—¶ï¼Œä»¥ .tsx ä¸ºåç¼€ã€‚</p></blockquote><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>TypeScript ä¸­ï¼Œä½¿ç”¨ : æŒ‡å®šå˜é‡çš„ç±»å‹ï¼Œ: çš„å‰åæœ‰æ²¡æœ‰ç©ºæ ¼éƒ½å¯ä»¥ã€‚</p><blockquote><p>TypeScript åªä¼šè¿›è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚æœå‘ç°æœ‰é”™è¯¯ï¼Œç¼–è¯‘çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚<br>å¦‚æœè¦åœ¨æŠ¥é”™çš„æ—¶å€™ç»ˆæ­¢ js æ–‡ä»¶çš„ç”Ÿæˆï¼Œå¯ä»¥åœ¨ tsconfig.json ä¸­é…ç½® noEmitOnError å³å¯ã€‚å…³äº tsconfig.jsonï¼Œè¯·å‚é˜…<a href="https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/tsconfig.json.html" target="_blank" rel="noopener">å®˜æ–¹æ‰‹å†Œ</a></p></blockquote><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><p>JavaScript çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼šåŸå§‹æ•°æ®ç±»å‹ï¼ˆPrimitive data typesï¼‰å’Œå¯¹è±¡ç±»å‹ï¼ˆObject typesï¼‰ã€‚</p><p>åŸå§‹æ•°æ®ç±»å‹åŒ…æ‹¬ï¼šå¸ƒå°”å€¼ã€æ•°å€¼ã€å­—ç¬¦ä¸²ã€nullã€undefined ä»¥åŠ ES6 ä¸­çš„æ–°ç±»å‹ Symbolã€‚</p><h3 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h3><p><code>boolean</code></p><pre><code class="ts">let isDone: boolean = false;</code></pre><p>æ³¨æ„ï¼Œä½¿ç”¨æ„é€ å‡½æ•° <strong>Boolean</strong> åˆ›é€ çš„å¯¹è±¡ä¸æ˜¯å¸ƒå°”å€¼ï¼š</p><pre><code class="ts">let createdByNewBoolean: boolean = new Boolean(1); // ä¼šæŠ¥é”™çš„ï¼Œæ˜¯ä¸€ä¸ªBooleanå¯¹è±¡let createdByNewBoolean: boolean = Boolean(1); // é€šè¿‡ï¼Œæ˜¯ä¸€ä¸ªboolean</code></pre><blockquote><p>åœ¨ TypeScript ä¸­ï¼Œboolean æ˜¯ JavaScript ä¸­çš„åŸºæœ¬ç±»å‹ï¼Œè€Œ Boolean æ˜¯ JavaScript ä¸­çš„æ„é€ å‡½æ•°ã€‚å…¶ä»–åŸºæœ¬ç±»å‹ï¼ˆé™¤äº† null å’Œ undefinedï¼‰ä¸€æ ·ï¼Œä¸å†èµ˜è¿°ã€‚</p></blockquote><h3 id="æ•°å€¼"><a href="#æ•°å€¼" class="headerlink" title="æ•°å€¼"></a>æ•°å€¼</h3><p><code>number</code></p><pre><code class="ts">let decLiteral: number = 6;let hexLiteral: number = 0xf00d;// ES6 ä¸­çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ³•let binaryLiteral: number = 0b1010;// ES6 ä¸­çš„å…«è¿›åˆ¶è¡¨ç¤ºæ³•let octalLiteral: number = 0o744;let notANumber: number = NaN;let infinityNumber: number = Infinity;</code></pre><blockquote><p>ç¼–è¯‘å®Œä¼šè‡ªåŠ¨è½¬æˆåè¿›åˆ¶</p></blockquote><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><p><code>string</code></p><pre><code class="ts">let myName: string = &#39;Tom&#39;;let myAge: number = 25;// æ¨¡æ¿å­—ç¬¦ä¸²let sentence: string = `Hello, my name is ${myName}.I&#39;ll be ${myAge + 1} years old next month.`;</code></pre><blockquote><p>ç¼–è¯‘å®Œæ¨¡æ¿å­—ç¬¦ä¸²ä¼šå˜æˆåŠ å·ä¸²è”çš„å½¢å¼ï¼Œè‡ªåŠ¨åŠ <code>/n</code></p></blockquote><h3 id="ç©ºå€¼"><a href="#ç©ºå€¼" class="headerlink" title="ç©ºå€¼"></a>ç©ºå€¼</h3><p><code>void</code></p><p><strong>JavaScript</strong> æ²¡æœ‰ç©ºå€¼ï¼ˆVoidï¼‰çš„æ¦‚å¿µï¼Œåœ¨ <strong>TypeScript</strong> ä¸­ï¼Œå¯ä»¥ç”¨ <code>void</code> è¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¿”å›å€¼çš„å‡½æ•°ï¼š</p><pre><code class="ts">function alertName(): void {    alert(&#39;My name is Tom&#39;);}</code></pre><blockquote><p>å£°æ˜ä¸€ä¸ª <code>void</code> ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå› ä¸ºä½ åªèƒ½å°†å®ƒèµ‹å€¼ä¸º <code>undefined</code> å’Œ <code>null</code></p></blockquote><h3 id="Null-å’Œ-Undefined"><a href="#Null-å’Œ-Undefined" class="headerlink" title="Null å’Œ Undefined"></a>Null å’Œ Undefined</h3><p><code>null undefined</code></p><pre><code class="ts">let u: undefined = undefined;let n: null = null;</code></pre><blockquote><p>ä¸ <code>void</code> çš„åŒºåˆ«æ˜¯ï¼Œ<code>undefined</code> å’Œ <code>null</code> æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>undefined</code> ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡ï¼Œä½†æ˜¯åè¿‡æ¥ <code>void</code> ä¸èƒ½èµ‹å€¼ç»™ä»»ä½•ç±»å‹çš„å˜é‡</p></blockquote><h3 id="ä»»æ„å€¼"><a href="#ä»»æ„å€¼" class="headerlink" title="ä»»æ„å€¼"></a>ä»»æ„å€¼</h3><p><code>any</code><br>å¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šç±»å‹ï¼Œåœ¨èµ‹å€¼ä¸­æ”¹å˜ç±»å‹æ˜¯ä¸è¢«å…è®¸çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœæ˜¯<code>any</code>ç±»å‹ï¼Œåˆ™å…è®¸è¢«èµ‹å€¼ä¸ºä»»æ„ç±»å‹</p><pre><code class="ts">let myFavoriteNumber: any = &#39;seven&#39;;myFavoriteNumber = 7;</code></pre><blockquote><p>å¯ä»¥è®¤ä¸ºï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ä¸ºä»»æ„å€¼ä¹‹åï¼Œå¯¹å®ƒçš„ä»»ä½•æ“ä½œï¼Œè¿”å›çš„å†…å®¹çš„ç±»å‹éƒ½æ˜¯ä»»æ„å€¼ã€‚</p></blockquote><p>å˜é‡å¦‚æœåœ¨å£°æ˜çš„æ—¶å€™ï¼ŒæœªæŒ‡å®šå…¶ç±»å‹ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è¯†åˆ«ä¸ºä»»æ„å€¼ç±»å‹</p><pre><code class="ts">let something;something = &#39;seven&#39;;something = 7;something.setName(&#39;Tom&#39;);</code></pre><h3 id="ç±»å‹æ¨è®º"><a href="#ç±»å‹æ¨è®º" class="headerlink" title="ç±»å‹æ¨è®º"></a>ç±»å‹æ¨è®º</h3><p>å¦‚æœå˜é‡åœ¨å®šä¹‰çš„æ—¶å€™èµ‹å€¼ï¼Œä½†æ˜¯æ²¡æŒ‡å®šç±»å‹ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œæ¨è®º</p><pre><code class="ts">let myFavoriteNumber = &#39;seven&#39;;// ç­‰ä»·äºlet myFavoriteNumber: string = &#39;seven&#39;;myFavoriteNumber = 7; // ä¼šæŠ¥é”™</code></pre><blockquote><p>å¦‚æœå®šä¹‰çš„æ—¶å€™æ²¡æœ‰èµ‹å€¼ï¼Œä¸ç®¡ä¹‹åæœ‰æ²¡æœ‰èµ‹å€¼ï¼Œéƒ½ä¼šè¢«æ¨æ–­æˆ <code>any</code> ç±»å‹è€Œå®Œå…¨ä¸è¢«ç±»å‹æ£€æŸ¥ï¼š</p></blockquote><h3 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h3><p>è”åˆç±»å‹ä½¿ç”¨ | åˆ†éš”æ¯ä¸ªç±»å‹ã€‚</p><pre><code class="ts">let myFavoriteNumber: string | number;myFavoriteNumber = &#39;seven&#39;; // okmyFavoriteNumber = 7; // okmyFavoriteNumber = true; // ä¼šæŠ¥é”™</code></pre><p>å½“ TypeScript ä¸ç¡®å®šä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸ªç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œå…±æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼š</p><pre><code class="ts">function getLength(something: string | number): number {    return something.length; // ä¼šæŠ¥é”™ï¼Œ.lengthä¸æ˜¯stringå’Œnumberå…±æœ‰çš„å±æ€§    return something.toString(); // ok}</code></pre><p>è”åˆç±»å‹çš„å˜é‡åœ¨è¢«èµ‹å€¼çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ç±»å‹æ¨è®ºçš„è§„åˆ™æ¨æ–­å‡ºä¸€ä¸ªç±»å‹</p><pre><code class="ts">let myFavoriteNumber: string | number;myFavoriteNumber = &#39;seven&#39;;console.log(myFavoriteNumber.length); // 5myFavoriteNumber = 7;console.log(myFavoriteNumber.length); // ä¼šæŠ¥é”™</code></pre><h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£ï¼ˆInterfacesï¼‰æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±»ï¼ˆclassesï¼‰å»å®ç°ï¼ˆimplementï¼‰ã€‚</p><p>TypeScript ä¸­çš„æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ã€è¿›è¡Œæè¿°ã€‚</p><pre><code class="ts">interface IPerson {    name: string;    age: number;}let tom: IPerson = {    name: &#39;Tom&#39;,    age: 25};</code></pre><p>æ¥å£ä¸€èˆ¬é¦–å­—æ¯å¤§å†™ï¼Œæœ‰çš„ç¼–ç¨‹è¯­è¨€ä¼šå»ºè®®æ¥å£çš„åç§°åŠ ä¸Š<code>I</code>å‰ç¼€</p><p>å®šä¹‰çš„å˜é‡æ¯”æ¥å£å¤šå±æ€§å°‘å±æ€§éƒ½æ˜¯ä¸å…è®¸çš„ï¼Œ<strong>èµ‹å€¼çš„æ—¶å€™ï¼Œå˜é‡çš„å½¢çŠ¶å¿…é¡»å’Œæ¥å£çš„å½¢çŠ¶ä¿æŒä¸€è‡´ã€‚</strong></p><ul><li>å¯é€‰å±æ€§</li></ul><p><strong>å¯é€‰å±æ€§çš„å«ä¹‰æ˜¯è¯¥å±æ€§å¯ä»¥ä¸å­˜åœ¨</strong>ï¼Œè¿™æ—¶<strong>ä»ç„¶ä¸å…è®¸æ·»åŠ æœªå®šä¹‰çš„å±æ€§</strong></p><pre><code class="ts">interface Person {    name: string;    age?: number;}let tom: Person = {    name: &#39;Tom&#39;,    gender: &#39;male&#39; // è¿™å¥å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå‡ºç°äº†æœªåŠ å®šä¹‰çš„å±æ€§};</code></pre><ul><li>ä»»æ„å±æ€§</li></ul><p>ä¸€æ—¦å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§çš„ç±»å‹éƒ½å¿…é¡»æ˜¯<strong>å®ƒçš„ç±»å‹çš„å­é›†</strong></p><pre><code class="ts">interface Person {    name: string;    age?: number;    [propName: string]: string;}let tom: Person = {    name: &#39;Tom&#39;,    age: 25, // è¿™å¥å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºä¸æ˜¯stringï¼Œå³ä½¿ä¸Šè¾¹å®šä¹‰ageæ˜¯numberä¹Ÿä¸è¡Œ    gender: &#39;male&#39;,};interface Person {    name: string;    age?: number;    [propName: string]: string | number; // æ¥å£å®šä¹‰æˆè¿™æ ·ä½¿ç”¨è”åˆç±»å‹ageå°±ä¸ä¼šæŠ¥é”™äº†}</code></pre><ul><li>åªè¯»å±æ€§</li></ul><p>ä¸€äº›å­—æ®µåªèƒ½åœ¨åˆ›å»ºçš„æ—¶å€™è¢«èµ‹å€¼</p><pre><code class="ts">interface Person {    readonly id: number;    name: string;    age?: number;    [propName: string]: any;}let tom: Person = {    id: 89757,    name: &#39;Tom&#39;,    gender: &#39;male&#39;};tom.id = 9527;// index.ts(14,5): error TS2540: Cannot assign to &#39;id&#39; because it is a constant or a read-only property.</code></pre><blockquote><p>æ³¨æ„ï¼Œåªè¯»çš„çº¦æŸå­˜åœ¨äºç¬¬ä¸€æ¬¡ç»™å¯¹è±¡èµ‹å€¼çš„æ—¶å€™ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€æ¬¡ç»™åªè¯»å±æ€§èµ‹å€¼çš„æ—¶å€™</p></blockquote><h3 id="æ•°ç»„çš„ç±»å‹"><a href="#æ•°ç»„çš„ç±»å‹" class="headerlink" title="æ•°ç»„çš„ç±»å‹"></a>æ•°ç»„çš„ç±»å‹</h3><ul><li><p>ã€Œç±»å‹ + æ–¹æ‹¬å·ã€è¡¨ç¤ºæ³•</p><pre><code class="ts">let fibonacci: number[] = [1, 1, 2, 3, 5];</code></pre><blockquote><p>æ•°ç»„çš„é¡¹ä¸­<strong>ä¸å…è®¸</strong>å‡ºç°å…¶ä»–çš„ç±»å‹<br>æ•°ç»„çš„ä¸€äº›æ–¹æ³•çš„å‚æ•°ä¹Ÿä¼šæ ¹æ®æ•°ç»„åœ¨å®šä¹‰æ—¶çº¦å®šçš„ç±»å‹è¿›è¡Œé™åˆ¶,å¦‚æœçº¦å®šæ˜¯<code>number</code>ç±»å‹,<strong>push</strong>ä¸€ä¸ª<code>string</code>ç±»å‹å°±ä¼šæŠ¥é”™</p></blockquote></li><li><p>æ•°ç»„æ³›å‹</p><pre><code class="ts">let fibonacci: Array&lt;number&gt; = [1, 1, 2, 3, 5];</code></pre></li><li><p>ç”¨æ¥å£è¡¨ç¤ºæ•°ç»„<br><code>NumberArray</code> è¡¨ç¤ºï¼šåªè¦ç´¢å¼•çš„ç±»å‹æ˜¯æ•°å­—æ—¶ï¼Œé‚£ä¹ˆå€¼çš„ç±»å‹å¿…é¡»æ˜¯æ•°å­—ã€‚</p><pre><code class="ts">interface NumberArray {  [index: number]: number;}let fibonacci: NumberArray = [1, 1, 2, 3, 5];</code></pre></li><li><p>ç±»æ•°ç»„<br>ç±»æ•°ç»„ï¼ˆArray-like Objectï¼‰ä¸æ˜¯æ•°ç»„ç±»å‹ï¼Œæ¯”å¦‚ argumentsï¼š</p><pre><code class="ts">function sum() {  let args: {      [index: number]: number;      length: number;      callee: Function;  } = arguments;}</code></pre></li><li><p>any åœ¨æ•°ç»„ä¸­çš„åº”ç”¨<br>ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•æ˜¯ï¼Œç”¨ any è¡¨ç¤ºæ•°ç»„ä¸­å…è®¸å‡ºç°ä»»æ„ç±»å‹ï¼š</p><pre><code class="ts">let list: any[] = [&#39;xcatliu&#39;, 25, { website: &#39;http://xcatliu.com&#39; }];</code></pre></li></ul>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€</category>
      
      <category>ts</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ts</tag>
      
      <tag>åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Koaå­¦ä¹ ç¬”è®°</title>
    <link href="undefined2020/04/js-koa/"/>
    <url>2020/04/js-koa/</url>
    
    <content type="html"><![CDATA[<h1 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre><code>cnpm install koa --save</code></pre><h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello-world"></a>hello-world</h2><pre><code class="js">const Koa = require(&#39;koa&#39;);const app = new Koa();app.use(async ctx =&gt; {  ctx.body = &#39;Hello World&#39;;});app.listen(3000);</code></pre><h2 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h2><p>ä½¿ç”¨yieldä»¥åŠnext,å½“ä¸€ä¸ªä¸­é—´ä»¶è°ƒç”¨<code>next()</code>å‡½æ•°æ—¶ï¼Œå‡½æ•°æŒ‚èµ·å¹¶æ§ä»¶ä¼ é€’ç»™å®šä¹‰çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚åœ¨æ²¡æœ‰æ›´å¤šçš„ä¸­é—´ä»¶æ‰§è¡Œä¸‹æ¸¸ä¹‹åï¼Œå †æ ˆå°†é€€å‡ºï¼Œå¹¶ä¸”æ¯ä¸ªä¸­é—´ä»¶è¢«æ¢å¤ä»¥æ‰§è¡Œå…¶ä¸Šæ¸¸è¡Œä¸ºã€‚</p><pre><code class="js">const Koa = require(&#39;koa&#39;);const app = new Koa();const one = (ctx, next) =&gt; {  console.log(&#39;&gt;&gt; one&#39;);  next();  console.log(&#39;&lt;&lt; one&#39;);}const two = (ctx, next) =&gt; {  console.log(&#39;&gt;&gt; two&#39;);  next();  console.log(&#39;&lt;&lt; two&#39;);}const three = (ctx, next) =&gt; {  console.log(&#39;&gt;&gt; three&#39;);  next();  console.log(&#39;&lt;&lt; three&#39;);}app.use(one);app.use(two);app.use(three);app.listen(3000);/*&gt;&gt; one&gt;&gt; two&gt;&gt; three&lt;&lt; three&lt;&lt; two&lt;&lt; one&gt;&gt; one&gt;&gt; two&gt;&gt; three&lt;&lt; three&lt;&lt; two&lt;&lt; one*/</code></pre><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åº”ç”¨é…ç½®æ˜¯ app å®ä¾‹å±æ€§ï¼Œç›®å‰æ”¯æŒçš„é…ç½®é¡¹å¦‚ä¸‹</p><ul><li>app.env nodeè¿è¡Œç¯å¢ƒï¼Œé»˜è®¤ä¸º NODE_ENV or â€œdevelopmentâ€</li><li>app.proxy è¡¨ç¤ºæ˜¯å¦å¼€å¯ä»£ç†ä¿¡ä»»å¼€å…³,é»˜è®¤ä¸ºfalseï¼Œå¦‚æœä¸º trueï¼Œåˆ™è§£æ â€œHostâ€ çš„ header åŸŸï¼Œå¯¹äºè·å–requestè¯·æ±‚ä¸­çš„hostï¼Œprotocolï¼Œipåˆ†åˆ«ä¼˜å…ˆä»Headerå­—æ®µä¸­çš„<a href="https://cloud.tencent.com/developer/section/1190030" target="_blank" rel="noopener">X-Forwarded-Host</a>ï¼ŒX-Forwarded-Protoï¼ŒX-Forwarded-Forè·å–</li><li>app.subdomainOffset è¡¨ç¤ºå­åŸŸåæ˜¯ä»ç¬¬å‡ çº§å¼€å§‹çš„ï¼Œè¿™ä¸ªå‚æ•°å†³å®šäº†request.subdomainsçš„è¿”å›ç»“æœï¼Œé»˜è®¤å€¼ä¸º2ï¼Œè¡¨ç¤º .subdomains æ‰€å¿½ç•¥çš„å­—ç¬¦åç§»é‡ã€‚<pre><code class="js">//æ¯”å¦‚æœ‰netease.youdata.163.comåŸŸåapp.subdomainOffset = 2;console.log(ctx.request.subdomains);  //è¿”å›[&quot;youdata&quot;, &quot;netease&quot;]app.subdomainOffset = 3;console.log(ctx.request.subdomains);  //è¿”å›[&quot;netease&quot;]//koaè·å–subdomainsçš„æºç get subdomains() {    const offset = this.app.subdomainOffset;    const hostname = this.hostname;    if (net.isIP(hostname)) return [];    return hostname    .split(&#39;.&#39;)    .reverse()    .slice(offset);}</code></pre></li></ul><h2 id="app-listen-â€¦"><a href="#app-listen-â€¦" class="headerlink" title="app.listen(â€¦)"></a>app.listen(â€¦)</h2><p><code>app.listen(...)</code> å®é™…ä¸Šæ˜¯ä»¥ä¸‹ä»£ç çš„è¯­æ³•ç³–</p><pre><code class="js">http.createServer(app.callback()).listen(3000);</code></pre><p>è¿™æ„å‘³ç€æ‚¨å¯ä»¥åŒæ—¶æ”¯æŒ <strong>HTTP</strong> å’Œ <strong>HTTPS</strong>ï¼Œæˆ–è€…åœ¨å¤šä¸ªç«¯å£ç›‘å¬åŒä¸€ä¸ªåº”ç”¨</p><pre><code class="js">const http = require(&#39;http&#39;);const https = require(&#39;https&#39;);const Koa = require(&#39;koa&#39;);const app = new Koa();http.createServer(app.callback()).listen(3000);https.createServer(app.callback()).listen(3001);</code></pre><h2 id="app-callback"><a href="#app-callback" class="headerlink" title="app.callback()"></a>app.callback()</h2><p>è¿”å›ä¸€ä¸ªé€‚åˆ <code>http.createServer()</code> æ–¹æ³•çš„å›è°ƒå‡½æ•°ç”¨æ¥å¤„ç†è¯·æ±‚ã€‚ æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªå›è°ƒå‡½æ•°å°†æ‚¨çš„appæŒ‚è½½åœ¨ Connect/Express åº”ç”¨ä¸Šã€‚</p><pre><code class="js">//koaçš„callbackå‡½æ•°å®ç°æºç function callback() {      const fn = compose(this.middleware);   //koa-composeåŒ…è´Ÿè´£å°†å¤šä¸ªä¸­é—´ä»¶ç»„è£…æˆä¸€ä¸ªä¸­é—´ä»¶  if (!this.listeners(&#39;error&#39;).length) this.on(&#39;error&#39;, this.onerror);      const handleRequest = (req, res) =&gt; {          const ctx = this.createContext(req, res);  //è¿™ä¸ªå‡½æ•°è´Ÿè´£ç”Ÿæˆä¸­é—´ä»¶æ¥æ”¶å™¨ctxï¼Œç»‘å®šä¸€äº›å¯¹è±¡çš„å…³è”å…³ç³»      return this.handleRequest(ctx, fn);  //ä½¿ç”¨ä¸­é—´ä»¶å‡½æ•°fnå¤„ç†è·¯ç”±è¯·æ±‚    };        return handleRequest;  }  //handleRequestå‡½æ•°çš„æºç å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œæ‰§è¡Œä¸­é—´ä»¶å‡½æ•°ï¼Œå¹¶åšä¸€äº›è¿”å›å¤„ç†å’Œå¼‚å¸¸å¤„ç†  function handleRequest(ctx, fnMiddleware) {        const res = ctx.res;    res.statusCode = 404;        const onerror = err =&gt; ctx.onerror(err);        const handleResponse = () =&gt; respond(ctx);    onFinished(res, onerror);        return fnMiddleware(ctx).then(handleResponse).catch(onerror);  }</code></pre><h2 id="app-use-function"><a href="#app-use-function" class="headerlink" title="app.use(function)"></a>app.use(function)</h2><p>useå‡½æ•°ä¸»è¦ä½œç”¨æ˜¯ç»™app.middlewareæ•°ç»„ä¸­æ·»åŠ ä¸­é—´ä»¶</p><h2 id="app-keys"><a href="#app-keys" class="headerlink" title="app.keys="></a>app.keys=</h2><p>è¯¥å¯†é’¥ä¼šè¢«ä¼ é€’ç»™KeyGrip, å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥è‡ªå·±ç”Ÿæˆ KeyGrip. ä¾‹å¦‚:</p><pre><code class="js">app.keys = [&#39;im a newer secret&#39;, &#39;i like turtle&#39;];app.keys = new KeyGrip([&#39;im a newer secret&#39;, &#39;i like turtle&#39;], &#39;sha256&#39;);</code></pre><p>åœ¨è¿›è¡Œcookieç­¾åæ—¶ï¼Œåªæœ‰è®¾ç½® signed ä¸º true çš„æ—¶å€™ï¼Œæ‰ä¼šä½¿ç”¨å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼š</p><pre><code class="js">ctx.cookies.set(&#39;name&#39;, &#39;tobi&#39;, { signed: true });</code></pre><h2 id="app-context"><a href="#app-context" class="headerlink" title="app.context"></a>app.context</h2><p>app.contextæ˜¯ä»ä¸­åˆ›å»ºctxçš„åŸå‹ã€‚ å¯ä»¥é€šè¿‡ç¼–è¾‘app.contextå‘ctxæ·»åŠ å…¶ä»–å±æ€§ã€‚å½“éœ€è¦å°†ctxæ·»åŠ åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œè¿™å°†ä¼šéå¸¸æœ‰ç”¨ã€‚è¿™å¯èƒ½ä¼šæ›´åŠ æœ‰æ•ˆï¼ˆä¸éœ€è¦ä¸­é—´ä»¶ï¼‰å’Œ/æˆ–æ›´ç®€å•ï¼ˆæ›´å°‘çš„require()ï¼‰ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ›´å¤šçš„ä¾èµ–äºctxï¼Œè¿™å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ç§åå‘æ¨¡å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä»ctxä¸­æ·»åŠ å¯¹æ•°æ®åº“çš„å¼•ç”¨ï¼š</p><pre><code class="js">app.context.db = db();app.use(async ctx =&gt; {  console.log(ctx.db);});</code></pre><blockquote><p>ctxä¸Šçš„å¾ˆå¤šå±æ€§æ˜¯è¢«é™åˆ¶çš„ï¼Œåœ¨app.contextåªèƒ½é€šè¿‡ä½¿ç”¨Object.defineProperty()æ¥ç¼–è¾‘è¿™äº›å±æ€§ï¼ˆä¸æ¨èï¼‰ã€‚å¯ä»¥åœ¨ <a href="https://github.com/koajs/koa/issues/652ä¸ŠæŸ¥é˜…" target="_blank" rel="noopener">https://github.com/koajs/koa/issues/652ä¸ŠæŸ¥é˜…</a><br>å·²å®‰è£…çš„APPæ²¿ç”¨çˆ¶çº§çš„ctxå’Œé…ç½®ã€‚å› æ­¤ï¼Œå®‰è£…çš„åº”ç”¨ç¨‹åºåªæ˜¯ä¸€ç»„ä¸­é—´ä»¶ã€‚</p></blockquote><h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><p>é»˜è®¤æƒ…å†µä¸‹Koaä¼šå°†æ‰€æœ‰é”™è¯¯ä¿¡æ¯è¾“å‡ºåˆ° stderrï¼Œ é™¤é app.silent æ˜¯ true.å½“err.statusæ˜¯404æˆ–è€…err.exposeæ—¶ï¼Œé»˜è®¤é”™è¯¯å¤„ç†ç¨‹åºä¹Ÿä¸ä¼šè¾“å‡ºé”™è¯¯ã€‚è¦æ‰§è¡Œè‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘ï¼Œå¦‚é›†ä¸­å¼æ—¥å¿—è®°å½•ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªâ€é”™è¯¯â€äº‹ä»¶ä¾¦å¬å™¨ï¼š</p><pre><code class="js">app.on(&#39;error&#39;, err =&gt; {  log.error(&#39;server error&#39;, err)});</code></pre><p>å¦‚æœé”™è¯¯å‘ç”Ÿåœ¨ è¯·æ±‚/å“åº” ç¯èŠ‚ï¼Œå¹¶ä¸”å…¶ä¸èƒ½å¤Ÿå“åº”å®¢æˆ·ç«¯æ—¶ï¼ŒContenxt å®ä¾‹ä¹Ÿä¼šè¢«ä¼ é€’åˆ° error äº‹ä»¶ç›‘å¬å™¨çš„å›è°ƒå‡½æ•°é‡Œã€‚</p><pre><code class="js">app.on(&#39;error&#39;, (err, ctx) =&gt; {  log.error(&#39;server error&#39;, err, ctx)});</code></pre><p>å½“å‘ç”Ÿé”™è¯¯ä½†ä»èƒ½å¤Ÿå“åº”å®¢æˆ·ç«¯æ—¶ï¼ˆæ¯”å¦‚æ²¡æœ‰æ•°æ®å†™åˆ°socketä¸­ï¼‰ï¼ŒKoaä¼šè¿”å›ä¸€ä¸ª500é”™è¯¯(Internal Server Error)ã€‚ æ— è®ºå“ªç§æƒ…å†µï¼ŒKoaéƒ½ä¼šç”Ÿæˆä¸€ä¸ªåº”ç”¨çº§åˆ«çš„é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¾¿å®ç°æ—¥å¿—è®°å½•ç­‰ç›®çš„ã€‚</p><h1 id="Context-ä¸Šä¸‹æ–‡"><a href="#Context-ä¸Šä¸‹æ–‡" class="headerlink" title="Context(ä¸Šä¸‹æ–‡)"></a>Context(ä¸Šä¸‹æ–‡)</h1><p>åœ¨æ¯ä¸ª<code>requset</code>è¯·æ±‚ä¸­è¢«åˆ›å»ºï¼Œåœ¨ä¸­é—´ä»¶ä¸­ä½œä¸ºæ¥æ”¶å™¨(receiver)æ¥å¼•ç”¨</p><pre><code class="js">app.use(async ctx =&gt; {  ctx; // is the Context  ctx.request; // is a koa Request  ctx.response; // is a koa Response});</code></pre><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p>Context è¯¦ç»†çš„æ–¹æ³•å’Œè®¿é—®å™¨ã€‚</p><h3 id="ctx-req"><a href="#ctx-req" class="headerlink" title="ctx.req"></a>ctx.req</h3><p><strong>Node</strong> çš„ request å¯¹è±¡ã€‚</p><h3 id="ctx-res"><a href="#ctx-res" class="headerlink" title="ctx.res"></a>ctx.res</h3><p><strong>Node</strong> çš„ response å¯¹è±¡</p><blockquote><p>Koa ä¸æ”¯æŒ ç›´æ¥è°ƒç”¨åº•å±‚ res è¿›è¡Œå“åº”å¤„ç†ã€‚è¯·é¿å…ä½¿ç”¨ä»¥ä¸‹ node å±æ€§ï¼š<br>res.statusCode<br>res.writeHead()<br>res.write()<br>res.end()</p></blockquote><h3 id="ctx-request"><a href="#ctx-request" class="headerlink" title="ctx.request"></a>ctx.request</h3><p><strong>Koa</strong> çš„ Request å¯¹è±¡ã€‚</p><h3 id="ctx-response"><a href="#ctx-response" class="headerlink" title="ctx.response"></a>ctx.response</h3><p><strong>Koa</strong> çš„ Response å¯¹è±¡ã€‚</p><h3 id="ctx-state"><a href="#ctx-state" class="headerlink" title="ctx.state"></a>ctx.state</h3><p>æ¨èçš„å‘½åç©ºé—´ï¼Œç”¨äºé€šè¿‡ä¸­é—´ä»¶ä¼ é€’ä¿¡æ¯åˆ°å‰ç«¯è§†å›¾<code>ctx.state.user = await User.find(id);</code></p><h3 id="ctx-app"><a href="#ctx-app" class="headerlink" title="ctx.app"></a>ctx.app</h3><p>åº”ç”¨å®ä¾‹å¼•ç”¨ã€‚</p><h3 id="ctx-cookies-get-name-options"><a href="#ctx-cookies-get-name-options" class="headerlink" title="ctx.cookies.get(name, [options])"></a>ctx.cookies.get(name, [options])</h3><p>è·å¾— <strong>cookie</strong> ä¸­åä¸º <strong>name</strong> çš„å€¼ï¼Œoptions ä¸ºå¯é€‰å‚æ•°;signed å¦‚æœä¸º trueï¼Œè¡¨ç¤ºè¯·æ±‚æ—¶ cookie éœ€è¦è¿›è¡Œç­¾åã€‚</p><blockquote><p>æ³¨æ„ï¼šKoa ä½¿ç”¨äº† Express çš„ cookies æ¨¡å—ï¼Œoptions å‚æ•°åªæ˜¯ç®€å•åœ°ç›´æ¥è¿›è¡Œä¼ é€’ã€‚</p></blockquote><h3 id="ctx-cookies-set-name-value-options"><a href="#ctx-cookies-set-name-value-options" class="headerlink" title="ctx.cookies.set(name, value, [options])"></a>ctx.cookies.set(name, value, [options])</h3><p>è®¾ç½® cookie ä¸­åä¸º name çš„å€¼ï¼Œoptions ä¸ºå¯é€‰å‚æ•°ï¼š</p><ul><li>maxAge ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤º Date.now()åˆ°æœŸçš„æ¯«ç§’æ•°</li><li>signed æ˜¯å¦è¦åšç­¾å</li><li>expires cookieæœ‰æ•ˆæœŸ</li><li>pathcookie çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º â€˜/â€˜</li><li>domain cookie çš„åŸŸ</li><li>secure false è¡¨ç¤º cookie é€šè¿‡ HTTP åè®®å‘é€ï¼Œtrue è¡¨ç¤º cookie é€šè¿‡ HTTPS å‘é€ã€‚</li><li>httpOnly true è¡¨ç¤º cookie åªèƒ½é€šè¿‡ HTTP åè®®å‘é€</li><li>overwrite ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è¦†ç›–ä»¥å‰è®¾ç½®çš„åŒåçš„Cookieï¼ˆé»˜è®¤ä¸ºfalseï¼‰ã€‚ å¦‚æœä¸ºtrueï¼Œåœ¨è®¾ç½®æ­¤cookieæ—¶ï¼Œå°†åœ¨åŒä¸€è¯·æ±‚ä¸­ä½¿ç”¨ç›¸åŒåç§°ï¼ˆä¸ç®¡è·¯å¾„æˆ–åŸŸï¼‰è®¾ç½®çš„æ‰€æœ‰Cookieå°†ä»Set-Cookieå¤´éƒ¨ä¸­è¿‡æ»¤æ‰ã€‚</li></ul><h3 id="ctx-throw-status-msg-properties"><a href="#ctx-throw-status-msg-properties" class="headerlink" title="ctx.throw([status], [msg], [properties])"></a>ctx.throw([status], [msg], [properties])</h3><p>æŠ›å‡ºåŒ…å« .status å±æ€§çš„é”™è¯¯ï¼Œé»˜è®¤ä¸º 500ã€‚è¯¥æ–¹æ³•å¯ä»¥è®© Koa å‡†ç¡®çš„å“åº”å¤„ç†çŠ¶æ€ã€‚ Koaæ”¯æŒä»¥ä¸‹ç»„åˆï¼š </p><pre><code class="js">ctx.throw(400);ctx.throw(400, &#39;name required&#39;);ctx.throw(400, &#39;name required&#39;, { user: user });//è¯¥å¯¹è±¡è¢«åˆå¹¶åˆ°é”™è¯¯ä¸­ï¼Œè¿™å¯¹è£…é¥°æœºå™¨å‹å¥½é”™è¯¯éå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”è¿™äº›é”™è¯¯ä¼šè¢«æŠ¥ç»™ä¸Šå±‚è¯·æ±‚ã€‚</code></pre><p>this.throw(â€˜name requiredâ€™, 400) ç­‰ä»·äºï¼š</p><pre><code class="js">const err = new Error(&#39;name required&#39;);err.status = 400;err.expose = true;throw err;</code></pre><blockquote><p>æ³¨æ„ï¼šè¿™äº›ç”¨æˆ·çº§é”™è¯¯è¢«æ ‡è®°ä¸º err.exposeï¼Œå…¶æ„å‘³ç€è¿™äº›æ¶ˆæ¯è¢«å‡†ç¡®æè¿°ä¸ºå¯¹å®¢æˆ·ç«¯çš„å“åº”ï¼Œè€Œå¹¶éä½¿ç”¨åœ¨æ‚¨ä¸æƒ³æ³„éœ²å¤±è´¥ç»†èŠ‚çš„åœºæ™¯ä¸­ã€‚</p></blockquote><h3 id="ctx-assert-value-status-msg-properties"><a href="#ctx-assert-value-status-msg-properties" class="headerlink" title="ctx.assert(value, [status], [msg], [properties])"></a>ctx.assert(value, [status], [msg], [properties])</h3><p>å½“!valueæ—¶ï¼Œ Helper æ–¹æ³•æŠ›å‡ºä¸€ä¸ªç±»ä¼¼.throw()çš„é”™è¯¯ã€‚ ç±»ä¼¼nodeâ€™s assert() æ–¹æ³•ã€‚ </p><pre><code class="js">ctx.assert(ctx.state.user, 401, &#39;User not found. Please login!&#39;);</code></pre><p>koa ä½¿ç”¨ <a href="https://github.com/jshttp/http-assert" target="_blank" rel="noopener">http-assert</a> æ¥<a href="https://www.runoob.com/w3cnote/c-assert.html" target="_blank" rel="noopener">æ–­è¨€</a>ã€‚</p><h3 id="ctx-respond"><a href="#ctx-respond" class="headerlink" title="ctx.respond"></a>ctx.respond</h3><p>ä¸ºäº†é¿å…ä½¿ç”¨ Koa çš„å†…ç½®å“åº”å¤„ç†åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ç›´æ¥èµ‹å€¼ this.repond = false;ã€‚å¦‚æœæ‚¨ä¸æƒ³è®© Koa æ¥å¸®åŠ©æ‚¨å¤„ç† reponseï¼Œè€Œæ˜¯ç›´æ¥æ“ä½œåŸç”Ÿ res å¯¹è±¡ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><blockquote><p>æ³¨æ„ï¼š è¿™ç§æ–¹å¼æ˜¯ä¸è¢« Koa æ”¯æŒçš„ã€‚å…¶å¯èƒ½ä¼šç ´å Koa ä¸­é—´ä»¶å’Œ Koa æœ¬èº«çš„ä¸€äº›åŠŸèƒ½ã€‚å…¶åªä½œä¸ºä¸€ç§ hack çš„æ–¹å¼ï¼Œå¹¶åªå¯¹é‚£äº›æƒ³è¦åœ¨ Koa æ–¹æ³•å’Œä¸­é—´ä»¶ä¸­ä½¿ç”¨ä¼ ç»Ÿ fn(req, res) æ–¹æ³•çš„äººæ¥è¯´ä¼šå¸¦æ¥ä¾¿åˆ©ã€‚</p></blockquote><h3 id="Request-aliases"><a href="#Request-aliases" class="headerlink" title="Request aliases"></a>Request aliases</h3><p>ctxä¼šä»£ç†ctx.responseå’Œctx.requestä¸Šçš„ä¸€äº›å±æ€§å’Œå‡½æ•°(è¿™ä¸ªä»£ç†é€»è¾‘æ˜¯åœ¨ctx.responseå’Œctx.requestçš„åŸå‹ä¸Šå®ç°çš„)</p><pre><code class="js">//ä»¥ä¸‹æ˜¯koaæºç ï¼ˆmethodè¡¨ç¤ºä»£ç†æ–¹æ³•ï¼Œaccessè¡¨ç¤ºä»£ç†å±æ€§å¯è¯»å¯å†™ï¼Œgetterè¡¨ç¤ºä»£ç†å±æ€§å¯è¯»ï¼‰ï¼šdelegate(proto, &#39;response&#39;)  .method(&#39;attachment&#39;) //å°†Content-Disposition è®¾ç½®ä¸º â€œé™„ä»¶â€ ä»¥æŒ‡ç¤ºå®¢æˆ·ç«¯æç¤ºä¸‹è½½  .method(&#39;redirect&#39;) //è¿”å›é‡å®šå‘ï¼Œå¦‚æœæ²¡æœ‰codeè®¾ç½®ï¼Œé»˜è®¤è®¾ç½®codeä¸º302  /*    // å­—ç¬¦ä¸² &quot;back&quot; æ˜¯ä¸€ä¸ªç‰¹æ®Šå‚æ•°ï¼Œå…¶æä¾›äº† Referrer æ”¯æŒã€‚å½“æ²¡æœ‰Referreræ—¶ï¼Œä½¿ç”¨ alt æˆ–è€… / ä»£æ›¿ã€‚    ctx.redirect(&#39;back&#39;);    ctx.redirect(&#39;back&#39;, &#39;/index.html&#39;);    ctx.redirect(&#39;/login&#39;);    ctx.redirect(&#39;http://google.com&#39;);  */  .method(&#39;remove&#39;)   //åˆ é™¤å“åº”å¤´çš„æŸä¸ªå±æ€§  .method(&#39;vary&#39;)  //è®¾ç½®Varyå“åº”å¤´  .method(&#39;set&#39;) //è®¾ç½®å“åº”å¤´ï¼Œå¯ä»¥ä¼ é€’å¯¹è±¡ï¼Œæ•°ç»„ï¼Œå•ä¸ªå€¼çš„å½¢å¼  .method(&#39;append&#39;) //ç»™response.headersä¸­çš„æŸä¸ªkeyå€¼è¿½åŠ å…¶å®ƒvalue  .method(&#39;flushHeaders&#39;)  //æ‰§è¡Œthis.res.flushHeaders()  .access(&#39;status&#39;)  //httpè¿”å›codeç ï¼Œä¼˜å…ˆé€‰æ‹©ç”¨æˆ·çš„è®¾ç½®ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ä¸»åŠ¨è®¾ç½®ï¼Œè€Œè®¾ç½®äº†ctx.bodyçš„å€¼ï¼Œ å¦‚æœè®¾ç½®å€¼ä¸ºnullï¼Œåˆ™è¿”å›204ï¼Œå¦‚æœè®¾ç½®å€¼ä¸ä¸ºnullï¼Œé‚£ä¹ˆè¿”å›200ï¼Œå¦åˆ™é»˜è®¤æƒ…å†µä¸‹æ˜¯404  .access(&#39;message&#39;)  //è·å–å“åº”çš„çŠ¶æ€æ¶ˆæ¯. é»˜è®¤æƒ…å†µä¸‹, response.message ä¸ response.status å…³è”  .access(&#39;body&#39;)   //responseçš„è¿”å›ç»“æœ  .access(&#39;length&#39;)  //responseçš„headersçš„Content-Lengthï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œé»˜è®¤æ ¹æ®bodyäºŒè¿›åˆ¶å¤§å°è®¾ç½®  .access(&#39;type&#39;)   //è®¾ç½®å“åº”çš„content-type  .access(&#39;lastModified&#39;)  //è®¾ç½®å“åº”å¤´Last-Modified  .access(&#39;etag&#39;)  //è®¾ç½®åŒ…å« &quot; åŒ…è£¹çš„ ETag å“åº”å¤´  .getter(&#39;headerSent&#39;)  //æ£€æŸ¥æ˜¯å¦å·²ç»å‘é€äº†ä¸€ä¸ªå“åº”å¤´ã€‚ ç”¨äºæŸ¥çœ‹å®¢æˆ·ç«¯æ˜¯å¦å¯èƒ½ä¼šæ”¶åˆ°é”™è¯¯é€šçŸ¥  .getter(&#39;writable&#39;);   //è¿”å›æ˜¯å¦å¯ä»¥ç»§ç»­å†™å…¥delegate(proto, &#39;request&#39;)  .method(&#39;acceptsLanguages&#39;)  .method(&#39;acceptsEncodings&#39;)  .method(&#39;acceptsCharsets&#39;)  .method(&#39;accepts&#39;)        //acceptså‡½æ•°ç”¨äºåˆ¤æ–­å®¢æˆ·ç«¯è¯·æ±‚æ˜¯å¦æ¥å—æŸç§è¿”å›ç±»å‹  .method(&#39;get&#39;)   //è·å–è¯·æ±‚å¤´ä¸­çš„æŸä¸ªå±æ€§å€¼  .method(&#39;is&#39;)  //åˆ¤æ–­è¯·æ±‚å¤´å¸Œæœ›è¿”å›ä»€ä¹ˆç±»å‹  /*    æ£€æŸ¥è¯·æ±‚æ‰€åŒ…å«çš„ &quot;Content-Type&quot; æ˜¯å¦ä¸ºç»™å®šçš„ type å€¼ã€‚ å¦‚æœæ²¡æœ‰ request bodyï¼Œè¿”å› undefinedã€‚ å¦‚æœæ²¡æœ‰ content typeï¼Œæˆ–è€…åŒ¹é…å¤±è´¥ï¼Œè¿”å› falseã€‚ å¦åˆ™è¿”å›åŒ¹é…çš„ content-typeã€‚    // With Content-Type: text/html; charset=utf-8    ctx.is(&#39;html&#39;); // =&gt; &#39;html&#39;    ctx.is(&#39;text/html&#39;); // =&gt; &#39;text/html&#39;    ctx.is(&#39;text/*&#39;, &#39;text/html&#39;); // =&gt; &#39;text/html&#39;    // When Content-Type is application/json    ctx.is(&#39;json&#39;, &#39;urlencoded&#39;); // =&gt; &#39;json&#39;    ctx.is(&#39;application/json&#39;); // =&gt; &#39;application/json&#39;    ctx.is(&#39;html&#39;, &#39;application/*&#39;); // =&gt; &#39;application/json&#39;    ctx.is(&#39;html&#39;); // =&gt; false    //æ¯”å¦‚è¯´æ‚¨å¸Œæœ›ä¿è¯åªæœ‰å›¾ç‰‡å‘é€ç»™æŒ‡å®šè·¯ç”±    if (ctx.is(&#39;image/*&#39;)) {      // process    } else {      ctx.throw(415, &#39;images only!&#39;);    }  */  .access(&#39;querystring&#39;) //è·å–åŸå§‹æŸ¥è¯¢å­—ç¬¦ä¸²  .access(&#39;idempotent&#39;)  .access(&#39;socket&#39;) //è¿”å›è¯·æ±‚å¥—æ¥å­—  .access(&#39;search&#39;) //æœç´¢å­—ç¬¦ä¸²  .access(&#39;method&#39;)  //è¯·æ±‚æ–¹æ³•  .access(&#39;query&#39;)  //è·å–è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²å¯¹è±¡  .access(&#39;path&#39;)  //è·å–è¯·æ±‚è·¯å¾„å  .access(&#39;url&#39;)  //è¯·æ±‚çš„url,è¯¥urlå¯ä»¥è¢«é‡å†™  .getter(&#39;origin&#39;)  //è·å–urlçš„æ¥æºï¼šåŒ…æ‹¬ protocol å’Œ hostï¼ˆhttp://example.comï¼‰  .getter(&#39;href&#39;) //è·å–å®Œæ•´çš„è¯·æ±‚URLï¼ŒåŒ…æ‹¬ protocolï¼Œhost å’Œ urlï¼ˆhttp://example.com/foo/bar?q=1ï¼‰  .getter(&#39;subdomains&#39;) //ä»¥æ•°ç»„å½¢å¼è¿”å›å­åŸŸå    /* ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåŸŸåæ˜¯ &quot;tobi.ferrets.example.com&quot;:    å¦‚æœæ²¡æœ‰è®¾ç½® app.subdomainOffsetï¼Œå…¶ subdomains ä¸º [&quot;ferrets&quot;, &quot;tobi&quot;]ã€‚ å¦‚æœè®¾ç½® app.subdomainOffset ä¸º3ï¼Œå…¶ subdomains ä¸º [&quot;tobi&quot;]  */  .getter(&#39;protocol&#39;) //è¿”å›è¯·æ±‚åè®®  .getter(&#39;host&#39;) //è·å–å½“å‰ä¸»æœºçš„host(hostname:port)  .getter(&#39;hostname&#39;) //è·å–å½“å‰ä¸»æœºçš„host  .getter(&#39;URL&#39;) //è·å– WHATWG è§£æçš„ URL å¯¹è±¡  .getter(&#39;header&#39;) //è¿”å›è¯·æ±‚å¤´å¯¹è±¡  .getter(&#39;headers&#39;)  //è¿”å›è¯·æ±‚å¤´å¯¹è±¡  .getter(&#39;secure&#39;) //é€šè¿‡ ctx.protocol == &quot;https&quot; æ¥æ£€æŸ¥è¯·æ±‚æ˜¯å¦é€šè¿‡ TLS å‘å‡º  .getter(&#39;stale&#39;)   .getter(&#39;fresh&#39;) //æ£€æŸ¥è¯·æ±‚ç¼“å­˜æ˜¯å¦ &quot;fresh&quot;(å†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–)ã€‚è¯¥æ–¹æ³•ç”¨äºåœ¨ If-None-Match / ETag, If-Modified-Since å’Œ Last-Modified ä¸­è¿›è¡Œç¼“å­˜åè°ƒã€‚å½“åœ¨ response headers ä¸­è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªä¸Šè¿°å‚æ•°åï¼Œè¯¥æ–¹æ³•åº”è¯¥è¢«ä½¿ç”¨ã€‚  .getter(&#39;ips&#39;)  //å½“ X-Forwarded-For å­˜åœ¨å¹¶ä¸” app.proxy è¢«å¯ç”¨æ—¶ï¼Œè¿™äº› ips çš„æ•°ç»„è¢«è¿”å›  .getter(&#39;ip&#39;); //è¯·æ±‚è¿œç¨‹åœ°å€//æ¯”å¦‚ä»¥ä¸‹æ“ä½œæ˜¯ç­‰ä»·çš„ï¼šctx.body = {  code: 200,  result: {      nick: &quot;zhangdianpeng&quot;  }}ctx.response.body = {    code: 200,    result: {        nick: &quot;zhangdianpeng&quot;    }}console.log(&#39;ctx.method:&#39;, ctx.method);console.log(&#39;ctx.request.method:&#39;, ctx.request.method);/*ä½œè€…ï¼šç½‘æ˜“äº‘ç¤¾åŒºé“¾æ¥ï¼šhttps://www.jianshu.com/p/20cf1c476d22æ¥æºï¼šç®€ä¹¦æ”¹è¿›ï¼šRainSun*/</code></pre><h1 id="ä½¿ç”¨Makeæ„å»ºç½‘ç«™"><a href="#ä½¿ç”¨Makeæ„å»ºç½‘ç«™" class="headerlink" title="ä½¿ç”¨Makeæ„å»ºç½‘ç«™"></a>ä½¿ç”¨Makeæ„å»ºç½‘ç«™</h1><p><a href="http://www.ruanyifeng.com/blog/2015/03/build-website-with-make.html" target="_blank" rel="noopener">é˜®ä¸€å³°æ•™ç¨‹</a></p>]]></content>
    
    
    <categories>
      
      <category>æ¡†æ¶</category>
      
      <category>koa</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>Webåç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾3bå®‰è£…aria2</title>
    <link href="undefined2020/04/pi-aria2/"/>
    <url>2020/04/pi-aria2/</url>
    
    <content type="html"><![CDATA[<h1 id="aria2"><a href="#aria2" class="headerlink" title="aria2"></a>aria2</h1><h2 id="å®‰è£…aria2"><a href="#å®‰è£…aria2" class="headerlink" title="å®‰è£…aria2"></a>å®‰è£…<code>aria2</code></h2><pre><code>sudo apt-get install aria2</code></pre><h2 id="é…ç½®aria2çš„æ–‡ä»¶"><a href="#é…ç½®aria2çš„æ–‡ä»¶" class="headerlink" title="é…ç½®aria2çš„æ–‡ä»¶"></a>é…ç½®<code>aria2</code>çš„æ–‡ä»¶</h2><pre><code>mkdir ~/.aria2touch ~/.aria2/aria2.sessionmkdir /home/pi/data/aria2mkdir /home/pi/data/aria2/downloadnano ~/.aria2/aria2.conf</code></pre><p><code>conf</code>æ–‡ä»¶é‡Œè¾¹å†™</p><pre><code>dir=/home/pi/data/aria2/downloaddisable-ipv6=trueenable-rpc=truerpc-allow-origin-all=truerpc-listen-all=truecontinue=trueinput-file=/home/pi/.aria2/aria2.sessionsave-session=/home/pi/.aria2/aria2.session max-concurrent-downloads=5save-session-interval=60peer-id-prefix=-TR2770-user-agent=Transmission/2.77bt-seed-unverified=truebt-save-metadata=true</code></pre><p>æµ‹è¯•è¿è¡Œçœ‹çœ‹æœ‰æ²¡æœ‰é”™è¯¯</p><pre><code>aria2c â€“conf-path=/home/pi/.aria2/aria2.conf</code></pre><p>æŠŠå®ƒåšæˆç³»ç»ŸæœåŠ¡</p><pre><code>sudo nano /etc/init.d/aria2c</code></pre><p>è¾“å…¥</p><pre><code>#!/bin/sh### BEGIN INIT INFO# Provides:          aria2# Required-Start:    $remote_fs $network# Required-Stop:     $remote_fs $network# Default-Start:     2 3 4 5# Default-Stop:      0 1 6# Short-Description: Aria2 Downloader### END INIT INFOcase &quot;$1&quot; instart)echo -n &quot;Starting aria2c&quot;sudo -u pi aria2c --conf-path=/home/pi/.aria2/aria2.conf -D;;stop)echo -n &quot;Shutting down aria2c &quot;killall aria2c;;restart)killall aria2csudo -u pi aria2c --conf-path=/home/pi/.aria2/aria2.conf -D;;esacexit</code></pre><h2 id="è®¾ç½®æƒé™"><a href="#è®¾ç½®æƒé™" class="headerlink" title="è®¾ç½®æƒé™"></a>è®¾ç½®æƒé™</h2><pre><code>sudo chmod 755 /etc/init.d/aria2c</code></pre><h2 id="æµ‹è¯•æœåŠ¡æ˜¯å¦èƒ½å¯åŠ¨"><a href="#æµ‹è¯•æœåŠ¡æ˜¯å¦èƒ½å¯åŠ¨" class="headerlink" title="æµ‹è¯•æœåŠ¡æ˜¯å¦èƒ½å¯åŠ¨"></a>æµ‹è¯•æœåŠ¡æ˜¯å¦èƒ½å¯åŠ¨</h2><pre><code>sudo service aria2c start</code></pre><p>æŠ¥é”™å°±å†è¾“å…¥ä¸€å¥</p><pre><code>sudo update-rc.d aria2c defaults</code></pre><h2 id="æ·»åŠ aria2cæœåŠ¡è‡ªåŠ¨è¿è¡Œ"><a href="#æ·»åŠ aria2cæœåŠ¡è‡ªåŠ¨è¿è¡Œ" class="headerlink" title="æ·»åŠ aria2cæœåŠ¡è‡ªåŠ¨è¿è¡Œ"></a>æ·»åŠ aria2cæœåŠ¡è‡ªåŠ¨è¿è¡Œ</h2><pre><code>sudo update-rc.d aria2c defaults</code></pre><h2 id="è¿›æ–‡ä»¶å¤¹ä¸‹è½½yaaw"><a href="#è¿›æ–‡ä»¶å¤¹ä¸‹è½½yaaw" class="headerlink" title="è¿›æ–‡ä»¶å¤¹ä¸‹è½½yaaw"></a>è¿›æ–‡ä»¶å¤¹ä¸‹è½½yaaw</h2><pre><code>cd data/aria2git clone http://github.com/wzhy90/yaaw</code></pre><p>ä¹‹åå°±åœ¨teawebé‡Œè¾¹è®¾ç½®ä»£ç†å°±ok</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾3b</category>
      
      <category>aria2</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾3b</tag>
      
      <tag>aria2</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dockerå­¦ä¹ ç¬”è®°</title>
    <link href="undefined2020/04/docker/"/>
    <url>2020/04/docker/</url>
    
    <content type="html"><![CDATA[<h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><p>æŸ¥çœ‹å…¨éƒ¨ç½‘æ¡¥</p><pre><code>docker network ls</code></pre><p>æŸ¥çœ‹æŸä¸ªç½‘æ¡¥</p><pre><code>docker network inspect &lt;name&gt;</code></pre><p>åˆ›å»ºä¸€ä¸ªåä¸º<code>lacus</code>çš„ç½‘æ¡¥</p><pre><code>docker network create --driver bridge lacus</code></pre><p>å…è®¸æŒ‡å®šç½‘æ®µ ä¸Šä¸€å¥æŒ‡å®šå‚æ•°åœ¨åä¹‹å‰</p><pre><code>--subnet 172.22.16.0/24 --gateway 172.22.16.1</code></pre><p>åˆ é™¤<code>lacus</code>ç½‘æ¡¥</p><pre><code>docker network rm lacus</code></pre><p>è¿æ¥åˆ°<code>lacus</code>ç½‘æ¡¥</p><pre><code>--network=lacus</code></pre><hr><h2 id="å®¹å™¨é—´é€šä¿¡çš„ä¸‰ç§æ–¹å¼"><a href="#å®¹å™¨é—´é€šä¿¡çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="å®¹å™¨é—´é€šä¿¡çš„ä¸‰ç§æ–¹å¼"></a>å®¹å™¨é—´é€šä¿¡çš„ä¸‰ç§æ–¹å¼</h2><p><strong>IPé€šä¿¡</strong></p><p>åªè¦æ”¾åœ¨äº†ä¸€ä¸ªç½‘æ¡¥ä¸‹å°±å¯ä»¥é€šè¿‡ipè¿›è¡Œè®¿é—®äº†</p><p><strong>Docker DNS Server</strong></p><p>dockerå†…åµŒäº†DNS Serverï¼Œåªè¦ä½¿ç”¨<code>--name=&lt;name&gt;</code>æŒ‡å®šå®¹å™¨åå¹¶ä¸”ç»‘å®šåœ¨ä¸€ä¸ªç½‘æ¡¥ä¸­å°±å¯ä»¥ä½¿ç”¨åå­—<code>ping -c 3 name</code>è¿é€š</p><blockquote><p>ä½¿ç”¨ docker DNS æœ‰ä¸ªé™åˆ¶ï¼šåªèƒ½åœ¨ user-defined ç½‘ç»œä¸­ä½¿ç”¨ã€‚</p></blockquote><p><strong>joined å®¹å™¨</strong></p><p>é€šè¿‡<code>--network=container:&lt;name&gt;</code>æŒ‡å®š<code>jointed</code>å®¹å™¨</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p><strong>è¿è¡Œportainer</strong></p><pre><code>docker run -d -p 127.0.0.1:5001:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --name prtainer  portainer/portainer</code></pre><p><strong>è¿è¡Œmongodb</strong></p><pre><code>// pidocker run -d --name mongo -v /home/pi/db/mongo:/data/db -p 27017:27017 --restart=always --network=lacus casualsimulation/rpi-mongodb3 mongod --auth// aldocker run -d --name mongo -v /root/db/mongo:/data/db -p 127.0.0.1:5000:27017 --restart=always --network=lacus mongo mongod --auth</code></pre><p><strong>æ‰“åŒ…</strong></p><pre><code>// al tracer_backenddocker build -t lacus/tracer_backend:1.0 .// al tracer_userdocker build -t lacus/tracer_user:1.0 .// al tracer_admindocker build -t lacus/tracer_admin:1.0 .// al canary_backenddocker build -t lacus/canary_backend:1.0 .// al canary_frontenddocker build -t lacus/canary_frontend:1.0 .// al cherry_backenddocker build -t lacus/cherry_backend:1.0 .// al cherry_frontenddocker build -t lacus/cherry_frontend:1.0 .</code></pre><p><strong>è¿è¡Œ</strong></p><pre><code>// al tracer_backenddocker run -it --name tracer_backend -v /root/data/tracer/backEnd/logs:/app/logs -v /root/data/tracer/backEnd/upload:/app/upload -p 127.0.0.1:5002:80 --network=lacus lacus/tracer_backend:1.0 /bin/sh// al tracer_userdocker run -d --name tracer_user -p 127.0.0.1:5003:80 --restart=always --network=lacus lacus/tracer_user:1.0// al tracer_admindocker run -d --name tracer_admin -p 127.0.0.1:5004:80 --restart=always --network=lacus lacus/tracer_admin:1.0// al canary_backenddocker run -it --name canary_backend -v /root/data/canary/backEnd/logs:/app/logs -p 127.0.0.1:5005:80 --network=lacus lacus/canary_backend:1.0 /bin/sh// al canary_frontenddocker run -d --name canary_frontend -p 127.0.0.1:5006:80 --restart=always --network=lacus lacus/canary_frontend:1.0// al cherry_backenddocker run -it --name cherry_backend -v /root/data/cherry/backEnd/logs:/app/logs -p 127.0.0.1:5007:80 --network=lacus lacus/cherry_backend:1.0 /bin/sh// al cherry_frontenddocker run -d --name cherry_frontend -p 127.0.0.1:5008:80 --restart=always --network=lacus lacus/cherry_frontend:1.0// pi ccb frontEnddocker run -d --name ccb_frontend -p 127.0.0.1:5003:80 --restart=always --network=lacus lacus/ccb_frontend:1.0// pi ccb backEnddocker run -it --name ccb -v /home/pi/data/ccb/docker/logs:/app/logs -p 127.0.0.1:5002:80 --restart=always --network=lacus lacus/ccb_backend:1.0 /bin/sh// vueview docker run  -d --name canary_frontEnd -p 127.0.0.1:5006:80 --restart=always -v /root/data/canary/frontEnd:/vue lacus/vueview // flask_env docker run -it --name phonebook_backend -p 127.0.0.1:5011:80 -v /root/data/phonebook/backEnd:/app --network=lacus lacus/flask_env /bin/sh // blog docker run -d --name blog -v /root/data/blog/blog:/usr/share/nginx/html -p 127.0.0.1:5019:80 --network=lacus lacus/blog:1.0</code></pre>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é˜¿é‡Œäº‘æœåŠ¡å™¨åˆå§‹åŒ–</title>
    <link href="undefined2020/03/init-centos/"/>
    <url>2020/03/init-centos/</url>
    
    <content type="html"><![CDATA[<h1 id="åˆå§‹åŒ–æœåŠ¡å™¨"><a href="#åˆå§‹åŒ–æœåŠ¡å™¨" class="headerlink" title="åˆå§‹åŒ–æœåŠ¡å™¨"></a>åˆå§‹åŒ–æœåŠ¡å™¨</h1><p>å› ä¸ºæ˜¯é˜¿é‡Œçš„æœåŠ¡å™¨ï¼Œè£…çš„centos8ï¼Œå·²ç»è‡ªå·±æ¢å¥½é˜¿é‡Œçš„é•œåƒæºäº†ï¼Œå¾ˆnice<br>æ›´æ–°<code>yum</code></p><pre><code>sudo yum -y update</code></pre><p>Todo</p><ol><li><input checked="" disabled="" type="checkbox"> nginx</li><li><input checked="" disabled="" type="checkbox"> mongodb </li><li><input checked="" disabled="" type="checkbox"> docker</li><li><input checked="" disabled="" type="checkbox"> htop<h2 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h2>ä½¿ç”¨<code>yum</code>å®‰è£…<pre><code>sudo yum -y install nginx   # å®‰è£… nginxsudo yum remove nginx  # å¸è½½ nginx</code></pre>é…ç½®<code>nginx</code>æœåŠ¡<pre><code>sudo systemctl enable nginx # è®¾ç½®å¼€æœºå¯åŠ¨sudo service nginx start # å¯åŠ¨nginxæœåŠ¡sudo service nginx stop # åœæ­¢nginxæœåŠ¡sudo service nginx restart # é‡å¯nginxæœåŠ¡sudo service nginx reload # é‡æ–°åŠ è½½é…ç½®ï¼Œä¸€èˆ¬æ˜¯åœ¨ä¿®æ”¹è¿‡nginxé…ç½®æ–‡ä»¶æ—¶ä½¿ç”¨</code></pre><h2 id="å®‰è£…htop"><a href="#å®‰è£…htop" class="headerlink" title="å®‰è£…htop"></a>å®‰è£…htop</h2>ä½¿ç”¨<code>yum</code>å®‰è£…<pre><code>yum install epel-release -yyum install htop -y</code></pre><h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noopener">ç½‘é¡µé“¾æ¥</a><br>å¦‚æœæŠ¥é”™<code>package docker-ce-3:19.03.8-3.el7.x86_64 requires containerd.io &gt;= 1.2.2-3, but none of the providers can be installed</code><br>å°±æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<pre><code>dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpmsudo yum install docker-ce docker-ce-clisudo systemctl start docker</code></pre><h2 id="å®‰è£…mongodb"><a href="#å®‰è£…mongodb" class="headerlink" title="å®‰è£…mongodb"></a>å®‰è£…mongodb</h2>ä½¿ç”¨<code>docker</code>å®‰è£…<pre><code>docker run -d --name mongo -v /root/db/mongo:/data/db -p 127.0.0.1:5000:27017 --network=lacus mongo mongod --auth</code></pre></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç³»ç»Ÿ</category>
      
      <category>éƒ¨ç½²æ–°æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>å‘½ä»¤</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mongoDBå­¦ä¹ ç¬”è®°</title>
    <link href="undefined2019/11/mongodb/"/>
    <url>2019/11/mongodb/</url>
    
    <content type="html"><![CDATA[<h1 id="mongoDB"><a href="#mongoDB" class="headerlink" title="mongoDB"></a>mongoDB</h1><h3 id="åˆ›å»ºæ–°ç”¨æˆ·"><a href="#åˆ›å»ºæ–°ç”¨æˆ·" class="headerlink" title="åˆ›å»ºæ–°ç”¨æˆ·"></a>åˆ›å»ºæ–°ç”¨æˆ·</h3><pre><code class="js">db.createUser(  {    user: &quot;yingbo&quot;,    pwd: &quot;&quot;,    roles: [ { role: &quot;dbAdmin&quot;, db: &quot;yingbo&quot; },{ role: &#39;readWrite&#39;, db: &quot;yingbo&quot;} ]  })db.createUser(  {    user: &quot;admin&quot;,    pwd: &quot;&quot;,    roles: [ { role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; } ]  })</code></pre><h3 id="logç›®å½•-var-log-mongodb-mongod-log"><a href="#logç›®å½•-var-log-mongodb-mongod-log" class="headerlink" title="logç›®å½• /var/log/mongodb/mongod.log"></a>logç›®å½• <code>/var/log/mongodb/mongod.log</code></h3><h3 id="dbç›®å½•-var-lib-mongo"><a href="#dbç›®å½•-var-lib-mongo" class="headerlink" title="dbç›®å½• /var/lib/mongo"></a>dbç›®å½• <code>/var/lib/mongo</code></h3><h3 id="é…ç½®æ–‡ä»¶-etc-mongod-conf"><a href="#é…ç½®æ–‡ä»¶-etc-mongod-conf" class="headerlink" title="é…ç½®æ–‡ä»¶ /etc/mongod.conf"></a>é…ç½®æ–‡ä»¶ <code>/etc/mongod.conf</code></h3><h3 id="å¯åŠ¨-é‡å¯-åœæ­¢-sudo-service-mongod-start-restart-stop"><a href="#å¯åŠ¨-é‡å¯-åœæ­¢-sudo-service-mongod-start-restart-stop" class="headerlink" title="å¯åŠ¨/é‡å¯/åœæ­¢  sudo service mongod start/restart/stop"></a>å¯åŠ¨/é‡å¯/åœæ­¢  <code>sudo service mongod start/restart/stop</code></h3><h3 id="å¼€å¯ç”¨æˆ·è®¤è¯-conf-æ–‡ä»¶åŠ "><a href="#å¼€å¯ç”¨æˆ·è®¤è¯-conf-æ–‡ä»¶åŠ " class="headerlink" title="å¼€å¯ç”¨æˆ·è®¤è¯ conf æ–‡ä»¶åŠ "></a>å¼€å¯ç”¨æˆ·è®¤è¯ conf æ–‡ä»¶åŠ </h3><pre><code>security:  authorization: enabled</code></pre><h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><pre><code class="c">//æ–¹æ³•ä¸€mongo --port 12236 -u &quot;admin&quot; -p &quot;&quot; --authenticationDatabase &quot;admin&quot;//æ–¹æ³•äºŒdb.auth(&quot;yingbo&quot;, &quot;&quot;)</code></pre><h3 id="æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“"><a href="#æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“"></a>æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“</h3><p><code>show dbs</code></p><h3 id="åˆ åº“"><a href="#åˆ åº“" class="headerlink" title="åˆ åº“"></a>åˆ åº“</h3><pre><code>use &lt;dbname&gt;db.dropDatabase()</code></pre><h3 id="æ˜¾ç¤ºæ‰€æœ‰é›†åˆ"><a href="#æ˜¾ç¤ºæ‰€æœ‰é›†åˆ" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰é›†åˆ"></a>æ˜¾ç¤ºæ‰€æœ‰é›†åˆ</h3><p><code>show tables</code> æˆ–è€… <code>show collections</code></p><h3 id="åˆ›å»ºé›†åˆ"><a href="#åˆ›å»ºé›†åˆ" class="headerlink" title="åˆ›å»ºé›†åˆ"></a>åˆ›å»ºé›†åˆ</h3><pre><code class="js">//æ­£å¸¸æƒ…å†µä¸‹ç›´æ¥æ’å…¥æ•°æ®å°±å¯ä»¥è‡ªåŠ¨æ–°å»ºä¸€ä¸ªé›†åˆ//åˆ›å»ºå›ºå®šé›†åˆ mycolï¼Œæ•´ä¸ªé›†åˆç©ºé—´å¤§å° 6142800 KB, æ–‡æ¡£æœ€å¤§ä¸ªæ•°ä¸º 10000 ä¸ªã€‚db.createCollection(&quot;&lt;collectionName&gt;&quot;, { capped : true, autoIndexId : true, size :    6142800, max : 10000 } )//å•çº¯çš„æ–°å»ºä¸€ä¸ªé›†åˆdb.createCollection(&quot;&lt;collectionName&gt;&quot;)</code></pre><h3 id="åˆ é™¤é›†åˆ"><a href="#åˆ é™¤é›†åˆ" class="headerlink" title="åˆ é™¤é›†åˆ"></a>åˆ é™¤é›†åˆ</h3><p><code>db.&lt;collectionName&gt;.drop()</code></p><h3 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a>å¢</h3><p><code>db.&lt;collectionName&gt;.insert(&lt;object&gt;)</code></p><h3 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a>åˆ </h3><p><code>db.&lt;collectionName&gt;.remove({key:value})</code> findé‡Œè¾¹å¯ä»¥ä¸º{}åˆ é™¤å…¨éƒ¨</p><h3 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a>æ”¹</h3><pre><code>db.&lt;collectionName&gt;.update(   &lt;query&gt;,   &lt;update&gt;,   {     upsert: &lt;boolean&gt;,     multi: &lt;boolean&gt;,     writeConcern: &lt;document&gt;   })/*    query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚    update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„    upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚    multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚    writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚*/</code></pre><h3 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a>æŸ¥</h3><p><code>db.&lt;collectionName&gt;.find({key:value})</code> findé‡Œè¾¹å¯ä»¥æ²¡æœ‰å‚æ•°</p><pre><code>//æ ¼å¼åŒ–æ˜¾ç¤ºdb.col.find().pretty()//æ¡ä»¶è¯­å¥db.col.find({likes : {$lt :200, $gt : 100}}).pretty() //é™åˆ¶ 100&lt;likes&lt;200$lt:å°äº$lte:å°äºæˆ–ç­‰äº$gt:å¤§äº$gte:å¤§äºæˆ–ç­‰äº$ne: ä¸ç­‰äº$type:     Double     1          String     2          Object     3          Array     4          Binary data     5          Undefined     6     å·²åºŸå¼ƒã€‚    Object id     7          Boolean     8          Date     9          Null     10          Regular Expression     11          JavaScript     13          Symbol     14          JavaScript (with scope)     15          32-bit integer     16          Timestamp     17          64-bit integer     18          Min key     255     Query with -1.    Max key     127//ANDdb.col.find({key1:value1, key2:value2}).pretty()//ORdb.col.find({$or:[{&quot;by&quot;:&quot;èœé¸Ÿæ•™ç¨‹&quot;},{&quot;title&quot;: &quot;MongoDB æ•™ç¨‹&quot;}]}).pretty()//AND+ORdb.col.find({&quot;likes&quot;: {$gt:50}, $or: [{&quot;by&quot;: &quot;èœé¸Ÿæ•™ç¨‹&quot;},{&quot;title&quot;: &quot;MongoDB æ•™ç¨‹&quot;}]}).pretty()// æ’é™¤æŸä¸ªå­—æ®µï¼Œä¾‹å¦‚_iddb.col.find({},{&quot;_id&quot;: 0})// æŒ‡å®šè¿”å›æŸå‡ ä¸ªå­—æ®µdb.col.find({},{&quot;name&quot;: 1, &quot;sex&quot;: 1})</code></pre><hr><h2 id="Limitä¸Skipæ–¹æ³•"><a href="#Limitä¸Skipæ–¹æ³•" class="headerlink" title="Limitä¸Skipæ–¹æ³•"></a>Limitä¸Skipæ–¹æ³•</h2><p><code>db.&lt;collectionName&gt;.find().limit(&lt;number1&gt;).skip(&lt;number2&gt;)</code></p><p>number1 : æœ¬æ¬¡æŸ¥è¯¢æœ€å¤šæ˜¾ç¤ºæ¡æ•°</p><p>number2 : æœ¬æ¬¡æŸ¥è¯¢è·³è¿‡çš„æ¡æ•°</p><hr><h2 id="sort-æ–¹æ³•"><a href="#sort-æ–¹æ³•" class="headerlink" title="sort() æ–¹æ³•"></a>sort() æ–¹æ³•</h2><p><code>db.&lt;collectionName&gt;.find().sort({&lt;key&gt;:&lt;number&gt;})</code></p><p>key : éœ€è¦è¿›è¡Œæ’åºçš„é”®å</p><p>number : å…¶ä¸­ 1 ä¸ºå‡åºæ’åˆ—ï¼Œè€Œ -1 æ˜¯ç”¨äºé™åºæ’åˆ—</p><hr><h2 id="createIndex-æ–¹æ³•"><a href="#createIndex-æ–¹æ³•" class="headerlink" title="createIndex() æ–¹æ³•"></a>createIndex() æ–¹æ³•</h2><p><code>db.values.createIndex({&lt;key&gt;: &lt;number&gt;, &lt;key&gt;: &lt;number&gt;}, {background: true})</code></p><p>key : éœ€è¦è¿›è¡Œæ’åºçš„é”®å</p><p>number : å…¶ä¸­ 1 ä¸ºå‡åºæ’åˆ—ï¼Œè€Œ -1 æ˜¯ç”¨äºé™åºæ’åˆ—</p><p>å»ºç´¢å¼•è¿‡ç¨‹ä¼šé˜»å¡å…¶å®ƒæ•°æ®åº“æ“ä½œï¼Œbackgroundå¯æŒ‡å®šä»¥åå°æ–¹å¼åˆ›å»ºç´¢å¼•ï¼Œå³å¢åŠ  â€œbackgroundâ€ å¯é€‰å‚æ•°ã€‚ â€œbackgroundâ€ é»˜è®¤å€¼ä¸ºfalseã€‚</p><hr><h2 id="aggregate-æ–¹æ³•"><a href="#aggregate-æ–¹æ³•" class="headerlink" title="aggregate() æ–¹æ³•"></a>aggregate() æ–¹æ³•</h2><pre><code>db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : 1}}}]){   &quot;result&quot; : [      {         &quot;_id&quot; : &quot;runoob.com&quot;,         &quot;num_tutorial&quot; : 2      },      {         &quot;_id&quot; : &quot;Neo4j&quot;,         &quot;num_tutorial&quot; : 1      }   ],   &quot;ok&quot; : 1}</code></pre><p>$sum    è®¡ç®—æ€»å’Œã€‚    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$sum : â€œ$likesâ€}}}])</p><p>$avg    è®¡ç®—å¹³å‡å€¼    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$avg : â€œ$likesâ€}}}])</p><p>$min    è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$min : â€œ$likesâ€}}}])</p><p>$max    è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚    db.mycol.aggregate([{$group : {_id :<br>â€œ$by_userâ€, num_tutorial : {$max : â€œ$likesâ€}}}])</p><p>$push    åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, url : {$push: â€œ$urlâ€}}}])</p><p>$addToSet    åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, url : {$addToSet : â€œ$urlâ€}}}])</p><p>$first    æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, first_url : {$first : â€œ$urlâ€}}}])</p><p>$last    æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ®    db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, last_url : {$last : â€œ$urlâ€}}}])</p><h2 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h2><p>$projectï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚</p><pre><code>ç»“æœä¸­å°±åªè¿˜æœ‰_id,tilteå’Œauthorä¸‰ä¸ªå­—æ®µdb.article.aggregate(    { $project : {        title : 1 ,        author : 1 ,    }} );è¿idä¸€èµ·åˆ é™¤db.article.aggregate(    { $project : {        _id : 0 ,        title : 1 ,        author : 1    }});</code></pre><p>$matchï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚$matchä½¿ç”¨MongoDBçš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚</p><pre><code>db.articles.aggregate( [  { $match : { score : { $gt : 70, $lte : 90 } } },  { $group: { _id: null, count: { $sum: 1 } } }] );</code></pre><p>$limitï¼šç”¨æ¥é™åˆ¶MongoDBèšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚</p><p>$skipï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚</p><pre><code>db.article.aggregate(    { $skip : 5 });</code></pre><p>$unwindï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚</p><p>$groupï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚</p><p>$sortï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚</p><p>$geoNearï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚</p><hr><h2 id="MongoDB-å¤åˆ¶ï¼ˆå‰¯æœ¬é›†ï¼‰"><a href="#MongoDB-å¤åˆ¶ï¼ˆå‰¯æœ¬é›†ï¼‰" class="headerlink" title="MongoDB å¤åˆ¶ï¼ˆå‰¯æœ¬é›†ï¼‰"></a>MongoDB å¤åˆ¶ï¼ˆå‰¯æœ¬é›†ï¼‰</h2><p>ç­‰æ ‘è“æ´¾è£…å®Œå†çœ‹</p><h2 id="MongoDB-åˆ†ç‰‡"><a href="#MongoDB-åˆ†ç‰‡" class="headerlink" title="MongoDB åˆ†ç‰‡"></a>MongoDB åˆ†ç‰‡</h2><p>ç­‰æ ‘è“æ´¾è£…å®Œå†çœ‹</p><h2 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h2><p><code>mongodump -h dbhost -d dbname -o dbdirectory</code></p><p>-hï¼š<br>MongDBæ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚ï¼š127.0.0.1ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šç«¯å£å·ï¼š127.0.0.1:27017</p><p>-dï¼š<br>éœ€è¦å¤‡ä»½çš„æ•°æ®åº“å®ä¾‹ï¼Œä¾‹å¦‚ï¼štest</p><p>-oï¼š<br>å¤‡ä»½çš„æ•°æ®å­˜æ”¾ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\data\dumpï¼Œå½“ç„¶è¯¥ç›®å½•éœ€è¦æå‰å»ºç«‹ï¼Œåœ¨å¤‡ä»½å®Œæˆåï¼Œç³»ç»Ÿè‡ªåŠ¨åœ¨dumpç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªtestç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢å­˜æ”¾è¯¥æ•°æ®åº“å®ä¾‹çš„å¤‡ä»½æ•°æ®ã€‚ </p><h2 id="æ¢å¤"><a href="#æ¢å¤" class="headerlink" title="æ¢å¤"></a>æ¢å¤</h2><p><code>mongorestore -h &lt;hostname&gt;&lt;:port&gt; -d dbname &lt;path&gt;</code></p><pre><code>--host &lt;:port&gt;, -h &lt;:port&gt;ï¼šMongoDBæ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ä¸ºï¼š localhost:27017--db , -d ï¼šéœ€è¦æ¢å¤çš„æ•°æ®åº“å®ä¾‹ï¼Œä¾‹å¦‚ï¼štestï¼Œå½“ç„¶è¿™ä¸ªåç§°ä¹Ÿå¯ä»¥å’Œå¤‡ä»½æ—¶å€™çš„ä¸ä¸€æ ·ï¼Œæ¯”å¦‚test2--dropï¼šæ¢å¤çš„æ—¶å€™ï¼Œå…ˆåˆ é™¤å½“å‰æ•°æ®ï¼Œç„¶åæ¢å¤å¤‡ä»½çš„æ•°æ®ã€‚å°±æ˜¯è¯´ï¼Œæ¢å¤åï¼Œå¤‡ä»½åæ·»åŠ ä¿®æ”¹çš„æ•°æ®éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ…ç”¨å“¦ï¼&lt;path&gt;ï¼šmongorestore æœ€åçš„ä¸€ä¸ªå‚æ•°ï¼Œè®¾ç½®å¤‡ä»½æ•°æ®æ‰€åœ¨ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\data\dump\testã€‚ä½ ä¸èƒ½åŒæ—¶æŒ‡å®š &lt;path&gt; å’Œ --dir é€‰é¡¹ï¼Œ--dirä¹Ÿå¯ä»¥è®¾ç½®å¤‡ä»½ç›®å½•ã€‚--dirï¼šæŒ‡å®šå¤‡ä»½çš„ç›®å½•ä½ ä¸èƒ½åŒæ—¶æŒ‡å®š &lt;path&gt; å’Œ --dir é€‰é¡¹ã€‚</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
      <category>mongoDB</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>mongoDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾3bæ›´æ¢å›½å†…è½¯ä»¶æº</title>
    <link href="undefined2019/11/pi-origin/"/>
    <url>2019/11/pi-origin/</url>
    
    <content type="html"><![CDATA[<h1 id="æ›´æ¢è½¯ä»¶æº"><a href="#æ›´æ¢è½¯ä»¶æº" class="headerlink" title="æ›´æ¢è½¯ä»¶æº"></a>æ›´æ¢è½¯ä»¶æº</h1><h2 id="åˆ‡æ¢åˆ°rootç”¨æˆ·"><a href="#åˆ‡æ¢åˆ°rootç”¨æˆ·" class="headerlink" title="åˆ‡æ¢åˆ°rootç”¨æˆ·"></a>åˆ‡æ¢åˆ°rootç”¨æˆ·</h2><p><code>su - root</code></p><h2 id="ä¿®æ”¹-etc-apt-sources-list"><a href="#ä¿®æ”¹-etc-apt-sources-list" class="headerlink" title="ä¿®æ”¹ /etc/apt/sources.list"></a>ä¿®æ”¹ /etc/apt/sources.list</h2><p><code>sudo nano /etc/apt/sources.list</code></p><pre><code>åŸæ–‡`deb http://mirrordirector.raspbian.org/raspbian/ stretch main contrib non-free rpi` åŠ #æ³¨é‡Šæ‰åŠ å…¥å¦‚ä¸‹é˜¿é‡Œæºï¼Œ`deb http://mirrors.aliyun.com/raspbian/raspbian/ stretch main contrib non-free rpi`</code></pre><h2 id="ä¿®æ”¹-etc-apt-sources-list-d-raspi-list"><a href="#ä¿®æ”¹-etc-apt-sources-list-d-raspi-list" class="headerlink" title="ä¿®æ”¹/etc/apt/sources.list.d/raspi.list"></a>ä¿®æ”¹/etc/apt/sources.list.d/raspi.list</h2><p><code>sudo nano /etc/apt/sources.list.d/raspi.list</code></p><pre><code>åŸæ–‡`deb http://archive.raspberrypi.org/debian/ stretch main uiï¼Œ` åŠ #åŠ å…¥å¦‚ä¸‹ç§‘å¤§æºï¼š`deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ stretch main ui`</code></pre><h2 id="æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶"><a href="#æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶" class="headerlink" title="æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶"></a>æ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶</h2><p><code>sudo apt-get update</code></p><pre><code>`sudo apt-get upgrade`</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾3b</category>
      
      <category>è½¯ä»¶æº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾3b</tag>
      
      <tag>è½¯ä»¶æº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾3béƒ¨ç½²ngrok</title>
    <link href="undefined2019/11/pi-ngrok/"/>
    <url>2019/11/pi-ngrok/</url>
    
    <content type="html"><![CDATA[<h1 id="ngrok"><a href="#ngrok" class="headerlink" title="ngrok"></a>ngrok</h1><p>å…ˆå»<a href="http://www.ngrok.cc/" target="_blank" rel="noopener">sunny ngrok</a>ä¹°ä¸ªid</p><p>ä¸‹è½½<br><code>wget &#39;hls.ctopus.com/sunny/linux_arm.zip?v=2&#39;</code></p><p>é‡å‘½å<br><code>mv linux_arm.zip?v=2 linux_arm.zip</code></p><p>è§£å‹ç¼©<br><code>unzip linux_arm.zip</code></p><p>åˆ‡æ–‡ä»¶å¤¹<br><code>cd linux_arm</code></p><p>å¯åŠ¨ï¼<br><code>./sunny clientid &lt;your-clientid&gt;</code></p><p>åå°è¿è¡Œ<br><code>setsid ./sunny clientid &lt;your-clientid&gt; &amp;</code></p><p>ç§»åŠ¨åˆ° /use/local/bin ç›®å½•ä¸‹å¹¶ç»™äºˆå¯æ‰§è¡Œæƒé™</p><pre><code>sudo mv sunny /usr/local/bin/sunnysudo chmod +x /usr/local/bin/sunny</code></pre><p>ç¼–å†™å¯åŠ¨è„šæœ¬<br><code>sudo vim /etc/init.d/sunny</code></p><p>å†…å®¹</p><pre><code>#!/bin/sh -e### BEGIN INIT INFO# Provides:          ngrok.cc# Required-Start:    $network $remote_fs $local_fs# Required-Stop:     $network $remote_fs $local_fs# Default-Start:     2 3 4 5# Default-Stop:      0 1 6# Short-Description: autostartup of ngrok for Linux### END INIT INFONAME=sunnyDAEMON=/usr/local/bin/$NAMEPIDFILE=/var/run/$NAME.pid[ -x &quot;$DAEMON&quot; ] || exit 0case &quot;$1&quot; in  start)      if [ -f $PIDFILE ]; then        echo &quot;$NAME already running...&quot;        echo -e &quot;\033[1;35mStart Fail\033[0m&quot;      else        echo &quot;Starting $NAME...&quot;        start-stop-daemon -S -p $PIDFILE -m -b -o -q -x $DAEMON -- clientid &lt;your-clientid&gt; || return 2        echo -e &quot;\033[1;32mStart Success\033[0m&quot;    fi    ;;  stop)        echo &quot;Stoping $NAME...&quot;        start-stop-daemon -K -p $PIDFILE -s TERM -o -q || return 2        rm -rf $PIDFILE        echo -e &quot;\033[1;32mStop Success\033[0m&quot;    ;;  restart)    $0 stop &amp;&amp; sleep 2 &amp;&amp; $0 start    ;;  *)    echo &quot;Usage: $0 {start|stop|restart}&quot;    exit 1    ;;esacexit 0</code></pre><p>æµ‹è¯•</p><pre><code>sudo chmod 755 /etc/init.d/sunnysudo /etc/init.d/sunny startsudo /etc/init.d/sunny start    #å¯åŠ¨sudo /etc/init.d/sunny stop     #åœæ­¢sudo /etc/init.d/sunny restart  #é‡å¯</code></pre><p>å¼€æœºå¯åŠ¨</p><pre><code>cd /etc/init.dsudo update-rc.d sunny defaults 90    #åŠ å…¥å¼€æœºå¯åŠ¨sudo update-rc.d -f sunny remove  #å–æ¶ˆå¼€æœºå¯åŠ¨</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾3b</category>
      
      <category>ngrok</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾3b</tag>
      
      <tag>ngrok</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾3bå®‰è£…gogs</title>
    <link href="undefined2019/11/pi-gogs/"/>
    <url>2019/11/pi-gogs/</url>
    
    <content type="html"><![CDATA[<h1 id="gogs"><a href="#gogs" class="headerlink" title="gogs"></a>gogs</h1><p>åˆ›å»ºæ–°ç”¨æˆ·git å¦‚æœä¸åˆ›å»ºä¼šå¯¼è‡´ä¸»è´¦å·ç™»é™†ä¸äº†ssh</p><p>åˆ‡æ¢ä¸ºrootç”¨æˆ·ä¸ºäº†è·å–åˆ›å»ºç”¨æˆ·çš„æƒé™</p><p><code>sudo su</code></p><p>ç»™rootåˆ›å»ºä¸€ä¸ªæ–°çš„å¯†ç </p><p><code>sudo passwd root</code></p><p>æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·ï¼ˆå¦‚ç”¨æˆ·åä¸ºgitï¼‰</p><p><code>useradd git</code></p><p>ä¸ºè¯¥ç”¨æˆ·è®¾å®šç™»å½•å¯†ç </p><p><code>passwd git</code></p><p>ä¸ºè¯¥ç”¨æˆ·æŒ‡å®šå‘½ä»¤è§£é‡Šç¨‹åºï¼ˆé€šå¸¸ä¸º/bin/bashï¼‰</p><p><code>usermod -s /bin/bash git</code></p><p>ä¸ºè¯¥ç”¨æˆ·æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•</p><p><code>usermod -d /home/git git</code></p><p>æŸ¥çœ‹ç”¨æˆ·çš„å±æ€§</p><p><code>cat /etc/passwd</code></p><p>åˆ‡æ¢åˆ°ç”¨æˆ·git</p><p><code>su git</code></p><p>å†æ¬¡åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼ˆä¸è¦ç”¨sudo su, è€Œç”¨su rootï¼‰</p><p><code>su root</code></p><p>æ‰§è¡Œvisudoå‘½ä»¤</p><p><code>visudo</code></p><p>è¯¥å‘½ä»¤å®é™…ä¸Šæ‰“å¼€çš„æ˜¯/etc/sudoersæ–‡ä»¶ï¼Œä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œåœ¨â€œroot ALL=(ALL:ALL) ALLâ€è¿™ä¸€è¡Œä¸‹é¢åŠ å…¥ä¸€è¡Œï¼š</p><p><code>git ALL=(ALL:ALL) ALL</code></p><p>ctrl+oï¼ˆç„¶åå†æŒ‰enterï¼‰ä¿å­˜ï¼Œctrl+cå–æ¶ˆï¼Œctrl+xé€€å‡º</p><hr><p>ä¸‹è½½<br><code>wget &#39;https://github.com/gogs/gogs/releases/download/v0.11.91/raspi_armv7.zip&#39;</code></p><p>è§£å‹<br><code>unzip raspi_armv7.zip</code></p><p>è¿›æ–‡ä»¶å¤¹<br><code>cd gogs</code></p><p>å¼€å¯webæœåŠ¡<br><code>./gogs web</code></p><p>å»3000ç«¯å£è¿›è¡Œè®¾ç½®ï¼Œæ•°æ®åº“è®¾ç½®æˆsqliteå°±è¡Œ</p><p>åœ¨<code>/etc/systemd/system/gogs.service</code>æ–°å»ºæ–‡ä»¶</p><pre><code>[Unit]Description=Gogs (Go Git Service)After=syslog.targetAfter=network.target#After=mysqld.service#After=postgresql.service#After=memcached.service#After=redis.service[Service]# Modify these two values and uncomment them if you have# repos with lots of files and get an HTTP error 500 because# of that####LimitMEMLOCK=infinity#LimitNOFILE=65535Type=simpleUser=gitGroup=gitWorkingDirectory=/home/git/gogsExecStart=/home/git/gogs/gogs webRestart=alwaysEnvironment=USER=git HOME=/home/git[Install]WantedBy=multi-user.target</code></pre><p>æ›´æ–° Userã€Groupã€WorkingDirectoryã€ExecStart å’Œ Environment ä¸ºç›¸å¯¹åº”çš„å€¼ã€‚å…¶ä¸­ WorkingDirectory ä¸ºæ‚¨çš„ Gogs å®é™…å®‰è£…è·¯å¾„æ ¹ç›®å½•ã€‚</p><p>[å¯é€‰] å¦‚æœæ‚¨ Gogs å®‰è£…ç¤ºä¾‹ä½¿ç”¨ MySQL/MariaDBã€PostgreSQLã€Redis æˆ– memcachedï¼Œè¯·å»æ‰ç›¸åº” After å±æ€§çš„æ³¨é‡Šã€‚</p><p>ç„¶åé€šè¿‡ <code>sudo systemctl enable gogs</code> å‘½ä»¤æ¿€æ´»ï¼Œæœ€åæ‰§è¡Œ <code>sudo systemd start gogs</code>ï¼Œå°±å¯ä»¥åšåˆ°å¼€æœºå¯åŠ¨äº†ã€‚</p><p>å®˜æ–¹æ–‡ä»¶è§£é‡Š<a href="'https://gogs.io/docs/advanced/configuration_cheat_sheet'">docs</a></p><p>é‡å¯ <code>sudo systemctl restart gogs</code></p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾3b</category>
      
      <category>gogs</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾3b</tag>
      
      <tag>gogs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitå¸¸ç”¨å‘½ä»¤æ€»ç»“</title>
    <link href="undefined2019/11/git/"/>
    <url>2019/11/git/</url>
    
    <content type="html"><![CDATA[<h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><ul><li><p>SSH <code>C:\Users\yingbo\.ssh</code></p><ul><li>åˆ›å»ºï¼š <code>ssh-keygen -t rsa -C &#39;é‚®ä»¶åœ°å€&#39;</code></li><li>æµ‹è¯•ï¼š <code>ssh -T git@github.com</code></li><li>æ³¨æ„ï¼šä¸Šé¢åˆ›å»ºè¯­å¥å®Œæˆåä¼šè®©ä½ è¾“å…¥å¯†ç ï¼Œç›´æ¥å›è½¦ï¼Œä¸ç„¶ä¹‹åæäº¤çš„æ—¶å€™æ¯æ¬¡éƒ½ä¼šè®©ä½ è¾“å…¥å¯†ç </li></ul></li><li><p><code>git init</code> åˆå§‹åŒ–ä»“åº“</p></li><li><p><code>git status</code> æŸ¥çœ‹ä»“åº“çŠ¶æ€</p></li><li><p><code>git add &#39;æ–‡ä»¶å&#39;</code> å‘æš‚å­˜åŒºæ·»åŠ æ–‡ä»¶ï¼Œå¦‚æœæ·»åŠ æ‰€æœ‰æ–‡ä»¶ï¼Œâ€™æ–‡ä»¶åâ€™ =&gt; *</p></li><li><p><code>git commit -m &#39;text&#39;</code> </p><ul><li>æäº¤ï¼Œtextä¸ºæäº¤æè¿°</li><li>ç›´æ¥ <code>git commit</code>ä¼šè¿›å…¥è¯¦ç»†ç¼–è¾‘çš„ç•Œé¢<ul><li>ç¬¬ä¸€è¡Œç®€ä»‹</li><li>ç¬¬äºŒè¡Œç©ºè¡Œ</li><li>ç¬¬ä¸‰è¡Œè¯¦æƒ…</li></ul></li></ul></li><li><p><code>git log</code> æäº¤æ—¥å¿—</p><ul><li>å°¾ç¼€<ul><li><code>--pretty = short</code> åªæ˜¾ç¤ºæ¦‚è¦</li><li><code>ç›®å½•å/æ–‡ä»¶å</code> åªæ˜¾ç¤ºè¯¥ç›®å½•æˆ–è€…è¯¥æ–‡ä»¶çš„è®°å½•</li><li><code>-P</code> æ˜¾ç¤ºæ”¹åŠ¨</li><li><code>-P</code> æ–‡ä»¶å æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„æ”¹åŠ¨</li></ul></li></ul></li><li><p><code>git diff</code> æŸ¥çœ‹åŒºåˆ«</p><ul><li><code>git diff HEAD</code> æœ¬æ¬¡ä¸ä¸Šæ¬¡çš„åŒºåˆ«</li></ul></li><li><p><code>git branch</code> æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯</p><ul><li><code>git checkout -b name</code> åˆ›å»ºnameåˆ†æ”¯å¹¶è¿›å…¥( ç­‰åŒäºä¸‹è¾¹ä¸¤æ­¥)<ul><li>=&gt; <code>git branch name</code></li><li>=&gt; <code>git checkout name</code></li></ul></li><li><code>git checkout -</code> åˆ‡æ¢å›ä¸Šä¸€ä¸ªåˆ†æ”¯</li><li>æ³¨ï¼šæœ€å¥½æ¯åšä¸€ä»¶äº‹å°±åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œä¿è¯ä»£ç æ— è¯¯å†åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œä¿éšœä¸»åˆ†æ”¯éšæ—¶å¯ç”¨</li></ul></li><li><p>åˆå¹¶åˆ†æ”¯</p><ul><li><code>git checkout &#39;åˆå¹¶åˆ°çš„åˆ†æ”¯å&#39;</code></li><li><code>git merge --no--ff &#39;åˆå¹¶åæ¶ˆå¤±çš„åˆ†æ”¯å&#39;</code></li><li><code>git log --graph</code> å›¾è¡¨å½¢å¼æäº¤æ—¥å¿—</li></ul></li><li><p><code>git reset --hard &#39;å“ˆå¸Œå€¼&#39;</code> å›æº¯å†å²ç‰ˆæœ¬</p></li><li><p><code>git reflog</code> æ“ä½œæ—¥å¿—</p></li><li><p>æŸ¥çœ‹å†²çªå¹¶è§£å†³ git merge åæç¤ºæœ‰å†²çªï¼Œæ­¤æ—¶å†²çªæ–‡ä»¶ä¼šè¢«ä¿®æ”¹ï¼Œè¿›æ–‡ä»¶æ”¹æˆæƒ³è¦çš„æ ·å­ï¼Œç„¶ågit addï¼Œgit commitï¼Œdoneï¼</p></li><li><p><code>git commit --amend</code> ä¿®æ”¹ä¸Šä¸€æ¡çš„æäº¤ä¿¡æ¯</p></li><li><p>å‹ç¼©å†å²</p><ul><li><code>git commit -am</code> ä¸€æ¬¡æ€§è¿›æš‚å­˜ç„¶åæäº¤<ul><li>æ³¨ï¼šä¿®æ”¹åç§°ä¸º typo ä¾‹ï¼š fix typo</li></ul></li><li><code>git rebase -i HEAD~2</code> åˆå¹¶ä¸¤æ¬¡æœ€æ–°æäº¤</li><li>è¿›å…¥ç¼–è¾‘å™¨</li><li>pick 7a34294 Add feature-C</li><li>pick ofba227 Fix typo å°†typo -&gt; fixup<br>ç„¶åä¿å­˜ -&gt; ok</li></ul></li><li><p>æ·»åŠ è¿œç¨‹ä»“åº“</p><ul><li><code>git remote add origin &#39;ç½‘å€&#39;</code></li><li><code>git push -u origin master</code></li><li>//å°†å½“å‰åˆ†æ”¯æ¨é€åˆ°originè¿œç«¯çš„masteråˆ†æ”¯ï¼ˆmasterä¸å­˜åœ¨çš„è¯è‡ªåŠ¨æ–°å»ºï¼‰</li><li><code>git clone &#39;ç½‘å€&#39;</code> å…‹éš†ä»“åº“</li><li><code>git branch -a</code> åŒæ—¶æ˜¾ç¤ºæœ¬åœ°å’Œè¿œç«¯çš„åˆ†æ”¯</li><li><code>git checkout -b feature-D origin/feature-D</code></li><li>//æ–°å»ºæœ¬åœ°feature-Dåˆ†æ”¯å¹¶æŠŠè¿œç«¯çš„feature-DåŒæ­¥è¿‡æ¥</li></ul></li><li><p><code>git fetch</code> ä¸ <code>git pull</code> çš„åŒºåˆ«</p><ul><li>git pull = git fetch + git margin</li></ul></li><li><p>åˆ é™¤åˆ†æ”¯</p><ul><li><code>git branch -D &#39;åˆ†æ”¯å&#39;</code></li></ul></li><li><p>PRæ€»ç»“</p><pre><code>git checkout -b &lt;name&gt; //åˆ›å»ºåˆ†æ”¯coding...git commit -m &#39;&lt;content&gt;&#39; //æäº¤git pushd -u origin &lt;name&gt;  //æ¨è¿œç«¯web -&gt; prgit branch -d &lt;name&gt;  //åˆ é™¤æœ¬åœ°git push origin --delete &lt;name&gt; //åˆ é™¤è¿œç«¯</code></pre></li></ul>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‘½ä»¤</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linux å‘½ä»¤ç§¯ç´¯</title>
    <link href="undefined2019/11/linux/"/>
    <url>2019/11/linux/</url>
    
    <content type="html"><![CDATA[<h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><h3 id="åˆ‡æ¢ç”¨æˆ·su-root"><a href="#åˆ‡æ¢ç”¨æˆ·su-root" class="headerlink" title="åˆ‡æ¢ç”¨æˆ·su - root"></a>åˆ‡æ¢ç”¨æˆ·<code>su - root</code></h3><ul><li><code>-</code> çš„å«ä¹‰æ˜¯æºå¸¦å½“å‰ç¯å¢ƒå˜é‡</li></ul><h3 id="å¢åŠ ç”¨æˆ·useradd"><a href="#å¢åŠ ç”¨æˆ·useradd" class="headerlink" title="å¢åŠ ç”¨æˆ·useradd"></a>å¢åŠ ç”¨æˆ·<code>useradd</code></h3><ul><li><code>-g</code> æŒ‡å®šç”¨æˆ·æ‰€åœ¨ç¾¤ç»„ </li><li><code>-m</code> è‡ªåŠ¨å»ºç«‹ç”¨æˆ·çš„ç™»å…¥ç›®å½• </li><li><code>-n</code> å–æ¶ˆå»ºç«‹å’Œç”¨æˆ·åŒåçš„ç¾¤ç»„</li></ul><h3 id="æ›´æ”¹å¯¹åº”ç”¨æˆ·å¯†ç passwd"><a href="#æ›´æ”¹å¯¹åº”ç”¨æˆ·å¯†ç passwd" class="headerlink" title="æ›´æ”¹å¯¹åº”ç”¨æˆ·å¯†ç passwd"></a>æ›´æ”¹å¯¹åº”ç”¨æˆ·å¯†ç <code>passwd</code></h3><h3 id="æŸ¥çœ‹è¿›ç¨‹ps"><a href="#æŸ¥çœ‹è¿›ç¨‹ps" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹ps"></a>æŸ¥çœ‹è¿›ç¨‹<code>ps</code></h3><ul><li><code>-ef</code> æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ä»¥åŠå…¶pid </li><li><code>-aux</code> æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹å¹¶æ˜¾ç¤ºå…¶å ç”¨çš„cpuä»¥åŠmem </li><li><code>-w</code> æ˜¾ç¤ºåŠ å®½å¯ä»¥æ˜¾ç¤ºæ›´å¤šä¿¡æ¯</li><li><code>ps -auxwww</code>åŠ å®½ä¸‰æ¬¡</li></ul><h3 id="åœæ­¢è¿›ç¨‹kill-pid"><a href="#åœæ­¢è¿›ç¨‹kill-pid" class="headerlink" title="åœæ­¢è¿›ç¨‹kill (pid)"></a>åœæ­¢è¿›ç¨‹<code>kill (pid)</code></h3><ul><li><code>-s</code> å‘é€æŒ‡å®šä¿¡å·åˆ°è¿›ç¨‹</li><li><code>-p</code> æ‰“å°å‡ºè¿›ç¨‹å·ï¼Œä½†æ˜¯ä¸å‘é€ä¿¡å·</li><li><code>-l</code> æ‰“å°å‡ºæ‰€æœ‰å¯ç”¨ä¿¡å·åç§°</li></ul><h3 id="æŸ¥çœ‹ç£ç›˜fdisk-l"><a href="#æŸ¥çœ‹ç£ç›˜fdisk-l" class="headerlink" title="æŸ¥çœ‹ç£ç›˜fdisk -l"></a>æŸ¥çœ‹ç£ç›˜<code>fdisk -l</code></h3><ul><li>å¿…é¡»ä½¿ç”¨<code>root</code>æƒé™</li></ul><h3 id="åˆ‡æ¢ç›®å½•cd"><a href="#åˆ‡æ¢ç›®å½•cd" class="headerlink" title="åˆ‡æ¢ç›®å½•cd ../"></a>åˆ‡æ¢ç›®å½•<code>cd ../</code></h3><ul><li><code>./</code>å½“å‰ç›®å½•</li><li><code>../</code>ä¸Šçº§ç›®å½•</li><li><code>cd -</code>è¿”å›åˆ°ä¸Šä¸ªç›®å½•</li></ul><h3 id="æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶ls"><a href="#æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶ls" class="headerlink" title="æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶ls"></a>æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶<code>ls</code></h3><ul><li><code>-l</code> æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</li><li><code>-a -all</code> åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶</li><li><code>-d</code> å°†ç›®å½•åå’Œå…¶ä»–æ–‡ä»¶ä¸€æ ·åˆ—å‡ºï¼Œè€Œä¸æ˜¯åˆ—å‡ºç›®å½•çš„å†…å®¹</li><li><code>-f</code> ä¸æ’åºç›®å½•å†…å®¹ï¼ŒæŒ‰ä»–ä»¬åœ¨ç£ç›˜ä¸Šå­˜å‚¨çš„é¡ºåºåˆ—å‡º</li></ul><h3 id="åˆ›å»ºä¸€ä¸ªç›®å½•mkdir"><a href="#åˆ›å»ºä¸€ä¸ªç›®å½•mkdir" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç›®å½•mkdir"></a>åˆ›å»ºä¸€ä¸ªç›®å½•<code>mkdir</code></h3><ul><li><code>-m</code> å¯¹æ–°å»ºç›®å½•è®¾ç½®æƒé™</li><li><code>-p</code> å¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œå¯ä»¥ä¸€æ¬¡åˆ›å»ºå¤šå±‚ç›®å½•</li></ul><h3 id="æŸ¥çœ‹æ–‡ä»¶å†…å®¹cat-æ–‡ä»¶è·¯å¾„"><a href="#æŸ¥çœ‹æ–‡ä»¶å†…å®¹cat-æ–‡ä»¶è·¯å¾„" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶å†…å®¹cat (æ–‡ä»¶è·¯å¾„)"></a>æŸ¥çœ‹æ–‡ä»¶å†…å®¹<code>cat (æ–‡ä»¶è·¯å¾„)</code></h3><ul><li><code>-n</code> è¾“å‡ºè¡Œå·</li><li><code>-b</code> è¾“å‡ºè¡Œå·ï¼Œå¯¹ç©ºç™½è¡Œä¸ç¼–å·</li></ul><h3 id="å¤åˆ¶æ–‡ä»¶cp"><a href="#å¤åˆ¶æ–‡ä»¶cp" class="headerlink" title="å¤åˆ¶æ–‡ä»¶cp"></a>å¤åˆ¶æ–‡ä»¶<code>cp</code></h3><ul><li><code>-a</code> ä¿ç•™é“¾æ¥ï¼Œæ–‡ä»¶å±æ€§ï¼Œå¤åˆ¶å…¶å­ç›®å½•ï¼Œå…¶ä½œç”¨ç­‰äºdpré€‰é¡¹çš„ç»„åˆ</li><li><code>-d</code> æ‹·è´æ—¶ä¿ç•™é“¾æ¥</li><li><code>-f</code> åˆ é™¤å·²ç»å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶è€Œä¸æç¤º</li><li><code>-i</code> è¦†ç›–ç›®æ ‡æ–‡ä»¶ä¹‹å‰ç»™å‡ºæç¤ºè¦æ±‚ç”¨æˆ·ç¡®è®¤</li><li><code>-p</code> é™¤äº†å¤åˆ¶å†…å®¹ï¼Œä¿®æ”¹æ—¶é—´è¿˜æœ‰è®¿é—®æƒé™ä¹Ÿå¤åˆ¶åˆ°æ–°æ–‡ä»¶ä¸­</li><li><code>-r</code> è‹¥ç»™å‡ºçš„æ–‡ä»¶æ˜¯ä¸€ç›®å½•æ–‡ä»¶ï¼Œæ­¤æ—¶å°†ä¼šé€’å½’å¤åˆ¶è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä»¥åŠå­ç›®å½•ï¼Œæ­¤æ—¶ç›®æ ‡æ–‡ä»¶å¿…é¡»ä¸ºä¸€ä¸ªç›®å½•å</li></ul><h3 id="ä¸ºæ–‡ä»¶æ”¹åæˆ–è€…ç§»åŠ¨mv"><a href="#ä¸ºæ–‡ä»¶æ”¹åæˆ–è€…ç§»åŠ¨mv" class="headerlink" title="ä¸ºæ–‡ä»¶æ”¹åæˆ–è€…ç§»åŠ¨mv"></a>ä¸ºæ–‡ä»¶æ”¹åæˆ–è€…ç§»åŠ¨<code>mv</code></h3><ul><li><code>-i</code> è‹¥æ“ä½œä¼šå¯¼è‡´æ–‡ä»¶è¢«è¦†å†™ï¼Œå°†ä¼šæç¤ºç”¨æˆ·ç¡®è®¤</li><li><code>-f</code> ç¦æ­¢äº¤äº’ ä¼šè®©<code>-i</code> å¤±æ•ˆ</li><li><code>mv fromfile tofile</code>å¦‚æŠŠæ–‡ä»¶a.txtå¾—å‘½åä¸ºb.txtï¼Œå¯ä»¥æ˜¯mv a.txt b.txtã€‚</li></ul><h3 id="ç§»é™¤ç›®å½•æˆ–è€…æ–‡ä»¶rm"><a href="#ç§»é™¤ç›®å½•æˆ–è€…æ–‡ä»¶rm" class="headerlink" title="ç§»é™¤ç›®å½•æˆ–è€…æ–‡ä»¶rm"></a>ç§»é™¤ç›®å½•æˆ–è€…æ–‡ä»¶<code>rm</code></h3><ul><li><code>-i</code> è¿›è¡Œäº¤äº’å¼åˆ é™¤</li><li><code>-f</code> ä¸éœ€è¦æç¤º</li><li><code>-r</code> å°†æ‰€æœ‰ç›®å½•ä»¥åŠå­ç›®å½•é€’å½’åœ°åˆ é™¤</li><li><code>-d</code> åˆ é™¤ç©ºç›®å½•</li></ul><h3 id="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…chown"><a href="#ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…chown" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…chown"></a>ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…<code>chown</code></h3><h3 id="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰ç»„chgrp"><a href="#ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰ç»„chgrp" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰ç»„chgrp"></a>ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰ç»„<code>chgrp</code></h3><h3 id="ä¿®æ”¹æ–‡ä»¶è®¿é—®æƒé™chmod"><a href="#ä¿®æ”¹æ–‡ä»¶è®¿é—®æƒé™chmod" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶è®¿é—®æƒé™chmod"></a>ä¿®æ”¹æ–‡ä»¶è®¿é—®æƒé™<code>chmod</code></h3><ul><li><code>-c</code> è‹¥æ–‡ä»¶æƒé™æ›´æ”¹æˆåŠŸæ‰æ˜¾ç¤º</li><li><code>-f</code> è‹¥æ–‡ä»¶æ— æ³•è¢«æ›´æ”¹ä¹Ÿä¸æ‰“å°é”™è¯¯ä¿¡æ¯</li><li><code>-v</code> æ˜¾ç¤ºæƒé™å˜æ›´è¯¦ç»†èµ„æ–™</li><li>ä¿®æ”¹æ–‡ä»¶æƒé™<a href="'https://blog.csdn.net/slwhy/article/details/78876237'">é“¾æ¥</a></li></ul><h3 id="åœ¨æŒ‡å®šæ–‡ä»¶ä¸­æœç´¢å†…å®¹"><a href="#åœ¨æŒ‡å®šæ–‡ä»¶ä¸­æœç´¢å†…å®¹" class="headerlink" title="åœ¨æŒ‡å®šæ–‡ä»¶ä¸­æœç´¢å†…å®¹"></a>åœ¨æŒ‡å®šæ–‡ä»¶ä¸­æœç´¢å†…å®¹</h3><ul><li><code>grep</code> é€‰é¡¹ æ ¼å¼ æ–‡ä»¶</li><li><code>-c</code> åªè¾“å‡ºåŒ¹é…çš„è¡Œæ•°</li><li><code>-i</code> ä¸åŒºåˆ†å¤§å°å†™</li><li><code>-h</code> æŸ¥è¯¢å¤šæ–‡ä»¶ä¸æ˜¾ç¤ºæ–‡ä»¶å</li><li><code>-l</code> æŸ¥è¯¢å¤šæ–‡ä»¶åªæ˜¾ç¤ºåŒ…å«åŒ¹é…å­—ç¬¦çš„æ–‡ä»¶å</li><li><code>-n</code> æ˜¾ç¤ºåŒ¹é…è¡Œä»¥åŠè¡Œå·</li><li><code>-s</code> ä¸æ˜¾ç¤ºä¸å­˜åœ¨æˆ–è€…æ— åŒ¹é…æ–‡æœ¬çš„é”™è¯¯ä¿¡æ¯</li><li><code>-v</code> æ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œ</li></ul><h3 id="æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶find-è·¯å¾„-é€‰é¡¹-æè¿°"><a href="#æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶find-è·¯å¾„-é€‰é¡¹-æè¿°" class="headerlink" title="æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶find [è·¯å¾„] [é€‰é¡¹] [æè¿°]"></a>æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶<code>find [è·¯å¾„] [é€‰é¡¹] [æè¿°]</code></h3><ul><li><code>-depth</code> ä½¿ç”¨æ·±åº¦çº§åˆ«çš„æŸ¥æ‰¾è¿‡ç¨‹æ–¹å¼ï¼Œåœ¨æŸå±‚æŒ‡å®šç›®å½•ä¸­ä¼˜å…ˆæŸ¥æ‰¾æ–‡ä»¶å†…å®¹</li><li><code>-mount</code> ä¸åœ¨å…¶ä»–æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾</li><li><code>-name</code> æ”¯æŒé€šé…ç¬¦* å’Œ ?</li><li><code>-user</code> æœç´¢æ–‡ä»¶æ‰€å±ä¸ºç”¨æˆ·åçš„æ–‡ä»¶</li><li><code>-print</code> è¾“å‡ºæœç´¢ç»“æœå¹¶æ‰“å°</li><li><code>-and</code> æŠŠä¸¤ä¸ªæŸ¥æ‰¾å‚æ•°é“¾æ¥èµ·æ¥</li></ul><h3 id="æŸ¥æ‰¾æ–‡ä»¶locate"><a href="#æŸ¥æ‰¾æ–‡ä»¶locate" class="headerlink" title="æŸ¥æ‰¾æ–‡ä»¶locate"></a>æŸ¥æ‰¾æ–‡ä»¶<code>locate</code></h3><ul><li>å…ˆå»ºç«‹ä¸€ä¸ªæ‰€æœ‰æ–‡ä»¶åä»¥åŠè·¯å¾„çš„æ•°æ®åº“æ‰€ä»¥æ¯”findå¿«</li><li><code>-u</code> ä»æ ¹ç›®å½•å¼€å§‹å»ºç«‹æ•°æ®åº“</li><li><code>-U</code> ä»æŒ‡å®šä½ç½®å¼€å§‹å»ºç«‹æ•°æ®åº“</li><li><code>-f</code> å°†ç‰¹å®šçš„æ–‡ä»¶ç³»ç»Ÿæ’é™¤åœ¨æ•°æ®åº“å¤–</li><li><code>-r</code> ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åšå¯»æ‰¾çš„æ¡ä»¶</li><li><code>-o</code> æŒ‡å®šæ•°æ®åº“çš„åæˆ</li><li>åˆ›å»ºåä¼šåœ¨crontabä¸­æ¯å¤©å·²æ›´æ–°</li><li>ä½¿ç”¨updatedbå¼ºåˆ¶æ›´æ–°</li></ul><h3 id="åˆ›å»ºé“¾æ¥ln-s-genromfs-0-5-1-tar-gz-hello"><a href="#åˆ›å»ºé“¾æ¥ln-s-genromfs-0-5-1-tar-gz-hello" class="headerlink" title="åˆ›å»ºé“¾æ¥ln -s ../genromfs-0.5.1.tar.gz ./hello"></a>åˆ›å»ºé“¾æ¥<code>ln -s ../genromfs-0.5.1.tar.gz ./hello</code></h3><h3 id="gzipå‹ç¼©è§£å‹"><a href="#gzipå‹ç¼©è§£å‹" class="headerlink" title="gzipå‹ç¼©è§£å‹"></a>gzipå‹ç¼©è§£å‹</h3><ul><li>è‡ªåŠ¨è¯†åˆ«</li><li><code>-c</code> å°†è¾“å‡ºä¿¡æ¯è¾“å‡ºä¿ç•™æºæ–‡ä»¶</li><li><code>-d</code> å°†å‹ç¼©æ–‡ä»¶è§£å‹ï¼Œä½†æ˜¯ä¸èƒ½å‹ç¼©ç›®å½•</li><li><code>-l</code> æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</li><li><code>-r</code> æŸ¥æ‰¾æŒ‡å®šç›®å½•å‹ç¼©æˆ–è§£å‹ç¼©é‡Œè¾¹æ‰€æœ‰æ–‡ä»¶</li><li><code>-t</code> æµ‹è¯•ï¼Œæ£€æŸ¥å‹ç¼©æ–‡ä»¶æ˜¯å¦å®Œæ•´</li><li><code>-v</code> å¯¹æ¯ä¸€ä¸ªå‹ç¼©æˆ–è€…è§£å‹çš„æ–‡ä»¶æ˜¾ç¤ºæ–‡ä»¶åå’Œå‹ç¼©æ¯”</li></ul><h3 id="å¯¹æ–‡ä»¶ç›®å½•è¿›è¡Œæ‰“åŒ…å’Œè§£åŒ…tar"><a href="#å¯¹æ–‡ä»¶ç›®å½•è¿›è¡Œæ‰“åŒ…å’Œè§£åŒ…tar" class="headerlink" title="å¯¹æ–‡ä»¶ç›®å½•è¿›è¡Œæ‰“åŒ…å’Œè§£åŒ…tar"></a>å¯¹æ–‡ä»¶ç›®å½•è¿›è¡Œæ‰“åŒ…å’Œè§£åŒ…<code>tar</code></h3><ul><li><code>tar [é€‰é¡¹] [æ‰“åŒ…åæ–‡ä»¶å] æ–‡ä»¶ç›®å½•åˆ—è¡¨</code></li><li><code>-c</code> å»ºç«‹æ–°çš„æ‰“åŒ…æ–‡ä»¶</li><li><code>-r</code> å‘æ‰“åŒ…æ–‡ä»¶æœ«å°¾è¿½åŠ æ–‡ä»¶</li><li><code>-x</code> ä»æ‰“åŒ…æ–‡ä»¶ä¸­è§£å‡ºæ–‡ä»¶</li><li><code>-o</code> å°†æ–‡ä»¶è§£å¼€åˆ°æ ‡å‡†è¾“å‡º</li><li><code>-v</code> æ˜¾ç¤ºå¤„ç†è¿‡ç¨‹ä¸­ç›¸å…³ä¿¡æ¯</li><li><code>-f</code> å¯¹æ™®é€šæ–‡ä»¶æ“ä½œ</li><li><code>-z</code> è°ƒç”¨gzipå‹ç¼©æ‰“åŒ…æ–‡ä»¶ï¼Œä¸<code>-x</code>è¿ç”¨è§£å‹ç¼©</li><li><code>-j</code> è°ƒç”¨bzip2å‹ç¼©æ‰“åŒ…æ–‡ä»¶ï¼Œä¸<code>-x</code>è¿ç”¨è§£å‹ç¼©</li><li><code>-Z</code> è°ƒç”¨Compresså‹ç¼©æ‰“åŒ…æ–‡ä»¶ï¼Œä¸<code>-x</code>è¿ç”¨è§£å‹ç¼©</li></ul><h3 id="æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ifconfig"><a href="#æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ifconfig" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ifconfig"></a>æŸ¥çœ‹ç½‘ç»œçŠ¶æ€<code>ifconfig</code></h3><h3 id="ç³»ç»ŸæœåŠ¡å‘½ä»¤chkconfig-list"><a href="#ç³»ç»ŸæœåŠ¡å‘½ä»¤chkconfig-list" class="headerlink" title="ç³»ç»ŸæœåŠ¡å‘½ä»¤chkconfig --list"></a>ç³»ç»ŸæœåŠ¡å‘½ä»¤<code>chkconfig --list</code></h3><ul><li>æŸ¥çœ‹æŒ‡å®šå‘½ä»¤ <code>chkconfig --list|grep ntpd</code></li><li>æ“ä½œæŒ‡å®šæœåŠ¡ <code>chkconfig --level 3 ntpd on</code></li></ul><h3 id="æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹pwd"><a href="#æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹pwd" class="headerlink" title="æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹pwd"></a>æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹<code>pwd</code></h3><h3 id="æŸ¥çœ‹æ‰€æœ‰ç«¯å£å ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹æ‰€æœ‰ç«¯å£å ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ç«¯å£å ç”¨æƒ…å†µ"></a>æŸ¥çœ‹æ‰€æœ‰ç«¯å£å ç”¨æƒ…å†µ</h3><p><code>netstat -ntlp</code></p><h3 id="åˆ›å»ºæ–‡ä»¶"><a href="#åˆ›å»ºæ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ–‡ä»¶"></a>åˆ›å»ºæ–‡ä»¶</h3><p><code>touch</code></p><h3 id="æŸ¥çœ‹-5000ç«¯å£å ç”¨ç¨‹åº"><a href="#æŸ¥çœ‹-5000ç«¯å£å ç”¨ç¨‹åº" class="headerlink" title="æŸ¥çœ‹ 5000ç«¯å£å ç”¨ç¨‹åº"></a>æŸ¥çœ‹ 5000ç«¯å£å ç”¨ç¨‹åº</h3><p><code>sudo lsof -i:5000</code></p><h3 id="åœæ­¢è¿›ç¨‹"><a href="#åœæ­¢è¿›ç¨‹" class="headerlink" title="åœæ­¢è¿›ç¨‹"></a>åœæ­¢è¿›ç¨‹</h3><p><code>sudo kill (PID)</code></p><h3 id="ä¸‹è½½åˆ°å½“å‰æ–‡ä»¶å¤¹"><a href="#ä¸‹è½½åˆ°å½“å‰æ–‡ä»¶å¤¹" class="headerlink" title="ä¸‹è½½åˆ°å½“å‰æ–‡ä»¶å¤¹"></a>ä¸‹è½½åˆ°å½“å‰æ–‡ä»¶å¤¹</h3><p><code>wget&quot;&lt;url&gt;&quot;</code></p><h3 id="ä¸‹è½½åˆ°-home-omio-Desktop"><a href="#ä¸‹è½½åˆ°-home-omio-Desktop" class="headerlink" title="ä¸‹è½½åˆ° /home/omio/Desktop"></a>ä¸‹è½½åˆ° /home/omio/Desktop</h3><p><code>wget -P /home/omio/Desktop/&quot;&lt;url&gt;&quot;</code></p><h3 id="ä¸‹è½½å¹¶é‡å‘½åä¸ºNewFileName"><a href="#ä¸‹è½½å¹¶é‡å‘½åä¸ºNewFileName" class="headerlink" title="ä¸‹è½½å¹¶é‡å‘½åä¸ºNewFileName"></a>ä¸‹è½½å¹¶é‡å‘½åä¸ºNewFileName</h3><p><code>wget -O /home/omio/Desktop/NewFileName&quot;&lt;url&gt;&quot;</code></p><h3 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h3><p><code>zip -r archive_name.zip directory_to_compress</code></p><h3 id="è§£å‹ç¼©"><a href="#è§£å‹ç¼©" class="headerlink" title="è§£å‹ç¼©"></a>è§£å‹ç¼©</h3><p><code>unzip archive_name.zip</code></p><h3 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h3><p><code>tar -cvf archive_name.tar directory_to_compress</code></p><h3 id="è§£åŒ…"><a href="#è§£åŒ…" class="headerlink" title="è§£åŒ…"></a>è§£åŒ…</h3><p><code>tar -xvf archive_name.tar.gz</code></p><h3 id="å‹ç¼©-1"><a href="#å‹ç¼©-1" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h3><p><code>tar -zcvf archive_name.tar.gz directory_to_compress</code></p><h3 id="è§£å‹ç¼©-1"><a href="#è§£å‹ç¼©-1" class="headerlink" title="è§£å‹ç¼©"></a>è§£å‹ç¼©</h3><p><code>tar -zxvf archive_name.tar.gz</code></p><p><code>tar -zxvf archive_name.tar.gz -C /tmp/extract_here/</code></p><h3 id="é‡å‘½å"><a href="#é‡å‘½å" class="headerlink" title="é‡å‘½å"></a>é‡å‘½å</h3><p><code>mv fromfile tofile</code></p><ul><li>å¦‚æŠŠæ–‡ä»¶a.txtå¾—å‘½åä¸ºb.txtï¼Œå¯ä»¥æ˜¯mv a.txt b.txtã€‚</li></ul><h3 id="åˆ é™¤ä¸€ä¸ªç©ºç›®å½•"><a href="#åˆ é™¤ä¸€ä¸ªç©ºç›®å½•" class="headerlink" title="åˆ é™¤ä¸€ä¸ªç©ºç›®å½•"></a>åˆ é™¤ä¸€ä¸ªç©ºç›®å½•</h3><p><code>rm -d ç›®å½•å</code></p><h3 id="åˆ é™¤ä¸€ä¸ªç©ºç›®å½•-1"><a href="#åˆ é™¤ä¸€ä¸ªç©ºç›®å½•-1" class="headerlink" title="åˆ é™¤ä¸€ä¸ªç©ºç›®å½•"></a>åˆ é™¤ä¸€ä¸ªç©ºç›®å½•</h3><p><code>rm -dir ç›®å½•å</code></p><h3 id="åˆ é™¤ä¸€ä¸ªéç©ºç›®å½•"><a href="#åˆ é™¤ä¸€ä¸ªéç©ºç›®å½•" class="headerlink" title="åˆ é™¤ä¸€ä¸ªéç©ºç›®å½•"></a>åˆ é™¤ä¸€ä¸ªéç©ºç›®å½•</h3><p><code>rm -r ç›®å½•å</code></p><h3 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h3><p><code>rm æ–‡ä»¶å</code></p><h3 id="ä¿®æ”¹æ–‡ä»¶æƒé™"><a href="#ä¿®æ”¹æ–‡ä»¶æƒé™" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶æƒé™"></a>ä¿®æ”¹æ–‡ä»¶æƒé™</h3><p><a href="'https://blog.csdn.net/slwhy/article/details/78876237'">é“¾æ¥</a></p><ul><li>sudo chmod o+rwx /usr/local/bin/sunny</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç³»ç»Ÿ</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>system</tag>
      
      <tag>linux</tag>
      
      <tag>å‘½ä»¤</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flask ç®€å•å®‰è£…å’Œéƒ¨ç½²</title>
    <link href="undefined2019/11/flask/"/>
    <url>2019/11/flask/</url>
    
    <content type="html"><![CDATA[<h1 id="flask"><a href="#flask" class="headerlink" title="flask"></a>flask</h1><p>å®‰è£…venv</p><p><code>python3 -m venv venv</code></p><p>å¯åŠ¨venv</p><p><code>. venv/bin/activate</code></p><p>å…³é—­venv</p><p><code>deactivate</code> </p><p>æŸ¥çœ‹ç°åœ¨å·²ç»å®‰è£…çš„ä¾èµ–</p><p><code>pip3 list</code></p><p>æ›´æ–°pip</p><p><code>pip install --upgrade pip</code></p><p>å®‰è£…Flask</p><p><code>pip install Flask</code></p><p>å®‰è£…æœ€æ–°çš„flask</p><p><code>pip install -U https://github.com/pallets/flask/archive/master.tar.gz</code></p><p>å®‰è£…pymongo</p><p><code>pip install pymongo</code></p><p>å®‰è£…requests</p><p><code>pip install requests</code></p><p>å®‰è£…payjs</p><p><code>pip install payjs</code></p><p>è®¾ç½®å…¨å±€å˜é‡</p><p><code>export FLASK_APP=qrcode.py</code></p><p><code>export FLASK_ENV=development</code></p><p>å¯åŠ¨</p><p><code>flask run --host=0.0.0.0</code></p><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…gunicorn </p><p><code>pip install gunicorn</code></p><p>æ·»åŠ é…ç½®æ–‡ä»¶ gunicorn.conf.py</p><pre><code># å¹¶è¡Œå·¥ä½œçº¿ç¨‹æ•°workers = 4# ç›‘å¬å†…ç½‘ç«¯å£5000ã€æŒ‰éœ€è¦æ›´æ”¹ã€‘bind = &#39;127.0.0.1:5000&#39;# è®¾ç½®å®ˆæŠ¤è¿›ç¨‹ã€å…³é—­è¿æ¥æ—¶ï¼Œç¨‹åºä»åœ¨è¿è¡Œã€‘daemon = True# è®¾ç½®è¶…æ—¶æ—¶é—´120sï¼Œé»˜è®¤ä¸º30sã€‚æŒ‰è‡ªå·±çš„éœ€æ±‚è¿›è¡Œè®¾ç½®timeout = 120# è®¾ç½®è®¿é—®æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯æ—¥å¿—è·¯å¾„# accesslog = &#39;./logs/acess.log&#39;# errorlog = &#39;./logs/error.log&#39;# è‡ªåŠ¨é‡å¯autostart = ture</code></pre><p>å¯åŠ¨gunicorn</p><p><code>gunicorn qrcode:app -c gunicorn.conf.py</code></p><p>æŸ¥è¯¢gunicorn</p><p><code>pstree -ap|grep gunicorn</code></p><p>åœæ­¢è¿›ç¨‹</p><p><code>kill (pid)</code></p><hr><p>åœ¨è·¯ç”±ä¸­</p><ol><li>åŒæ—¶æœ‰user/ å’Œ user ä¼˜å…ˆè§£é‡Š user/</li><li>åªæœ‰ user çš„æƒ…å†µä¸‹ è®¿é—®user/ä¼šæŠ¥404</li><li>åªæœ‰ user/ çš„æƒ…å†µä¸‹ è®¿é—®userä¼šè¢«é‡å®šå‘</li></ol>]]></content>
    
    
    <categories>
      
      <category>æ¡†æ¶</category>
      
      <category>flask</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="undefined2019/11/hello-world/"/>
    <url>2019/11/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p><pre><code class="html">&lt;meta name=&quot;baidu-site-verification&quot; content=&quot;nLbPI5Gbnr&quot; /&gt;</code></pre>]]></content>
    
    
    <categories>
      
      <category>quickStart</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>